{"version":3,"sources":["webpack:///fullcalendar/webpack/universalModuleDefinition","webpack:///fullcalendar/webpack/bootstrap 52c5629fe9f4a196aeb8","webpack:///fullcalendar/external \"moment\"","webpack:///fullcalendar/./src/tslib-lite.js","webpack:///fullcalendar/external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}","webpack:///fullcalendar/./src/util.ts","webpack:///fullcalendar/./src/models/UnzonedRange.ts","webpack:///fullcalendar/./src/models/event-source/EventSource.ts","webpack:///fullcalendar/./src/common/ListenerMixin.ts","webpack:///fullcalendar/./src/moment-ext.ts","webpack:///fullcalendar/./src/common/EmitterMixin.ts","webpack:///fullcalendar/./src/models/ComponentFootprint.ts","webpack:///fullcalendar/./src/models/event/SingleEventDef.ts","webpack:///fullcalendar/./src/common/Mixin.ts","webpack:///fullcalendar/./src/component/interactions/Interaction.ts","webpack:///fullcalendar/./src/exports.ts","webpack:///fullcalendar/./src/models/event/EventDateProfile.ts","webpack:///fullcalendar/./src/models/event/EventInstanceGroup.ts","webpack:///fullcalendar/./src/theme/Theme.ts","webpack:///fullcalendar/./src/common/Promise.ts","webpack:///fullcalendar/./src/common/GlobalEmitter.ts","webpack:///fullcalendar/./src/ViewRegistry.ts","webpack:///fullcalendar/./src/common/HitDragListener.ts","webpack:///fullcalendar/./src/locale.ts","webpack:///fullcalendar/./src/options.ts","webpack:///fullcalendar/./src/common/Class.ts","webpack:///fullcalendar/./src/models/event/EventDef.ts","webpack:///fullcalendar/./src/models/event/util.ts","webpack:///fullcalendar/./src/models/event/EventFootprint.ts","webpack:///fullcalendar/./src/models/event/EventDefMutation.ts","webpack:///fullcalendar/./src/models/event-source/EventSourceParser.ts","webpack:///fullcalendar/./src/common/Scroller.ts","webpack:///fullcalendar/./src/component/InteractiveDateComponent.ts","webpack:///fullcalendar/./src/View.ts","webpack:///fullcalendar/./src/component/renderers/EventRenderer.ts","webpack:///fullcalendar/./src/date-formatting.ts","webpack:///fullcalendar/./src/common/Model.ts","webpack:///fullcalendar/./src/models/event/EventDefParser.ts","webpack:///fullcalendar/./src/models/event/EventDefDateMutation.ts","webpack:///fullcalendar/./src/theme/ThemeRegistry.ts","webpack:///fullcalendar/./src/models/event-source/ArrayEventSource.ts","webpack:///fullcalendar/./src/common/CoordCache.ts","webpack:///fullcalendar/./src/common/DragListener.ts","webpack:///fullcalendar/./src/component/DayTableMixin.ts","webpack:///fullcalendar/./src/component/renderers/BusinessHourRenderer.ts","webpack:///fullcalendar/./src/component/renderers/FillRenderer.ts","webpack:///fullcalendar/./src/component/renderers/HelperRenderer.ts","webpack:///fullcalendar/./src/component/interactions/EventPointing.ts","webpack:///fullcalendar/./src/component/interactions/StandardInteractionsMixin.ts","webpack:///fullcalendar/./src/basic/DayGrid.ts","webpack:///fullcalendar/./src/basic/BasicView.ts","webpack:///fullcalendar/./src/Constraints.ts","webpack:///fullcalendar/./src/common/ParsableModelMixin.ts","webpack:///fullcalendar/./src/models/event/EventInstance.ts","webpack:///fullcalendar/./src/models/event/RecurringEventDef.ts","webpack:///fullcalendar/./src/models/event/EventRange.ts","webpack:///fullcalendar/./src/models/BusinessHourGenerator.ts","webpack:///fullcalendar/./src/theme/StandardTheme.ts","webpack:///fullcalendar/./src/theme/JqueryUiTheme.ts","webpack:///fullcalendar/./src/models/event-source/FuncEventSource.ts","webpack:///fullcalendar/./src/models/event-source/JsonFeedEventSource.ts","webpack:///fullcalendar/./src/common/TaskQueue.ts","webpack:///fullcalendar/./src/common/RenderQueue.ts","webpack:///fullcalendar/./src/component/DateComponent.ts","webpack:///fullcalendar/./src/Calendar.ts","webpack:///fullcalendar/./src/DateProfileGenerator.ts","webpack:///fullcalendar/./src/component/interactions/ExternalDropping.ts","webpack:///fullcalendar/./src/component/interactions/EventResizing.ts","webpack:///fullcalendar/./src/component/interactions/EventDragging.ts","webpack:///fullcalendar/./src/component/interactions/DateSelecting.ts","webpack:///fullcalendar/./src/agenda/AgendaView.ts","webpack:///fullcalendar/./src/agenda/TimeGrid.ts","webpack:///fullcalendar/./src/basic/BasicViewDateProfileGenerator.ts","webpack:///fullcalendar/./src/basic/MonthView.ts","webpack:///fullcalendar/./src/list/ListView.ts","webpack:///fullcalendar/./src/main.ts","webpack:///fullcalendar/./src/component/Component.ts","webpack:///fullcalendar/./src/common/Iterator.ts","webpack:///fullcalendar/./src/Toolbar.ts","webpack:///fullcalendar/./src/OptionsManager.ts","webpack:///fullcalendar/./src/ViewSpecManager.ts","webpack:///fullcalendar/./src/models/EventManager.ts","webpack:///fullcalendar/./src/models/EventPeriod.ts","webpack:///fullcalendar/./src/common/MouseFollower.ts","webpack:///fullcalendar/./src/component/interactions/DateClicking.ts","webpack:///fullcalendar/./src/agenda/TimeGridEventRenderer.ts","webpack:///fullcalendar/./src/agenda/TimeGridHelperRenderer.ts","webpack:///fullcalendar/./src/agenda/TimeGridFillRenderer.ts","webpack:///fullcalendar/./src/common/Popover.ts","webpack:///fullcalendar/./src/basic/DayGridEventRenderer.ts","webpack:///fullcalendar/./src/basic/DayGridHelperRenderer.ts","webpack:///fullcalendar/./src/basic/DayGridFillRenderer.ts","webpack:///fullcalendar/./src/basic/MonthViewDateProfileGenerator.ts","webpack:///fullcalendar/./src/list/ListEventRenderer.ts","webpack:///fullcalendar/./src/list/ListEventPointing.ts","webpack:///fullcalendar/./src/models/event-source/config.ts","webpack:///fullcalendar/./src/theme/config.ts","webpack:///fullcalendar/./src/theme/Bootstrap3Theme.ts","webpack:///fullcalendar/./src/theme/Bootstrap4Theme.ts","webpack:///fullcalendar/./src/basic/config.ts","webpack:///fullcalendar/./src/agenda/config.ts","webpack:///fullcalendar/./src/list/config.ts"],"names":[],"mappings":"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","file":"dist/fullcalendar.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"moment\"), require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"moment\", \"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FullCalendar\"] = factory(require(\"moment\"), require(\"jquery\"));\n\telse\n\t\troot[\"FullCalendar\"] = factory(root[\"moment\"], root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 236);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 52c5629fe9f4a196aeb8","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"moment\"\n// module id = 0\n// module chunks = 1 2 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74","\r\n/*\r\nderived from:\r\nhttps://github.com/Microsoft/tslib/blob/v1.6.0/tslib.js\r\n\r\nonly include the helpers we need, to keep down filesize\r\n*/\r\n\r\nvar extendStatics =\r\n  Object.setPrototypeOf ||\r\n  ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n  function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexports.__extends = function (d, b) {\r\n  extendStatics(d, b);\r\n  function __() { this.constructor = d; }\r\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/tslib-lite.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\",\"root\":\"jQuery\"}\n// module id = 3\n// module chunks = 2 3","import * as moment from 'moment'\r\nimport * as $ from 'jquery'\r\n\r\n\r\n/* FullCalendar-specific DOM Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\r\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\r\nexport function compensateScroll(rowEls, scrollbarWidths) {\r\n  if (scrollbarWidths.left) {\r\n    rowEls.css({\r\n      'border-left-width': 1,\r\n      'margin-left': scrollbarWidths.left - 1\r\n    })\r\n  }\r\n  if (scrollbarWidths.right) {\r\n    rowEls.css({\r\n      'border-right-width': 1,\r\n      'margin-right': scrollbarWidths.right - 1\r\n    })\r\n  }\r\n}\r\n\r\n\r\n// Undoes compensateScroll and restores all borders/margins\r\nexport function uncompensateScroll(rowEls) {\r\n  rowEls.css({\r\n    'margin-left': '',\r\n    'margin-right': '',\r\n    'border-left-width': '',\r\n    'border-right-width': ''\r\n  })\r\n}\r\n\r\n\r\n// Make the mouse cursor express that an event is not allowed in the current area\r\nexport function disableCursor() {\r\n  $('body').addClass('fc-not-allowed')\r\n}\r\n\r\n\r\n// Returns the mouse cursor to its original look\r\nexport function enableCursor() {\r\n  $('body').removeClass('fc-not-allowed')\r\n}\r\n\r\n\r\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\r\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\r\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\r\n// reduces the available height.\r\nexport function distributeHeight(els, availableHeight, shouldRedistribute) {\r\n\r\n  // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\r\n  // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\r\n\r\n  let minOffset1 = Math.floor(availableHeight / els.length) // for non-last element\r\n  let minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)) // for last element *FLOORING NOTE*\r\n  let flexEls = [] // elements that are allowed to expand. array of DOM nodes\r\n  let flexOffsets = [] // amount of vertical space it takes up\r\n  let flexHeights = [] // actual css height\r\n  let usedHeight = 0\r\n\r\n  undistributeHeight(els) // give all elements their natural height\r\n\r\n  // find elements that are below the recommended height (expandable).\r\n  // important to query for heights in a single first pass (to avoid reflow oscillation).\r\n  els.each(function(i, el) {\r\n    let minOffset = i === els.length - 1 ? minOffset2 : minOffset1\r\n    let naturalOffset = $(el).outerHeight(true)\r\n\r\n    if (naturalOffset < minOffset) {\r\n      flexEls.push(el)\r\n      flexOffsets.push(naturalOffset)\r\n      flexHeights.push($(el).height())\r\n    } else {\r\n      // this element stretches past recommended height (non-expandable). mark the space as occupied.\r\n      usedHeight += naturalOffset\r\n    }\r\n  })\r\n\r\n  // readjust the recommended height to only consider the height available to non-maxed-out rows.\r\n  if (shouldRedistribute) {\r\n    availableHeight -= usedHeight\r\n    minOffset1 = Math.floor(availableHeight / flexEls.length)\r\n    minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)) // *FLOORING NOTE*\r\n  }\r\n\r\n  // assign heights to all expandable elements\r\n  $(flexEls).each(function(i, el) {\r\n    let minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1\r\n    let naturalOffset = flexOffsets[i]\r\n    let naturalHeight = flexHeights[i]\r\n    let newHeight = minOffset - (naturalOffset - naturalHeight) // subtract the margin/padding\r\n\r\n    if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\r\n      $(el).height(newHeight)\r\n    }\r\n  })\r\n}\r\n\r\n\r\n// Undoes distrubuteHeight, restoring all els to their natural height\r\nexport function undistributeHeight(els) {\r\n  els.height('')\r\n}\r\n\r\n\r\n// Given `els`, a jQuery set of <td> cells, find the cell with the largest natural width and set the widths of all the\r\n// cells to be that width.\r\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\r\nexport function matchCellWidths(els) {\r\n  let maxInnerWidth = 0\r\n\r\n  els.find('> *').each(function(i, innerEl) {\r\n    let innerWidth = $(innerEl).outerWidth()\r\n    if (innerWidth > maxInnerWidth) {\r\n      maxInnerWidth = innerWidth\r\n    }\r\n  })\r\n\r\n  maxInnerWidth++ // sometimes not accurate of width the text needs to stay on one line. insurance\r\n\r\n  els.width(maxInnerWidth)\r\n\r\n  return maxInnerWidth\r\n}\r\n\r\n\r\n// Given one element that resides inside another,\r\n// Subtracts the height of the inner element from the outer element.\r\nexport function subtractInnerElHeight(outerEl, innerEl) {\r\n  let both = outerEl.add(innerEl)\r\n  let diff\r\n\r\n  // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\r\n  both.css({\r\n    position: 'relative', // cause a reflow, which will force fresh dimension recalculation\r\n    left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\r\n  })\r\n  diff = outerEl.outerHeight() - innerEl.outerHeight() // grab the dimensions\r\n  both.css({ position: '', left: '' }) // undo hack\r\n\r\n  return diff\r\n}\r\n\r\n\r\n/* Element Geom Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// borrowed from https://github.com/jquery/jquery-ui/blob/1.11.0/ui/core.js#L51\r\nexport function getScrollParent(el) {\r\n  let position = el.css('position')\r\n  let scrollParent = el.parents().filter(function() {\r\n    let parent = $(this)\r\n    return (/(auto|scroll)/).test(\r\n      parent.css('overflow') + parent.css('overflow-y') + parent.css('overflow-x')\r\n    )\r\n  }).eq(0)\r\n\r\n  return position === 'fixed' || !scrollParent.length ? $(el[0].ownerDocument || document) : scrollParent\r\n}\r\n\r\n\r\n// Queries the outer bounding area of a jQuery element.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\nexport function getOuterRect(el, origin?) {\r\n  let offset = el.offset()\r\n  let left = offset.left - (origin ? origin.left : 0)\r\n  let top = offset.top - (origin ? origin.top : 0)\r\n\r\n  return {\r\n    left: left,\r\n    right: left + el.outerWidth(),\r\n    top: top,\r\n    bottom: top + el.outerHeight()\r\n  }\r\n}\r\n\r\n\r\n// Queries the area within the margin/border/scrollbars of a jQuery element. Does not go within the padding.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\n// WARNING: given element can't have borders\r\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\r\nexport function getClientRect(el, origin?) {\r\n  let offset = el.offset()\r\n  let scrollbarWidths = getScrollbarWidths(el)\r\n  let left = offset.left + getCssFloat(el, 'border-left-width') + scrollbarWidths.left - (origin ? origin.left : 0)\r\n  let top = offset.top + getCssFloat(el, 'border-top-width') + scrollbarWidths.top - (origin ? origin.top : 0)\r\n\r\n  return {\r\n    left: left,\r\n    right: left + el[0].clientWidth, // clientWidth includes padding but NOT scrollbars\r\n    top: top,\r\n    bottom: top + el[0].clientHeight // clientHeight includes padding but NOT scrollbars\r\n  }\r\n}\r\n\r\n\r\n// Queries the area within the margin/border/padding of a jQuery element. Assumed not to have scrollbars.\r\n// Returns a rectangle with absolute coordinates: left, right (exclusive), top, bottom (exclusive).\r\n// Origin is optional.\r\nexport function getContentRect(el, origin) {\r\n  let offset = el.offset() // just outside of border, margin not included\r\n  let left = offset.left + getCssFloat(el, 'border-left-width') + getCssFloat(el, 'padding-left') -\r\n    (origin ? origin.left : 0)\r\n  let top = offset.top + getCssFloat(el, 'border-top-width') + getCssFloat(el, 'padding-top') -\r\n    (origin ? origin.top : 0)\r\n\r\n  return {\r\n    left: left,\r\n    right: left + el.width(),\r\n    top: top,\r\n    bottom: top + el.height()\r\n  }\r\n}\r\n\r\n\r\n// Returns the computed left/right/top/bottom scrollbar widths for the given jQuery element.\r\n// WARNING: given element can't have borders (which will cause offsetWidth/offsetHeight to be larger).\r\n// NOTE: should use clientLeft/clientTop, but very unreliable cross-browser.\r\nexport function getScrollbarWidths(el) {\r\n  let leftRightWidth = el[0].offsetWidth - el[0].clientWidth\r\n  let bottomWidth = el[0].offsetHeight - el[0].clientHeight\r\n  let widths\r\n\r\n  leftRightWidth = sanitizeScrollbarWidth(leftRightWidth)\r\n  bottomWidth = sanitizeScrollbarWidth(bottomWidth)\r\n\r\n  widths = { left: 0, right: 0, top: 0, bottom: bottomWidth }\r\n\r\n  if (getIsLeftRtlScrollbars() && el.css('direction') === 'rtl') { // is the scrollbar on the left side?\r\n    widths.left = leftRightWidth\r\n  } else {\r\n    widths.right = leftRightWidth\r\n  }\r\n\r\n  return widths\r\n}\r\n\r\n\r\n// The scrollbar width computations in getScrollbarWidths are sometimes flawed when it comes to\r\n// retina displays, rounding, and IE11. Massage them into a usable value.\r\nfunction sanitizeScrollbarWidth(width) {\r\n  width = Math.max(0, width) // no negatives\r\n  width = Math.round(width)\r\n  return width\r\n}\r\n\r\n\r\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\r\n\r\nlet _isLeftRtlScrollbars = null\r\n\r\nfunction getIsLeftRtlScrollbars() { // responsible for caching the computation\r\n  if (_isLeftRtlScrollbars === null) {\r\n    _isLeftRtlScrollbars = computeIsLeftRtlScrollbars()\r\n  }\r\n  return _isLeftRtlScrollbars\r\n}\r\n\r\nfunction computeIsLeftRtlScrollbars() { // creates an offscreen test element, then removes it\r\n  let el = $('<div><div/></div>')\r\n    .css({\r\n      position: 'absolute',\r\n      top: -1000,\r\n      left: 0,\r\n      border: 0,\r\n      padding: 0,\r\n      overflow: 'scroll',\r\n      direction: 'rtl'\r\n    })\r\n    .appendTo('body')\r\n  let innerEl = el.children()\r\n  let res = innerEl.offset().left > el.offset().left // is the inner div shifted to accommodate a left scrollbar?\r\n  el.remove()\r\n  return res\r\n}\r\n\r\n\r\n// Retrieves a jQuery element's computed CSS value as a floating-point number.\r\n// If the queried value is non-numeric (ex: IE can return \"medium\" for border width), will just return zero.\r\nfunction getCssFloat(el, prop) {\r\n  return parseFloat(el.css(prop)) || 0\r\n}\r\n\r\n\r\n/* Mouse / Touch Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\r\nexport function isPrimaryMouseButton(ev) {\r\n  return ev.which === 1 && !ev.ctrlKey\r\n}\r\n\r\n\r\nexport function getEvX(ev) {\r\n  let touches = ev.originalEvent.touches\r\n\r\n  // on mobile FF, pageX for touch events is present, but incorrect,\r\n  // so, look at touch coordinates first.\r\n  if (touches && touches.length) {\r\n    return touches[0].pageX\r\n  }\r\n\r\n  return ev.pageX\r\n}\r\n\r\n\r\nexport function getEvY(ev) {\r\n  let touches = ev.originalEvent.touches\r\n\r\n  // on mobile FF, pageX for touch events is present, but incorrect,\r\n  // so, look at touch coordinates first.\r\n  if (touches && touches.length) {\r\n    return touches[0].pageY\r\n  }\r\n\r\n  return ev.pageY\r\n}\r\n\r\n\r\nexport function getEvIsTouch(ev) {\r\n  return /^touch/.test(ev.type)\r\n}\r\n\r\n\r\nexport function preventSelection(el) {\r\n  el.addClass('fc-unselectable')\r\n    .on('selectstart', preventDefault)\r\n}\r\n\r\n\r\nexport function allowSelection(el) {\r\n  el.removeClass('fc-unselectable')\r\n    .off('selectstart', preventDefault)\r\n}\r\n\r\n\r\n// Stops a mouse/touch event from doing it's native browser action\r\nexport function preventDefault(ev) {\r\n  ev.preventDefault()\r\n}\r\n\r\n\r\n/* General Geometry Utils\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\r\nexport function intersectRects(rect1, rect2) {\r\n  let res = {\r\n    left: Math.max(rect1.left, rect2.left),\r\n    right: Math.min(rect1.right, rect2.right),\r\n    top: Math.max(rect1.top, rect2.top),\r\n    bottom: Math.min(rect1.bottom, rect2.bottom)\r\n  }\r\n\r\n  if (res.left < res.right && res.top < res.bottom) {\r\n    return res\r\n  }\r\n  return false\r\n}\r\n\r\n\r\n// Returns a new point that will have been moved to reside within the given rectangle\r\nexport function constrainPoint(point, rect) {\r\n  return {\r\n    left: Math.min(Math.max(point.left, rect.left), rect.right),\r\n    top: Math.min(Math.max(point.top, rect.top), rect.bottom)\r\n  }\r\n}\r\n\r\n\r\n// Returns a point that is the center of the given rectangle\r\nexport function getRectCenter(rect) {\r\n  return {\r\n    left: (rect.left + rect.right) / 2,\r\n    top: (rect.top + rect.bottom) / 2\r\n  }\r\n}\r\n\r\n\r\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\r\nexport function diffPoints(point1, point2) {\r\n  return {\r\n    left: point1.left - point2.left,\r\n    top: point1.top - point2.top\r\n  }\r\n}\r\n\r\n\r\n/* Object Ordering by Field\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport function parseFieldSpecs(input) {\r\n  let specs = []\r\n  let tokens = []\r\n  let i\r\n  let token\r\n\r\n  if (typeof input === 'string') {\r\n    tokens = input.split(/\\s*,\\s*/)\r\n  } else if (typeof input === 'function') {\r\n    tokens = [ input ]\r\n  } else if ($.isArray(input)) {\r\n    tokens = input\r\n  }\r\n\r\n  for (i = 0; i < tokens.length; i++) {\r\n    token = tokens[i]\r\n\r\n    if (typeof token === 'string') {\r\n      specs.push(\r\n        token.charAt(0) === '-' ?\r\n          { field: token.substring(1), order: -1 } :\r\n          { field: token, order: 1 }\r\n      )\r\n    } else if (typeof token === 'function') {\r\n      specs.push({ func: token })\r\n    }\r\n  }\r\n\r\n  return specs\r\n}\r\n\r\n\r\nexport function compareByFieldSpecs(obj1, obj2, fieldSpecs, obj1fallback?, obj2fallback?) {\r\n  let i\r\n  let cmp\r\n\r\n  for (i = 0; i < fieldSpecs.length; i++) {\r\n    cmp = compareByFieldSpec(obj1, obj2, fieldSpecs[i], obj1fallback, obj2fallback)\r\n    if (cmp) {\r\n      return cmp\r\n    }\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\n\r\nexport function compareByFieldSpec(obj1, obj2, fieldSpec, obj1fallback, obj2fallback) {\r\n  if (fieldSpec.func) {\r\n    return fieldSpec.func(obj1, obj2)\r\n  }\r\n\r\n  let val1 = obj1[fieldSpec.field]\r\n  let val2 = obj2[fieldSpec.field]\r\n\r\n  if (val1 == null && obj1fallback) {\r\n    val1 = obj1fallback[fieldSpec.field]\r\n  }\r\n\r\n  if (val2 == null && obj2fallback) {\r\n    val2 = obj2fallback[fieldSpec.field]\r\n  }\r\n\r\n  return flexibleCompare(val1, val2) * (fieldSpec.order || 1)\r\n}\r\n\r\n\r\nexport function flexibleCompare(a, b) {\r\n  if (!a && !b) {\r\n    return 0\r\n  }\r\n  if (b == null) {\r\n    return -1\r\n  }\r\n  if (a == null) {\r\n    return 1\r\n  }\r\n  if ($.type(a) === 'string' || $.type(b) === 'string') {\r\n    return String(a).localeCompare(String(b))\r\n  }\r\n  return a - b\r\n}\r\n\r\n\r\n/* Date Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport const dayIDs = [ 'sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat' ]\r\nexport const unitsDesc = [ 'year', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond' ] // descending\r\n\r\n\r\n// Diffs the two moments into a Duration where full-days are recorded first, then the remaining time.\r\n// Moments will have their timezones normalized.\r\nexport function diffDayTime(a, b) {\r\n  return moment.duration({\r\n    days: a.clone().stripTime().diff(b.clone().stripTime(), 'days'),\r\n    ms: a.time() - b.time() // time-of-day from day start. disregards timezone\r\n  })\r\n}\r\n\r\n\r\n// Diffs the two moments via their start-of-day (regardless of timezone). Produces whole-day durations.\r\nexport function diffDay(a, b) {\r\n  return moment.duration({\r\n    days: a.clone().stripTime().diff(b.clone().stripTime(), 'days')\r\n  })\r\n}\r\n\r\n\r\n// Diffs two moments, producing a duration, made of a whole-unit-increment of the given unit. Uses rounding.\r\nexport function diffByUnit(a, b, unit) {\r\n  return moment.duration(\r\n    Math.round(a.diff(b, unit, true)), // returnFloat=true\r\n    unit\r\n  )\r\n}\r\n\r\n\r\n// Computes the unit name of the largest whole-unit period of time.\r\n// For example, 48 hours will be \"days\" whereas 49 hours will be \"hours\".\r\n// Accepts start/end, a range object, or an original duration object.\r\nexport function computeGreatestUnit(start, end?) {\r\n  let i\r\n  let unit\r\n  let val\r\n\r\n  for (i = 0; i < unitsDesc.length; i++) {\r\n    unit = unitsDesc[i]\r\n    val = computeRangeAs(unit, start, end)\r\n\r\n    if (val >= 1 && isInt(val)) {\r\n      break\r\n    }\r\n  }\r\n\r\n  return unit // will be \"milliseconds\" if nothing else matches\r\n}\r\n\r\n\r\n// like computeGreatestUnit, but has special abilities to interpret the source input for clues\r\nexport function computeDurationGreatestUnit(duration, durationInput) {\r\n  let unit = computeGreatestUnit(duration)\r\n\r\n  // prevent days:7 from being interpreted as a week\r\n  if (unit === 'week' && typeof durationInput === 'object' && durationInput.days) {\r\n    unit = 'day'\r\n  }\r\n\r\n  return unit\r\n}\r\n\r\n\r\n// Computes the number of units (like \"hours\") in the given range.\r\n// Range can be a {start,end} object, separate start/end args, or a Duration.\r\n// Results are based on Moment's .as() and .diff() methods, so results can depend on internal handling\r\n// of month-diffing logic (which tends to vary from version to version).\r\nfunction computeRangeAs(unit, start, end) {\r\n\r\n  if (end != null) { // given start, end\r\n    return end.diff(start, unit, true)\r\n  } else if (moment.isDuration(start)) { // given duration\r\n    return start.as(unit)\r\n  } else { // given { start, end } range object\r\n    return start.end.diff(start.start, unit, true)\r\n  }\r\n}\r\n\r\n\r\n// Intelligently divides a range (specified by a start/end params) by a duration\r\nexport function divideRangeByDuration(start, end, dur) {\r\n  let months\r\n\r\n  if (durationHasTime(dur)) {\r\n    return (end - start) / dur\r\n  }\r\n  months = dur.asMonths()\r\n  if (Math.abs(months) >= 1 && isInt(months)) {\r\n    return end.diff(start, 'months', true) / months\r\n  }\r\n  return end.diff(start, 'days', true) / dur.asDays()\r\n}\r\n\r\n\r\n// Intelligently divides one duration by another\r\nexport function divideDurationByDuration(dur1, dur2) {\r\n  let months1\r\n  let months2\r\n\r\n  if (durationHasTime(dur1) || durationHasTime(dur2)) {\r\n    return dur1 / dur2\r\n  }\r\n  months1 = dur1.asMonths()\r\n  months2 = dur2.asMonths()\r\n  if (\r\n    Math.abs(months1) >= 1 && isInt(months1) &&\r\n    Math.abs(months2) >= 1 && isInt(months2)\r\n  ) {\r\n    return months1 / months2\r\n  }\r\n  return dur1.asDays() / dur2.asDays()\r\n}\r\n\r\n\r\n// Intelligently multiplies a duration by a number\r\nexport function multiplyDuration(dur, n) {\r\n  let months\r\n\r\n  if (durationHasTime(dur)) {\r\n    return moment.duration(dur * n)\r\n  }\r\n  months = dur.asMonths()\r\n  if (Math.abs(months) >= 1 && isInt(months)) {\r\n    return moment.duration({ months: months * n })\r\n  }\r\n  return moment.duration({ days: dur.asDays() * n })\r\n}\r\n\r\n\r\n// Returns a boolean about whether the given duration has any time parts (hours/minutes/seconds/ms)\r\nexport function durationHasTime(dur) {\r\n  return Boolean(dur.hours() || dur.minutes() || dur.seconds() || dur.milliseconds())\r\n}\r\n\r\n\r\nexport function isNativeDate(input) {\r\n  return Object.prototype.toString.call(input) === '[object Date]' || input instanceof Date\r\n}\r\n\r\n\r\n// Returns a boolean about whether the given input is a time string, like \"06:40:00\" or \"06:00\"\r\nexport function isTimeString(str) {\r\n  return typeof str === 'string' &&\r\n    /^\\d+\\:\\d+(?:\\:\\d+\\.?(?:\\d{3})?)?$/.test(str)\r\n}\r\n\r\n\r\n/* Logging and Debug\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\nexport function log(...args) {\r\n  let console = window.console\r\n\r\n  if (console && console.log) {\r\n    return console.log.apply(console, args)\r\n  }\r\n}\r\n\r\nexport function warn(...args) {\r\n  let console = window.console\r\n\r\n  if (console && console.warn) {\r\n    return console.warn.apply(console, args)\r\n  } else {\r\n    return log.apply(null, args)\r\n  }\r\n}\r\n\r\n\r\n/* General Utilities\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nconst hasOwnPropMethod = {}.hasOwnProperty\r\n\r\n\r\n// Merges an array of objects into a single object.\r\n// The second argument allows for an array of property names who's object values will be merged together.\r\nexport function mergeProps(propObjs, complexProps?) {\r\n  let dest = {}\r\n  let i\r\n  let name\r\n  let complexObjs\r\n  let j\r\n  let val\r\n  let props\r\n\r\n  if (complexProps) {\r\n    for (i = 0; i < complexProps.length; i++) {\r\n      name = complexProps[i]\r\n      complexObjs = []\r\n\r\n      // collect the trailing object values, stopping when a non-object is discovered\r\n      for (j = propObjs.length - 1; j >= 0; j--) {\r\n        val = propObjs[j][name]\r\n\r\n        if (typeof val === 'object') {\r\n          complexObjs.unshift(val)\r\n        } else if (val !== undefined) {\r\n          dest[name] = val // if there were no objects, this value will be used\r\n          break\r\n        }\r\n      }\r\n\r\n      // if the trailing values were objects, use the merged value\r\n      if (complexObjs.length) {\r\n        dest[name] = mergeProps(complexObjs)\r\n      }\r\n    }\r\n  }\r\n\r\n  // copy values into the destination, going from last to first\r\n  for (i = propObjs.length - 1; i >= 0; i--) {\r\n    props = propObjs[i]\r\n\r\n    for (name in props) {\r\n      if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\r\n        dest[name] = props[name]\r\n      }\r\n    }\r\n  }\r\n\r\n  return dest\r\n}\r\n\r\n\r\nexport function copyOwnProps(src, dest) {\r\n  for (let name in src) {\r\n    if (hasOwnProp(src, name)) {\r\n      dest[name] = src[name]\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function hasOwnProp(obj, name) {\r\n  return hasOwnPropMethod.call(obj, name)\r\n}\r\n\r\n\r\nexport function applyAll(functions, thisObj, args) {\r\n  if ($.isFunction(functions)) {\r\n    functions = [ functions ]\r\n  }\r\n  if (functions) {\r\n    let i\r\n    let ret\r\n    for (i = 0; i < functions.length; i++) {\r\n      ret = functions[i].apply(thisObj, args) || ret\r\n    }\r\n    return ret\r\n  }\r\n}\r\n\r\n\r\nexport function removeMatching(array, testFunc) {\r\n  let removeCnt = 0\r\n  let i = 0\r\n\r\n  while (i < array.length) {\r\n    if (testFunc(array[i])) { // truthy value means *remove*\r\n      array.splice(i, 1)\r\n      removeCnt++\r\n    } else {\r\n      i++\r\n    }\r\n  }\r\n\r\n  return removeCnt\r\n}\r\n\r\n\r\nexport function removeExact(array, exactVal) {\r\n  let removeCnt = 0\r\n  let i = 0\r\n\r\n  while (i < array.length) {\r\n    if (array[i] === exactVal) {\r\n      array.splice(i, 1)\r\n      removeCnt++\r\n    } else {\r\n      i++\r\n    }\r\n  }\r\n\r\n  return removeCnt\r\n}\r\n\r\n\r\nexport function isArraysEqual(a0, a1) {\r\n  let len = a0.length\r\n  let i\r\n\r\n  if (len == null || len !== a1.length) { // not array? or not same length?\r\n    return false\r\n  }\r\n\r\n  for (i = 0; i < len; i++) {\r\n    if (a0[i] !== a1[i]) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n\r\n\r\nexport function firstDefined(...args) {\r\n  for (let i = 0; i < args.length; i++) {\r\n    if (args[i] !== undefined) {\r\n      return args[i]\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function htmlEscape(s) {\r\n  return (s + '').replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/'/g, '&#039;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/\\n/g, '<br />')\r\n}\r\n\r\n\r\nexport function stripHtmlEntities(text) {\r\n  return text.replace(/&.*?;/g, '')\r\n}\r\n\r\n\r\n// Given a hash of CSS properties, returns a string of CSS.\r\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\r\nexport function cssToStr(cssProps) {\r\n  let statements = []\r\n\r\n  $.each(cssProps, function(name, val) {\r\n    if (val != null) {\r\n      statements.push(name + ':' + val)\r\n    }\r\n  })\r\n\r\n  return statements.join(';')\r\n}\r\n\r\n\r\n// Given an object hash of HTML attribute names to values,\r\n// generates a string that can be injected between < > in HTML\r\nexport function attrsToStr(attrs) {\r\n  let parts = []\r\n\r\n  $.each(attrs, function(name, val) {\r\n    if (val != null) {\r\n      parts.push(name + '=\"' + htmlEscape(val) + '\"')\r\n    }\r\n  })\r\n\r\n  return parts.join(' ')\r\n}\r\n\r\n\r\nexport function capitaliseFirstLetter(str) {\r\n  return str.charAt(0).toUpperCase() + str.slice(1)\r\n}\r\n\r\n\r\nexport function compareNumbers(a, b) { // for .sort()\r\n  return a - b\r\n}\r\n\r\n\r\nexport function isInt(n) {\r\n  return n % 1 === 0\r\n}\r\n\r\n\r\n// Returns a method bound to the given object context.\r\n// Just like one of the jQuery.proxy signatures, but without the undesired behavior of treating the same method with\r\n// different contexts as identical when binding/unbinding events.\r\nexport function proxy(obj, methodName) {\r\n  let method = obj[methodName]\r\n\r\n  return function() {\r\n    return method.apply(obj, arguments)\r\n  }\r\n}\r\n\r\n\r\n// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\r\nexport function debounce(func, wait, immediate= false) {\r\n  let timeout\r\n  let args\r\n  let context\r\n  let timestamp\r\n  let result\r\n\r\n  let later = function() {\r\n    let last = +new Date() - timestamp\r\n    if (last < wait) {\r\n      timeout = setTimeout(later, wait - last)\r\n    } else {\r\n      timeout = null\r\n      if (!immediate) {\r\n        result = func.apply(context, args)\r\n        context = args = null\r\n      }\r\n    }\r\n  }\r\n\r\n  return function() {\r\n    context = this\r\n    args = arguments\r\n    timestamp = +new Date()\r\n    let callNow = immediate && !timeout\r\n    if (!timeout) {\r\n      timeout = setTimeout(later, wait)\r\n    }\r\n    if (callNow) {\r\n      result = func.apply(context, args)\r\n      context = args = null\r\n    }\r\n    return result\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.ts","import * as moment from 'moment'\r\nimport momentExt from '../moment-ext'\r\n\r\nexport default class UnzonedRange {\r\n\r\n  startMs: number // if null, no start constraint\r\n  endMs: number // if null, no end constraint\r\n\r\n  // TODO: move these into footprint.\r\n  // Especially, doesn't make sense for null startMs/endMs.\r\n  isStart: boolean = true\r\n  isEnd: boolean = true\r\n\r\n  constructor(startInput?, endInput?) {\r\n\r\n    if (moment.isMoment(startInput)) {\r\n      startInput = (startInput.clone() as any).stripZone()\r\n    }\r\n\r\n    if (moment.isMoment(endInput)) {\r\n      endInput = (endInput.clone() as any).stripZone()\r\n    }\r\n\r\n    if (startInput) {\r\n      this.startMs = startInput.valueOf()\r\n    }\r\n\r\n    if (endInput) {\r\n      this.endMs = endInput.valueOf()\r\n    }\r\n  }\r\n\r\n\r\n  /*\r\n  SIDEEFFECT: will mutate eventRanges.\r\n  Will return a new array result.\r\n  Only works for non-open-ended ranges.\r\n  */\r\n  static invertRanges(ranges, constraintRange) {\r\n    let invertedRanges = []\r\n    let startMs = constraintRange.startMs // the end of the previous range. the start of the new range\r\n    let i\r\n    let dateRange\r\n\r\n    // ranges need to be in order. required for our date-walking algorithm\r\n    ranges.sort(compareUnzonedRanges)\r\n\r\n    for (i = 0; i < ranges.length; i++) {\r\n      dateRange = ranges[i]\r\n\r\n      // add the span of time before the event (if there is any)\r\n      if (dateRange.startMs > startMs) { // compare millisecond time (skip any ambig logic)\r\n        invertedRanges.push(\r\n          new UnzonedRange(startMs, dateRange.startMs)\r\n        )\r\n      }\r\n\r\n      if (dateRange.endMs > startMs) {\r\n        startMs = dateRange.endMs\r\n      }\r\n    }\r\n\r\n    // add the span of time after the last event (if there is any)\r\n    if (startMs < constraintRange.endMs) { // compare millisecond time (skip any ambig logic)\r\n      invertedRanges.push(\r\n        new UnzonedRange(startMs, constraintRange.endMs)\r\n      )\r\n    }\r\n\r\n    return invertedRanges\r\n  }\r\n\r\n\r\n  intersect(otherRange) {\r\n    let startMs = this.startMs\r\n    let endMs = this.endMs\r\n    let newRange = null\r\n\r\n    if (otherRange.startMs != null) {\r\n      if (startMs == null) {\r\n        startMs = otherRange.startMs\r\n      } else {\r\n        startMs = Math.max(startMs, otherRange.startMs)\r\n      }\r\n    }\r\n\r\n    if (otherRange.endMs != null) {\r\n      if (endMs == null) {\r\n        endMs = otherRange.endMs\r\n      } else {\r\n        endMs = Math.min(endMs, otherRange.endMs)\r\n      }\r\n    }\r\n\r\n    if (startMs == null || endMs == null || startMs < endMs) {\r\n      newRange = new UnzonedRange(startMs, endMs)\r\n      newRange.isStart = this.isStart && startMs === this.startMs\r\n      newRange.isEnd = this.isEnd && endMs === this.endMs\r\n    }\r\n\r\n    return newRange\r\n  }\r\n\r\n\r\n  intersectsWith(otherRange) {\r\n    return (this.endMs == null || otherRange.startMs == null || this.endMs > otherRange.startMs) &&\r\n      (this.startMs == null || otherRange.endMs == null || this.startMs < otherRange.endMs)\r\n  }\r\n\r\n\r\n  containsRange(innerRange) {\r\n    return (this.startMs == null || (innerRange.startMs != null && innerRange.startMs >= this.startMs)) &&\r\n      (this.endMs == null || (innerRange.endMs != null && innerRange.endMs <= this.endMs))\r\n  }\r\n\r\n\r\n  // `date` can be a moment, a Date, or a millisecond time.\r\n  containsDate(date) {\r\n    let ms = date.valueOf()\r\n\r\n    return (this.startMs == null || ms >= this.startMs) &&\r\n      (this.endMs == null || ms < this.endMs)\r\n  }\r\n\r\n\r\n  // If the given date is not within the given range, move it inside.\r\n  // (If it's past the end, make it one millisecond before the end).\r\n  // `date` can be a moment, a Date, or a millisecond time.\r\n  // Returns a MS-time.\r\n  constrainDate(date) {\r\n    let ms = date.valueOf()\r\n\r\n    if (this.startMs != null && ms < this.startMs) {\r\n      ms = this.startMs\r\n    }\r\n\r\n    if (this.endMs != null && ms >= this.endMs) {\r\n      ms = this.endMs - 1\r\n    }\r\n\r\n    return ms\r\n  }\r\n\r\n\r\n  equals(otherRange) {\r\n    return this.startMs === otherRange.startMs && this.endMs === otherRange.endMs\r\n  }\r\n\r\n\r\n  clone() {\r\n    let range = new UnzonedRange(this.startMs, this.endMs)\r\n\r\n    range.isStart = this.isStart\r\n    range.isEnd = this.isEnd\r\n\r\n    return range\r\n  }\r\n\r\n\r\n  // Returns an ambig-zoned moment from startMs.\r\n  // BEWARE: returned moment is not localized.\r\n  // Formatting and start-of-week will be default.\r\n  getStart() {\r\n    if (this.startMs != null) {\r\n      return momentExt.utc(this.startMs).stripZone()\r\n    }\r\n    return null\r\n  }\r\n\r\n  // Returns an ambig-zoned moment from startMs.\r\n  // BEWARE: returned moment is not localized.\r\n  // Formatting and start-of-week will be default.\r\n  getEnd() {\r\n    if (this.endMs != null) {\r\n      return momentExt.utc(this.endMs).stripZone()\r\n    }\r\n    return null\r\n  }\r\n\r\n\r\n  as(unit) {\r\n    return moment.utc(this.endMs).diff(\r\n      moment.utc(this.startMs),\r\n      unit,\r\n      true\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\n/*\r\nOnly works for non-open-ended ranges.\r\n*/\r\nfunction compareUnzonedRanges(range1, range2) {\r\n  return range1.startMs - range2.startMs // earlier ranges go first\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/UnzonedRange.ts","import * as $ from 'jquery'\r\nimport {\r\n  default as ParsableModelMixin,\r\n  ParsableModelInterface\r\n} from '../../common/ParsableModelMixin'\r\nimport Class from '../../common/Class'\r\nimport Calendar from '../../Calendar'\r\nimport EventDefParser from '../event/EventDefParser'\r\n\r\n\r\nexport default class EventSource extends Class {\r\n\r\n  static uuid: number = 0\r\n  static defineStandardProps = ParsableModelMixin.defineStandardProps\r\n  static copyVerbatimStandardProps = ParsableModelMixin.copyVerbatimStandardProps\r\n\r\n  applyProps: ParsableModelInterface['applyProps']\r\n  isStandardProp: ParsableModelInterface['isStandardProp']\r\n\r\n  calendar: Calendar\r\n\r\n  id: string // can stay null\r\n  uid: string\r\n  color: string\r\n  backgroundColor: string\r\n  borderColor: string\r\n  textColor: string\r\n  className: string[]\r\n  editable: boolean\r\n  startEditable: boolean\r\n  durationEditable: boolean\r\n  rendering: string | null\r\n  overlap: boolean\r\n  constraint: any\r\n  allDayDefault: boolean\r\n  eventDataTransform: any // optional function\r\n\r\n\r\n  // can we do away with calendar? at least for the abstract?\r\n  // useful for buildEventDef\r\n  constructor(calendar) {\r\n    super()\r\n    this.calendar = calendar\r\n    this.className = []\r\n    this.uid = String(EventSource.uuid++)\r\n  }\r\n\r\n\r\n  /*\r\n  rawInput can be any data type!\r\n  */\r\n  static parse(rawInput, calendar) {\r\n    let source = new this(calendar)\r\n\r\n    if (typeof rawInput === 'object') {\r\n      if (source.applyProps(rawInput)) {\r\n        return source\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  static normalizeId(id) { // TODO: converge with EventDef\r\n    if (id) {\r\n      return String(id)\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n\r\n  fetch(start, end, timezone) {\r\n    // subclasses must implement. must return a promise.\r\n  }\r\n\r\n\r\n  removeEventDefsById(eventDefId) {\r\n    // optional for subclasses to implement\r\n  }\r\n\r\n\r\n  removeAllEventDefs() {\r\n    // optional for subclasses to implement\r\n  }\r\n\r\n\r\n  /*\r\n  For compairing/matching\r\n  */\r\n  getPrimitive(otherSource) {\r\n    // subclasses must implement\r\n  }\r\n\r\n\r\n  parseEventDefs(rawEventDefs) {\r\n    let i\r\n    let eventDef\r\n    let eventDefs = []\r\n\r\n    for (i = 0; i < rawEventDefs.length; i++) {\r\n      eventDef = this.parseEventDef(rawEventDefs[i])\r\n\r\n      if (eventDef) {\r\n        eventDefs.push(eventDef)\r\n      }\r\n    }\r\n\r\n    return eventDefs\r\n  }\r\n\r\n\r\n  parseEventDef(rawInput) {\r\n    let calendarTransform = this.calendar.opt('eventDataTransform')\r\n    let sourceTransform = this.eventDataTransform\r\n\r\n    if (calendarTransform) {\r\n      rawInput = calendarTransform(rawInput, this.calendar)\r\n    }\r\n    if (sourceTransform) {\r\n      rawInput = sourceTransform(rawInput, this.calendar)\r\n    }\r\n\r\n    return EventDefParser.parse(rawInput, this)\r\n  }\r\n\r\n\r\n  applyManualStandardProps(rawProps) {\r\n\r\n    if (rawProps.id != null) {\r\n      this.id = EventSource.normalizeId(rawProps.id)\r\n    }\r\n\r\n    // TODO: converge with EventDef\r\n    if ($.isArray(rawProps.className)) {\r\n      this.className = rawProps.className\r\n    } else if (typeof rawProps.className === 'string') {\r\n      this.className = rawProps.className.split(/\\s+/)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n}\r\n\r\nParsableModelMixin.mixInto(EventSource)\r\n\r\n\r\n// Parsing\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\nEventSource.defineStandardProps({\r\n  // manually process...\r\n  id: false,\r\n  className: false,\r\n\r\n  // automatically transfer...\r\n  color: true,\r\n  backgroundColor: true,\r\n  borderColor: true,\r\n  textColor: true,\r\n  editable: true,\r\n  startEditable: true,\r\n  durationEditable: true,\r\n  rendering: true,\r\n  overlap: true,\r\n  constraint: true,\r\n  allDayDefault: true,\r\n  eventDataTransform: true\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/EventSource.ts","/*\r\nUtility methods for easily listening to events on another object,\r\nand more importantly, easily unlistening from them.\r\n\r\nUSAGE:\r\n  import { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\nin class:\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\nafter class:\r\n  ListenerMixin.mixInto(TheClass)\r\n*/\r\n\r\nimport * as $ from 'jquery'\r\nimport Mixin from './Mixin'\r\n\r\nexport interface ListenerInterface {\r\n  listenTo(other, arg, callback?)\r\n  stopListeningTo(other, eventName?)\r\n}\r\n\r\nlet guid = 0\r\n\r\nexport default class ListenerMixin extends Mixin implements ListenerInterface {\r\n\r\n  listenerId: any\r\n\r\n  /*\r\n  Given an `other` object that has on/off methods, bind the given `callback` to an event by the given name.\r\n  The `callback` will be called with the `this` context of the object that .listenTo is being called on.\r\n  Can be called:\r\n    .listenTo(other, eventName, callback)\r\n  OR\r\n    .listenTo(other, {\r\n      eventName1: callback1,\r\n      eventName2: callback2\r\n    })\r\n  */\r\n  listenTo(other, arg, callback?) {\r\n    if (typeof arg === 'object') { // given dictionary of callbacks\r\n      for (let eventName in arg) {\r\n        if (arg.hasOwnProperty(eventName)) {\r\n          this.listenTo(other, eventName, arg[eventName])\r\n        }\r\n      }\r\n    } else if (typeof arg === 'string') {\r\n      other.on(\r\n        arg + '.' + this.getListenerNamespace(), // use event namespacing to identify this object\r\n        $.proxy(callback, this) // always use `this` context\r\n          // the usually-undesired jQuery guid behavior doesn't matter,\r\n          // because we always unbind via namespace\r\n      )\r\n    }\r\n  }\r\n\r\n  /*\r\n  Causes the current object to stop listening to events on the `other` object.\r\n  `eventName` is optional. If omitted, will stop listening to ALL events on `other`.\r\n  */\r\n  stopListeningTo(other, eventName?) {\r\n    other.off((eventName || '') + '.' + this.getListenerNamespace())\r\n  }\r\n\r\n  /*\r\n  Returns a string, unique to this object, to be used for event namespacing\r\n  */\r\n  getListenerNamespace() {\r\n    if (this.listenerId == null) {\r\n      this.listenerId = guid++\r\n    }\r\n    return '_listener' + this.listenerId\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/ListenerMixin.ts","import * as moment from 'moment'\r\nimport * as $ from 'jquery'\r\nimport { isNativeDate } from './util'\r\n\r\n/*\r\nGENERAL NOTE on moments throughout the *entire rest* of the codebase:\r\nAll moments are assumed to be ambiguously-zoned unless otherwise noted,\r\nwith the NOTABLE EXCEOPTION of start/end dates that live on *Event Objects*.\r\nAmbiguously-TIMED moments are assumed to be ambiguously-zoned by nature.\r\n*/\r\n\r\ndeclare module 'moment' {\r\n  interface Moment {\r\n    hasTime(): boolean\r\n    time(): moment.Duration\r\n    stripZone()\r\n    stripTime()\r\n  }\r\n}\r\n\r\nlet ambigDateOfMonthRegex = /^\\s*\\d{4}-\\d\\d$/\r\nlet ambigTimeOrZoneRegex =\r\n  /^\\s*\\d{4}-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?)?$/\r\nlet newMomentProto: any = moment.fn // where we will attach our new methods\r\nlet oldMomentProto = $.extend({}, newMomentProto) // copy of original moment methods\r\n\r\n// tell momentjs to transfer these properties upon clone\r\nlet momentProperties = (moment as any).momentProperties\r\nmomentProperties.push('_fullCalendar')\r\nmomentProperties.push('_ambigTime')\r\nmomentProperties.push('_ambigZone')\r\n\r\n/*\r\nCall this if you want Moment's original format method to be used\r\n*/\r\nfunction oldMomentFormat(mom, formatStr?) {\r\n  return oldMomentProto.format.call(mom, formatStr) // oldMomentProto defined in moment-ext.js\r\n}\r\n\r\nexport { newMomentProto, oldMomentProto, oldMomentFormat }\r\n\r\n\r\n// Creating\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// Creates a new moment, similar to the vanilla moment(...) constructor, but with\r\n// extra features (ambiguous time, enhanced formatting). When given an existing moment,\r\n// it will function as a clone (and retain the zone of the moment). Anything else will\r\n// result in a moment in the local zone.\r\nconst momentExt: any = function() {\r\n  return makeMoment(arguments)\r\n}\r\n\r\nexport default momentExt\r\n\r\n// Sames as momentExt, but forces the resulting moment to be in the UTC timezone.\r\nmomentExt.utc = function() {\r\n  let mom = makeMoment(arguments, true)\r\n\r\n  // Force it into UTC because makeMoment doesn't guarantee it\r\n  // (if given a pre-existing moment for example)\r\n  if (mom.hasTime()) { // don't give ambiguously-timed moments a UTC zone\r\n    mom.utc()\r\n  }\r\n\r\n  return mom\r\n}\r\n\r\n// Same as momentExt, but when given an ISO8601 string, the timezone offset is preserved.\r\n// ISO8601 strings with no timezone offset will become ambiguously zoned.\r\nmomentExt.parseZone = function() {\r\n  return makeMoment(arguments, true, true)\r\n}\r\n\r\n// Builds an enhanced moment from args. When given an existing moment, it clones. When given a\r\n// native Date, or called with no arguments (the current time), the resulting moment will be local.\r\n// Anything else needs to be \"parsed\" (a string or an array), and will be affected by:\r\n//    parseAsUTC - if there is no zone information, should we parse the input in UTC?\r\n//    parseZone - if there is zone information, should we force the zone of the moment?\r\nfunction makeMoment(args, parseAsUTC= false, parseZone= false) {\r\n  let input = args[0]\r\n  let isSingleString = args.length === 1 && typeof input === 'string'\r\n  let isAmbigTime\r\n  let isAmbigZone\r\n  let ambigMatch\r\n  let mom\r\n\r\n  if (moment.isMoment(input) || isNativeDate(input) || input === undefined) {\r\n    mom = moment.apply(null, args)\r\n  } else { // \"parsing\" is required\r\n    isAmbigTime = false\r\n    isAmbigZone = false\r\n\r\n    if (isSingleString) {\r\n      if (ambigDateOfMonthRegex.test(input)) {\r\n        // accept strings like '2014-05', but convert to the first of the month\r\n        input += '-01'\r\n        args = [ input ] // for when we pass it on to moment's constructor\r\n        isAmbigTime = true\r\n        isAmbigZone = true\r\n      } else if ((ambigMatch = ambigTimeOrZoneRegex.exec(input))) {\r\n        isAmbigTime = !ambigMatch[5] // no time part?\r\n        isAmbigZone = true\r\n      }\r\n    } else if ($.isArray(input)) {\r\n      // arrays have no timezone information, so assume ambiguous zone\r\n      isAmbigZone = true\r\n    }\r\n    // otherwise, probably a string with a format\r\n\r\n    if (parseAsUTC || isAmbigTime) {\r\n      mom = moment.utc.apply(moment, args)\r\n    } else {\r\n      mom = moment.apply(null, args)\r\n    }\r\n\r\n    if (isAmbigTime) {\r\n      mom._ambigTime = true\r\n      mom._ambigZone = true // ambiguous time always means ambiguous zone\r\n    } else if (parseZone) { // let's record the inputted zone somehow\r\n      if (isAmbigZone) {\r\n        mom._ambigZone = true\r\n      } else if (isSingleString) {\r\n        mom.utcOffset(input) // if not a valid zone, will assign UTC\r\n      }\r\n    }\r\n  }\r\n\r\n  mom._fullCalendar = true // flag for extended functionality\r\n\r\n  return mom\r\n}\r\n\r\n\r\n// Week Number\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n\r\n// Returns the week number, considering the locale's custom week number calcuation\r\n// `weeks` is an alias for `week`\r\nnewMomentProto.week = newMomentProto.weeks = function(input) {\r\n  let weekCalc = this._locale._fullCalendar_weekCalc\r\n\r\n  if (input == null && typeof weekCalc === 'function') { // custom function only works for getter\r\n    return weekCalc(this)\r\n  } else if (weekCalc === 'ISO') {\r\n    return oldMomentProto.isoWeek.apply(this, arguments) // ISO getter/setter\r\n  }\r\n\r\n  return oldMomentProto.week.apply(this, arguments) // local getter/setter\r\n}\r\n\r\n\r\n// Time-of-day\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// GETTER\r\n// Returns a Duration with the hours/minutes/seconds/ms values of the moment.\r\n// If the moment has an ambiguous time, a duration of 00:00 will be returned.\r\n//\r\n// SETTER\r\n// You can supply a Duration, a Moment, or a Duration-like argument.\r\n// When setting the time, and the moment has an ambiguous time, it then becomes unambiguous.\r\nnewMomentProto.time = function(time) {\r\n\r\n  // Fallback to the original method (if there is one) if this moment wasn't created via FullCalendar.\r\n  // `time` is a generic enough method name where this precaution is necessary to avoid collisions w/ other plugins.\r\n  if (!this._fullCalendar) {\r\n    return oldMomentProto.time.apply(this, arguments)\r\n  }\r\n\r\n  if (time == null) { // getter\r\n    return moment.duration({\r\n      hours: this.hours(),\r\n      minutes: this.minutes(),\r\n      seconds: this.seconds(),\r\n      milliseconds: this.milliseconds()\r\n    })\r\n  } else { // setter\r\n\r\n    this._ambigTime = false // mark that the moment now has a time\r\n\r\n    if (!moment.isDuration(time) && !moment.isMoment(time)) {\r\n      time = moment.duration(time)\r\n    }\r\n\r\n    // The day value should cause overflow (so 24 hours becomes 00:00:00 of next day).\r\n    // Only for Duration times, not Moment times.\r\n    let dayHours = 0\r\n    if (moment.isDuration(time)) {\r\n      dayHours = Math.floor(time.asDays()) * 24\r\n    }\r\n\r\n    // We need to set the individual fields.\r\n    // Can't use startOf('day') then add duration. In case of DST at start of day.\r\n    return this.hours(dayHours + time.hours())\r\n      .minutes(time.minutes())\r\n      .seconds(time.seconds())\r\n      .milliseconds(time.milliseconds())\r\n  }\r\n}\r\n\r\n// Converts the moment to UTC, stripping out its time-of-day and timezone offset,\r\n// but preserving its YMD. A moment with a stripped time will display no time\r\n// nor timezone offset when .format() is called.\r\nnewMomentProto.stripTime = function() {\r\n\r\n  if (!this._ambigTime) {\r\n\r\n    this.utc(true) // keepLocalTime=true (for keeping *date* value)\r\n\r\n    // set time to zero\r\n    this.set({\r\n      hours: 0,\r\n      minutes: 0,\r\n      seconds: 0,\r\n      ms: 0\r\n    })\r\n\r\n    // Mark the time as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\r\n    // which clears all ambig flags.\r\n    this._ambigTime = true\r\n    this._ambigZone = true // if ambiguous time, also ambiguous timezone offset\r\n  }\r\n\r\n  return this // for chaining\r\n}\r\n\r\n// Returns if the moment has a non-ambiguous time (boolean)\r\nnewMomentProto.hasTime = function() {\r\n  return !this._ambigTime\r\n}\r\n\r\n\r\n// Timezone\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n// Converts the moment to UTC, stripping out its timezone offset, but preserving its\r\n// YMD and time-of-day. A moment with a stripped timezone offset will display no\r\n// timezone offset when .format() is called.\r\nnewMomentProto.stripZone = function() {\r\n  let wasAmbigTime\r\n\r\n  if (!this._ambigZone) {\r\n\r\n    wasAmbigTime = this._ambigTime\r\n\r\n    this.utc(true) // keepLocalTime=true (for keeping date and time values)\r\n\r\n    // the above call to .utc()/.utcOffset() unfortunately might clear the ambig flags, so restore\r\n    this._ambigTime = wasAmbigTime || false\r\n\r\n    // Mark the zone as ambiguous. This needs to happen after the .utc() call, which might call .utcOffset(),\r\n    // which clears the ambig flags.\r\n    this._ambigZone = true\r\n  }\r\n\r\n  return this // for chaining\r\n}\r\n\r\n// Returns of the moment has a non-ambiguous timezone offset (boolean)\r\nnewMomentProto.hasZone = function() {\r\n  return !this._ambigZone\r\n}\r\n\r\n\r\n// implicitly marks a zone\r\nnewMomentProto.local = function(keepLocalTime) {\r\n\r\n  // for when converting from ambiguously-zoned to local,\r\n  // keep the time values when converting from UTC -> local\r\n  oldMomentProto.local.call(this, this._ambigZone || keepLocalTime)\r\n\r\n  // ensure non-ambiguous\r\n  // this probably already happened via local() -> utcOffset(), but don't rely on Moment's internals\r\n  this._ambigTime = false\r\n  this._ambigZone = false\r\n\r\n  return this // for chaining\r\n}\r\n\r\n\r\n// implicitly marks a zone\r\nnewMomentProto.utc = function(keepLocalTime) {\r\n\r\n  oldMomentProto.utc.call(this, keepLocalTime)\r\n\r\n  // ensure non-ambiguous\r\n  // this probably already happened via utc() -> utcOffset(), but don't rely on Moment's internals\r\n  this._ambigTime = false\r\n  this._ambigZone = false\r\n\r\n  return this\r\n}\r\n\r\n\r\n// implicitly marks a zone (will probably get called upon .utc() and .local())\r\nnewMomentProto.utcOffset = function(tzo) {\r\n\r\n  if (tzo != null) { // setter\r\n    // these assignments needs to happen before the original zone method is called.\r\n    // I forget why, something to do with a browser crash.\r\n    this._ambigTime = false\r\n    this._ambigZone = false\r\n  }\r\n\r\n  return oldMomentProto.utcOffset.apply(this, arguments)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/moment-ext.ts","/*\r\nUSAGE:\r\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\r\nin class:\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\nafter class:\r\n  EmitterMixin.mixInto(TheClass)\r\n*/\r\n\r\nimport * as $ from 'jquery'\r\nimport Mixin from './Mixin'\r\n\r\nexport interface EmitterInterface {\r\n  on(types, handler)\r\n  one(types, handler)\r\n  off(types, handler)\r\n  trigger(types, ...args)\r\n  triggerWith(types, context, args)\r\n  hasHandlers(type)\r\n}\r\n\r\nexport default class EmitterMixin extends Mixin implements EmitterInterface {\r\n\r\n  // jQuery-ification via $(this) allows a non-DOM object to have\r\n  // the same event handling capabilities (including namespaces).\r\n\r\n\r\n  on(types, handler) {\r\n    $(this).on(types, this._prepareIntercept(handler))\r\n    return this // for chaining\r\n  }\r\n\r\n\r\n  one(types, handler) {\r\n    $(this).one(types, this._prepareIntercept(handler))\r\n    return this // for chaining\r\n  }\r\n\r\n\r\n  _prepareIntercept(handler) {\r\n    // handlers are always called with an \"event\" object as their first param.\r\n    // sneak the `this` context and arguments into the extra parameter object\r\n    // and forward them on to the original handler.\r\n    let intercept = function(ev, extra) {\r\n      return handler.apply(\r\n        extra.context || this,\r\n        extra.args || []\r\n      )\r\n    }\r\n\r\n    // mimick jQuery's internal \"proxy\" system (risky, I know)\r\n    // causing all functions with the same .guid to appear to be the same.\r\n    // https://github.com/jquery/jquery/blob/2.2.4/src/core.js#L448\r\n    // this is needed for calling .off with the original non-intercept handler.\r\n    if (!handler.guid) {\r\n      handler.guid = ($ as any).guid++\r\n    }\r\n    (intercept as any).guid = handler.guid\r\n\r\n    return intercept\r\n  }\r\n\r\n\r\n  off(types, handler) {\r\n    $(this).off(types, handler)\r\n\r\n    return this // for chaining\r\n  }\r\n\r\n\r\n  trigger(types, ...args) {\r\n    // pass in \"extra\" info to the intercept\r\n    $(this).triggerHandler(types, { args: args })\r\n\r\n    return this // for chaining\r\n  }\r\n\r\n\r\n  triggerWith(types, context, args) {\r\n\r\n    // `triggerHandler` is less reliant on the DOM compared to `trigger`.\r\n    // pass in \"extra\" info to the intercept.\r\n    $(this).triggerHandler(types, { context: context, args: args })\r\n\r\n    return this // for chaining\r\n  }\r\n\r\n\r\n  hasHandlers(type) {\r\n    let hash = ($ as any)._data(this, 'events') // http://blog.jquery.com/2012/08/09/jquery-1-8-released/\r\n\r\n    return hash && hash[type] && hash[type].length > 0\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/EmitterMixin.ts","\r\n/*\r\nMeant to be immutable\r\n*/\r\nexport default class ComponentFootprint {\r\n\r\n  unzonedRange: any\r\n  isAllDay: boolean = false // component can choose to ignore this\r\n\r\n\r\n  constructor(unzonedRange, isAllDay) {\r\n    this.unzonedRange = unzonedRange\r\n    this.isAllDay = isAllDay\r\n  }\r\n\r\n\r\n  /*\r\n  Only works for non-open-ended ranges.\r\n  */\r\n  toLegacy(calendar) {\r\n    return {\r\n      start: calendar.msToMoment(this.unzonedRange.startMs, this.isAllDay),\r\n      end: calendar.msToMoment(this.unzonedRange.endMs, this.isAllDay)\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/ComponentFootprint.ts","import EventDef from './EventDef'\r\nimport EventInstance from './EventInstance'\r\nimport EventDateProfile from './EventDateProfile'\r\n\r\n\r\nexport default class SingleEventDef extends EventDef {\r\n\r\n  dateProfile: any\r\n\r\n\r\n  /*\r\n  Will receive start/end params, but will be ignored.\r\n  */\r\n  buildInstances() {\r\n    return [ this.buildInstance() ]\r\n  }\r\n\r\n\r\n  buildInstance() {\r\n    return new EventInstance(\r\n      this, // definition\r\n      this.dateProfile\r\n    )\r\n  }\r\n\r\n\r\n  isAllDay() {\r\n    return this.dateProfile.isAllDay()\r\n  }\r\n\r\n\r\n  clone() {\r\n    let def = super.clone()\r\n\r\n    def.dateProfile = this.dateProfile\r\n\r\n    return def\r\n  }\r\n\r\n\r\n  rezone() {\r\n    let calendar = this.source.calendar\r\n    let dateProfile = this.dateProfile\r\n\r\n    this.dateProfile = new EventDateProfile(\r\n      calendar.moment(dateProfile.start),\r\n      dateProfile.end ? calendar.moment(dateProfile.end) : null,\r\n      calendar\r\n    )\r\n  }\r\n\r\n\r\n  /*\r\n  NOTE: if super-method fails, should still attempt to apply\r\n  */\r\n  applyManualStandardProps(rawProps) {\r\n    let superSuccess = super.applyManualStandardProps(rawProps)\r\n    let dateProfile = EventDateProfile.parse(rawProps, this.source) // returns null on failure\r\n\r\n    if (dateProfile) {\r\n      this.dateProfile = dateProfile\r\n\r\n      // make sure `date` shows up in the legacy event objects as-is\r\n      if (rawProps.date != null) {\r\n        this.miscProps.date = rawProps.date\r\n      }\r\n\r\n      return superSuccess\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n// Parsing\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\nSingleEventDef.defineStandardProps({ // false = manually process\r\n  start: false,\r\n  date: false, // alias for 'start'\r\n  end: false,\r\n  allDay: false\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/SingleEventDef.ts","\r\nexport default class Mixin {\r\n\r\n  static mixInto(destClass) {\r\n    Object.getOwnPropertyNames(this.prototype).forEach((name) => { // copy methods\r\n      if (!destClass.prototype[name]) { // if destination class doesn't already define it\r\n        destClass.prototype[name] = this.prototype[name]\r\n      }\r\n    })\r\n  }\r\n\r\n  /*\r\n  will override existing methods\r\n  TODO: remove! not used anymore\r\n  */\r\n  static mixOver(destClass) {\r\n    Object.getOwnPropertyNames(this.prototype).forEach((name) => { // copy methods\r\n      destClass.prototype[name] = this.prototype[name]\r\n    })\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Mixin.ts","\r\nexport default class Interaction {\r\n\r\n  view: any\r\n  component: any\r\n\r\n\r\n  constructor(component) {\r\n    this.view = component._getView()\r\n    this.component = component\r\n  }\r\n\r\n\r\n  opt(name) {\r\n    return this.view.opt(name)\r\n  }\r\n\r\n\r\n  end() {\r\n    // subclasses can implement\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/Interaction.ts","\r\nexport const version = '0.0.0'\r\n\r\n// When introducing internal API incompatibilities (where fullcalendar plugins would break),\r\n// the minor version of the calendar should be upped (ex: 2.7.2 -> 2.8.0)\r\n// and the below integer should be incremented.\r\nexport const internalApiVersion = 12\r\n\r\nexport {\r\n  BusinessHoursInput,\r\n  EventObjectInput,\r\n  EventOptionsBase,\r\n  OptionsInput\r\n} from './types/input-types'\r\n\r\nexport {\r\n  applyAll,\r\n  debounce,\r\n  isInt,\r\n  htmlEscape,\r\n  cssToStr,\r\n  proxy,\r\n  capitaliseFirstLetter,\r\n  getOuterRect,\r\n  getClientRect,\r\n  getContentRect,\r\n  getScrollbarWidths,\r\n  preventDefault,\r\n  parseFieldSpecs,\r\n  compareByFieldSpecs,\r\n  compareByFieldSpec,\r\n  flexibleCompare,\r\n  computeGreatestUnit,\r\n  divideRangeByDuration,\r\n  divideDurationByDuration,\r\n  multiplyDuration,\r\n  durationHasTime,\r\n  log,\r\n  warn,\r\n  removeExact,\r\n  intersectRects\r\n} from './util'\r\n\r\nexport {\r\n  formatDate,\r\n  formatRange,\r\n  queryMostGranularFormatUnit\r\n} from './date-formatting'\r\n\r\nexport {\r\n  datepickerLocale,\r\n  locale\r\n} from './locale'\r\n\r\nexport { default as moment } from './moment-ext'\r\nexport { default as EmitterMixin, EmitterInterface } from './common/EmitterMixin'\r\nexport { default as ListenerMixin, ListenerInterface } from './common/ListenerMixin'\r\nexport { default as Model } from './common/Model'\r\nexport { default as Constraints } from './Constraints'\r\nexport { default as UnzonedRange } from './models/UnzonedRange'\r\nexport { default as ComponentFootprint } from './models/ComponentFootprint'\r\nexport { default as BusinessHourGenerator } from './models/BusinessHourGenerator'\r\nexport { default as EventDef } from './models/event/EventDef'\r\nexport { default as EventDefMutation } from './models/event/EventDefMutation'\r\nexport { default as EventSourceParser } from './models/event-source/EventSourceParser'\r\nexport { default as EventSource } from './models/event-source/EventSource'\r\nexport { defineThemeSystem } from './theme/ThemeRegistry'\r\nexport { default as EventInstanceGroup } from './models/event/EventInstanceGroup'\r\nexport { default as ArrayEventSource } from './models/event-source/ArrayEventSource'\r\nexport { default as FuncEventSource } from './models/event-source/FuncEventSource'\r\nexport { default as JsonFeedEventSource } from './models/event-source/JsonFeedEventSource'\r\nexport { default as EventFootprint } from './models/event/EventFootprint'\r\nexport { default as Class } from './common/Class'\r\nexport { default as Mixin } from './common/Mixin'\r\nexport { default as CoordCache } from './common/CoordCache'\r\nexport { default as DragListener } from './common/DragListener'\r\nexport { default as Promise } from './common/Promise'\r\nexport { default as TaskQueue } from './common/TaskQueue'\r\nexport { default as RenderQueue } from './common/RenderQueue'\r\nexport { default as Scroller } from './common/Scroller'\r\nexport { default as Theme } from './theme/Theme'\r\nexport { default as DateComponent } from './component/DateComponent'\r\nexport { default as InteractiveDateComponent } from './component/InteractiveDateComponent'\r\nexport { default as Calendar } from './Calendar'\r\nexport { default as View } from './View'\r\nexport { defineView, getViewConfig } from './ViewRegistry'\r\nexport { default as DayTableMixin } from './component/DayTableMixin'\r\nexport { default as BusinessHourRenderer } from './component/renderers/BusinessHourRenderer'\r\nexport { default as EventRenderer } from './component/renderers/EventRenderer'\r\nexport { default as FillRenderer } from './component/renderers/FillRenderer'\r\nexport { default as HelperRenderer } from './component/renderers/HelperRenderer'\r\nexport { default as ExternalDropping } from './component/interactions/ExternalDropping'\r\nexport { default as EventResizing } from './component/interactions/EventResizing'\r\nexport { default as EventPointing } from './component/interactions/EventPointing'\r\nexport { default as EventDragging } from './component/interactions/EventDragging'\r\nexport { default as DateSelecting } from './component/interactions/DateSelecting'\r\nexport { default as StandardInteractionsMixin } from './component/interactions/StandardInteractionsMixin'\r\nexport { default as AgendaView } from './agenda/AgendaView'\r\nexport { default as TimeGrid } from './agenda/TimeGrid'\r\nexport { default as DayGrid } from './basic/DayGrid'\r\nexport { default as BasicView } from './basic/BasicView'\r\nexport { default as MonthView } from './basic/MonthView'\r\nexport { default as ListView } from './list/ListView'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/exports.ts","import UnzonedRange from '../UnzonedRange'\r\n\r\n/*\r\nMeant to be immutable\r\n*/\r\nexport default class EventDateProfile {\r\n\r\n  start: any\r\n  end: any\r\n  unzonedRange: any\r\n\r\n\r\n  constructor(start, end, calendar) {\r\n    this.start = start\r\n    this.end = end || null\r\n    this.unzonedRange = this.buildUnzonedRange(calendar)\r\n  }\r\n\r\n\r\n  /*\r\n  Needs an EventSource object\r\n  */\r\n  static parse(rawProps, source) {\r\n    let startInput = rawProps.start || rawProps.date\r\n    let endInput = rawProps.end\r\n\r\n    if (!startInput) {\r\n      return false\r\n    }\r\n\r\n    let calendar = source.calendar\r\n    let start = calendar.moment(startInput)\r\n    let end = endInput ? calendar.moment(endInput) : null\r\n    let forcedAllDay = rawProps.allDay\r\n    let forceEventDuration = calendar.opt('forceEventDuration')\r\n\r\n    if (!start.isValid()) {\r\n      return false\r\n    }\r\n\r\n    if (end && (!end.isValid() || !end.isAfter(start))) {\r\n      end = null\r\n    }\r\n\r\n    if (forcedAllDay == null) {\r\n      forcedAllDay = source.allDayDefault\r\n      if (forcedAllDay == null) {\r\n        forcedAllDay = calendar.opt('allDayDefault')\r\n      }\r\n    }\r\n\r\n    if (forcedAllDay === true) {\r\n      start.stripTime()\r\n      if (end) {\r\n        end.stripTime()\r\n      }\r\n    } else if (forcedAllDay === false) {\r\n      if (!start.hasTime()) {\r\n        start.time(0)\r\n      }\r\n      if (end && !end.hasTime()) {\r\n        end.time(0)\r\n      }\r\n    }\r\n\r\n    if (!end && forceEventDuration) {\r\n      end = calendar.getDefaultEventEnd(!start.hasTime(), start)\r\n    }\r\n\r\n    return new EventDateProfile(start, end, calendar)\r\n  }\r\n\r\n\r\n  static isStandardProp(propName) {\r\n    return propName === 'start' || propName === 'date' || propName === 'end' || propName === 'allDay'\r\n  }\r\n\r\n\r\n  isAllDay() { // why recompute this every time?\r\n    return !(this.start.hasTime() || (this.end && this.end.hasTime()))\r\n  }\r\n\r\n\r\n  /*\r\n  Needs a Calendar object\r\n  */\r\n  buildUnzonedRange(calendar) {\r\n    let startMs = this.start.clone().stripZone().valueOf()\r\n    let endMs = this.getEnd(calendar).stripZone().valueOf()\r\n\r\n    return new UnzonedRange(startMs, endMs)\r\n  }\r\n\r\n\r\n  /*\r\n  Needs a Calendar object\r\n  */\r\n  getEnd(calendar) {\r\n    return this.end ?\r\n      this.end.clone() :\r\n      // derive the end from the start and allDay. compute allDay if necessary\r\n      calendar.getDefaultEventEnd(\r\n        this.isAllDay(),\r\n        this.start\r\n      )\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventDateProfile.ts","import UnzonedRange from '../UnzonedRange'\r\nimport { eventInstanceToEventRange, eventInstanceToUnzonedRange } from './util'\r\nimport EventRange from './EventRange'\r\n\r\n/*\r\nIt's expected that there will be at least one EventInstance,\r\nOR that an explicitEventDef is assigned.\r\n*/\r\nexport default class EventInstanceGroup {\r\n\r\n  eventInstances: any\r\n  explicitEventDef: any // optional\r\n\r\n\r\n  constructor(eventInstances?) {\r\n    this.eventInstances = eventInstances || []\r\n  }\r\n\r\n\r\n  getAllEventRanges(constraintRange) {\r\n    if (constraintRange) {\r\n      return this.sliceNormalRenderRanges(constraintRange)\r\n    } else {\r\n      return this.eventInstances.map(eventInstanceToEventRange)\r\n    }\r\n  }\r\n\r\n\r\n  sliceRenderRanges(constraintRange) {\r\n    if (this.isInverse()) {\r\n      return this.sliceInverseRenderRanges(constraintRange)\r\n    } else {\r\n      return this.sliceNormalRenderRanges(constraintRange)\r\n    }\r\n  }\r\n\r\n\r\n  sliceNormalRenderRanges(constraintRange) {\r\n    let eventInstances = this.eventInstances\r\n    let i\r\n    let eventInstance\r\n    let slicedRange\r\n    let slicedEventRanges = []\r\n\r\n    for (i = 0; i < eventInstances.length; i++) {\r\n      eventInstance = eventInstances[i]\r\n\r\n      slicedRange = eventInstance.dateProfile.unzonedRange.intersect(constraintRange)\r\n\r\n      if (slicedRange) {\r\n        slicedEventRanges.push(\r\n          new EventRange(\r\n            slicedRange,\r\n            eventInstance.def,\r\n            eventInstance\r\n          )\r\n        )\r\n      }\r\n    }\r\n\r\n    return slicedEventRanges\r\n  }\r\n\r\n\r\n  sliceInverseRenderRanges(constraintRange) {\r\n    let unzonedRanges = this.eventInstances.map(eventInstanceToUnzonedRange)\r\n    let ownerDef = this.getEventDef()\r\n\r\n    unzonedRanges = UnzonedRange.invertRanges(unzonedRanges, constraintRange)\r\n\r\n    return unzonedRanges.map(function(unzonedRange) {\r\n      return new EventRange(unzonedRange, ownerDef) // don't give an EventInstance\r\n    })\r\n  }\r\n\r\n\r\n  isInverse() {\r\n    return this.getEventDef().hasInverseRendering()\r\n  }\r\n\r\n\r\n  getEventDef() {\r\n    return this.explicitEventDef || this.eventInstances[0].def\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventInstanceGroup.ts","import * as $ from 'jquery'\r\n\r\n\r\nexport default class Theme {\r\n\r\n  optionsManager: any\r\n\r\n  // settings. default values are set after the class\r\n  classes: any\r\n  iconClasses: any\r\n  baseIconClass: string\r\n  iconOverrideOption: any\r\n  iconOverrideCustomButtonOption: any\r\n  iconOverridePrefix: string\r\n\r\n\r\n  constructor(optionsManager) {\r\n    this.optionsManager = optionsManager\r\n    this.processIconOverride()\r\n  }\r\n\r\n\r\n  processIconOverride() {\r\n    if (this.iconOverrideOption) {\r\n      this.setIconOverride(\r\n        this.optionsManager.get(this.iconOverrideOption)\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  setIconOverride(iconOverrideHash) {\r\n    let iconClassesCopy\r\n    let buttonName\r\n\r\n    if ($.isPlainObject(iconOverrideHash)) {\r\n      iconClassesCopy = $.extend({}, this.iconClasses)\r\n\r\n      for (buttonName in iconOverrideHash) {\r\n        iconClassesCopy[buttonName] = this.applyIconOverridePrefix(\r\n          iconOverrideHash[buttonName]\r\n        )\r\n      }\r\n\r\n      this.iconClasses = iconClassesCopy\r\n    } else if (iconOverrideHash === false) {\r\n      this.iconClasses = {}\r\n    }\r\n  }\r\n\r\n\r\n  applyIconOverridePrefix(className) {\r\n    let prefix = this.iconOverridePrefix\r\n\r\n    if (prefix && className.indexOf(prefix) !== 0) { // if not already present\r\n      className = prefix + className\r\n    }\r\n\r\n    return className\r\n  }\r\n\r\n\r\n  getClass(key) {\r\n    return this.classes[key] || ''\r\n  }\r\n\r\n\r\n  getIconClass(buttonName) {\r\n    let className = this.iconClasses[buttonName]\r\n\r\n    if (className) {\r\n      return this.baseIconClass + ' ' + className\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n\r\n  getCustomButtonIconClass(customButtonProps) {\r\n    let className\r\n\r\n    if (this.iconOverrideCustomButtonOption) {\r\n      className = customButtonProps[this.iconOverrideCustomButtonOption]\r\n\r\n      if (className) {\r\n        return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className)\r\n      }\r\n    }\r\n\r\n    return ''\r\n  }\r\n\r\n}\r\n\r\nTheme.prototype.classes = {}\r\nTheme.prototype.iconClasses = {}\r\nTheme.prototype.baseIconClass = ''\r\nTheme.prototype.iconOverridePrefix = ''\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/Theme.ts","import * as $ from 'jquery'\r\n\r\n\r\nconst PromiseStub = {\r\n\r\n  construct: function(executor) {\r\n    let deferred = $.Deferred()\r\n    let promise = deferred.promise()\r\n\r\n    if (typeof executor === 'function') {\r\n      executor(\r\n        function(val) { // resolve\r\n          deferred.resolve(val)\r\n          attachImmediatelyResolvingThen(promise, val)\r\n        },\r\n        function() { // reject\r\n          deferred.reject()\r\n          attachImmediatelyRejectingThen(promise)\r\n        }\r\n      )\r\n    }\r\n\r\n    return promise\r\n  },\r\n\r\n  resolve: function(val) {\r\n    let deferred = $.Deferred().resolve(val)\r\n    let promise = deferred.promise()\r\n\r\n    attachImmediatelyResolvingThen(promise, val)\r\n\r\n    return promise\r\n  },\r\n\r\n  reject: function() {\r\n    let deferred = $.Deferred().reject()\r\n    let promise = deferred.promise()\r\n\r\n    attachImmediatelyRejectingThen(promise)\r\n\r\n    return promise\r\n  }\r\n\r\n}\r\n\r\nexport default PromiseStub\r\n\r\n\r\nfunction attachImmediatelyResolvingThen(promise, val) {\r\n  promise.then = function(onResolve) {\r\n    if (typeof onResolve === 'function') {\r\n      return PromiseStub.resolve(onResolve(val))\r\n    }\r\n    return promise\r\n  }\r\n}\r\n\r\n\r\nfunction attachImmediatelyRejectingThen(promise) {\r\n  promise.then = function(onResolve, onReject) {\r\n    if (typeof onReject === 'function') {\r\n      onReject()\r\n    }\r\n    return promise\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Promise.ts","import * as $ from 'jquery'\r\nimport * as exportHooks from '../exports'\r\nimport { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\r\nimport { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\n\r\n(exportHooks as any).touchMouseIgnoreWait = 500\r\n\r\nlet globalEmitter = null\r\nlet neededCount = 0\r\n\r\n/*\r\nListens to document and window-level user-interaction events, like touch events and mouse events,\r\nand fires these events as-is to whoever is observing a GlobalEmitter.\r\nBest when used as a singleton via GlobalEmitter.get()\r\n\r\nNormalizes mouse/touch events. For examples:\r\n- ignores the the simulated mouse events that happen after a quick tap: mousemove+mousedown+mouseup+click\r\n- compensates for various buggy scenarios where a touchend does not fire\r\n*/\r\nexport default class GlobalEmitter {\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  isTouching: boolean = false\r\n  mouseIgnoreDepth: number = 0\r\n  handleScrollProxy: (ev: Event) => void\r\n  handleTouchMoveProxy: (ev: Event) => void\r\n\r\n\r\n  // gets the singleton\r\n  static get() {\r\n    if (!globalEmitter) {\r\n      globalEmitter = new GlobalEmitter()\r\n      globalEmitter.bind()\r\n    }\r\n\r\n    return globalEmitter\r\n  }\r\n\r\n\r\n  // called when an object knows it will need a GlobalEmitter in the near future.\r\n  static needed() {\r\n    GlobalEmitter.get() // ensures globalEmitter\r\n    neededCount++\r\n  }\r\n\r\n\r\n  // called when the object that originally called needed() doesn't need a GlobalEmitter anymore.\r\n  static unneeded() {\r\n    neededCount--\r\n\r\n    if (!neededCount) { // nobody else needs it\r\n      globalEmitter.unbind()\r\n      globalEmitter = null\r\n    }\r\n  }\r\n\r\n\r\n  bind() {\r\n    this.listenTo($(document), {\r\n      touchstart: this.handleTouchStart,\r\n      touchcancel: this.handleTouchCancel,\r\n      touchend: this.handleTouchEnd,\r\n      mousedown: this.handleMouseDown,\r\n      mousemove: this.handleMouseMove,\r\n      mouseup: this.handleMouseUp,\r\n      click: this.handleClick,\r\n      selectstart: this.handleSelectStart,\r\n      contextmenu: this.handleContextMenu\r\n    })\r\n\r\n    // because we need to call preventDefault\r\n    // because https://www.chromestatus.com/features/5093566007214080\r\n    // TODO: investigate performance because this is a global handler\r\n    window.addEventListener(\r\n      'touchmove',\r\n      this.handleTouchMoveProxy = (ev) => {\r\n        this.handleTouchMove($.Event(ev as any))\r\n      },\r\n      { passive: false } as any // allows preventDefault()\r\n    )\r\n\r\n    // attach a handler to get called when ANY scroll action happens on the page.\r\n    // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\r\n    // http://stackoverflow.com/a/32954565/96342\r\n    window.addEventListener(\r\n      'scroll',\r\n      this.handleScrollProxy = (ev) => {\r\n        this.handleScroll($.Event(ev as any))\r\n      },\r\n      true // useCapture\r\n    )\r\n  }\r\n\r\n  unbind() {\r\n    this.stopListeningTo($(document))\r\n\r\n    window.removeEventListener(\r\n      'touchmove',\r\n      this.handleTouchMoveProxy\r\n    )\r\n\r\n    window.removeEventListener(\r\n      'scroll',\r\n      this.handleScrollProxy,\r\n      true // useCapture\r\n    )\r\n  }\r\n\r\n\r\n  // Touch Handlers\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n  handleTouchStart(ev) {\r\n\r\n    // if a previous touch interaction never ended with a touchend, then implicitly end it,\r\n    // but since a new touch interaction is about to begin, don't start the mouse ignore period.\r\n    this.stopTouch(ev, true) // skipMouseIgnore=true\r\n\r\n    this.isTouching = true\r\n    this.trigger('touchstart', ev)\r\n  }\r\n\r\n  handleTouchMove(ev) {\r\n    if (this.isTouching) {\r\n      this.trigger('touchmove', ev)\r\n    }\r\n  }\r\n\r\n  handleTouchCancel(ev) {\r\n    if (this.isTouching) {\r\n      this.trigger('touchcancel', ev)\r\n\r\n      // Have touchcancel fire an artificial touchend. That way, handlers won't need to listen to both.\r\n      // If touchend fires later, it won't have any effect b/c isTouching will be false.\r\n      this.stopTouch(ev)\r\n    }\r\n  }\r\n\r\n  handleTouchEnd(ev) {\r\n    this.stopTouch(ev)\r\n  }\r\n\r\n\r\n  // Mouse Handlers\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n  handleMouseDown(ev) {\r\n    if (!this.shouldIgnoreMouse()) {\r\n      this.trigger('mousedown', ev)\r\n    }\r\n  }\r\n\r\n  handleMouseMove(ev) {\r\n    if (!this.shouldIgnoreMouse()) {\r\n      this.trigger('mousemove', ev)\r\n    }\r\n  }\r\n\r\n  handleMouseUp(ev) {\r\n    if (!this.shouldIgnoreMouse()) {\r\n      this.trigger('mouseup', ev)\r\n    }\r\n  }\r\n\r\n  handleClick(ev) {\r\n    if (!this.shouldIgnoreMouse()) {\r\n      this.trigger('click', ev)\r\n    }\r\n  }\r\n\r\n\r\n  // Misc Handlers\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n  handleSelectStart(ev) {\r\n    this.trigger('selectstart', ev)\r\n  }\r\n\r\n  handleContextMenu(ev) {\r\n    this.trigger('contextmenu', ev)\r\n  }\r\n\r\n  handleScroll(ev) {\r\n    this.trigger('scroll', ev)\r\n  }\r\n\r\n\r\n  // Utils\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n  stopTouch(ev, skipMouseIgnore= false) {\r\n    if (this.isTouching) {\r\n      this.isTouching = false\r\n      this.trigger('touchend', ev)\r\n\r\n      if (!skipMouseIgnore) {\r\n        this.startTouchMouseIgnore()\r\n      }\r\n    }\r\n  }\r\n\r\n  startTouchMouseIgnore() {\r\n    let wait = (exportHooks as any).touchMouseIgnoreWait\r\n\r\n    if (wait) {\r\n      this.mouseIgnoreDepth++\r\n      setTimeout(() => {\r\n        this.mouseIgnoreDepth--\r\n      }, wait)\r\n    }\r\n  }\r\n\r\n  shouldIgnoreMouse() {\r\n    return this.isTouching || Boolean(this.mouseIgnoreDepth)\r\n  }\r\n\r\n}\r\n\r\nListenerMixin.mixInto(GlobalEmitter)\r\nEmitterMixin.mixInto(GlobalEmitter)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/GlobalEmitter.ts","import * as exportHooks from './exports'\r\n\r\n\r\nexport const viewHash = {};\r\n(exportHooks as any).views = viewHash\r\n\r\n\r\nexport function defineView(viewName, viewConfig) {\r\n  viewHash[viewName] = viewConfig\r\n}\r\n\r\n\r\nexport function getViewConfig(viewName) {\r\n  return viewHash[viewName]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ViewRegistry.ts","import {\r\n  getEvX,\r\n  getEvY,\r\n  getOuterRect,\r\n  constrainPoint,\r\n  intersectRects,\r\n  getRectCenter,\r\n  diffPoints\r\n} from '../util'\r\nimport DragListener from './DragListener'\r\n\r\n\r\n/* Tracks mouse movements over a component and raises events about which hit the mouse is over.\r\n------------------------------------------------------------------------------------------------------------------------\r\noptions:\r\n- subjectEl\r\n- subjectCenter\r\n*/\r\n\r\nexport default class HitDragListener extends DragListener {\r\n\r\n  component: any // converts coordinates to hits\r\n    // methods: hitsNeeded, hitsNotNeeded, queryHit\r\n\r\n  origHit: any // the hit the mouse was over when listening started\r\n  hit: any // the hit the mouse is over\r\n  coordAdjust: any // delta that will be added to the mouse coordinates when computing collisions\r\n\r\n\r\n  constructor(component, options) {\r\n    super(options)\r\n    this.component = component\r\n  }\r\n\r\n  // Called when drag listening starts (but a real drag has not necessarily began).\r\n  // ev might be undefined if dragging was started manually.\r\n  handleInteractionStart(ev) {\r\n    let subjectEl = this.subjectEl\r\n    let subjectRect\r\n    let origPoint\r\n    let point\r\n\r\n    this.component.hitsNeeded()\r\n    this.computeScrollBounds() // for autoscroll\r\n\r\n    if (ev) {\r\n      origPoint = { left: getEvX(ev), top: getEvY(ev) }\r\n      point = origPoint\r\n\r\n      // constrain the point to bounds of the element being dragged\r\n      if (subjectEl) {\r\n        subjectRect = getOuterRect(subjectEl) // used for centering as well\r\n        point = constrainPoint(point, subjectRect)\r\n      }\r\n\r\n      this.origHit = this.queryHit(point.left, point.top)\r\n\r\n      // treat the center of the subject as the collision point?\r\n      if (subjectEl && this.options.subjectCenter) {\r\n\r\n        // only consider the area the subject overlaps the hit. best for large subjects.\r\n        // TODO: skip this if hit didn't supply left/right/top/bottom\r\n        if (this.origHit) {\r\n          subjectRect = intersectRects(this.origHit, subjectRect) ||\r\n            subjectRect // in case there is no intersection\r\n        }\r\n\r\n        point = getRectCenter(subjectRect)\r\n      }\r\n\r\n      this.coordAdjust = diffPoints(point, origPoint) // point - origPoint\r\n    } else {\r\n      this.origHit = null\r\n      this.coordAdjust = null\r\n    }\r\n\r\n    // call the super-method. do it after origHit has been computed\r\n    super.handleInteractionStart(ev)\r\n  }\r\n\r\n\r\n  // Called when the actual drag has started\r\n  handleDragStart(ev) {\r\n    let hit\r\n\r\n    super.handleDragStart(ev)\r\n\r\n    // might be different from this.origHit if the min-distance is large\r\n    hit = this.queryHit(getEvX(ev), getEvY(ev))\r\n\r\n    // report the initial hit the mouse is over\r\n    // especially important if no min-distance and drag starts immediately\r\n    if (hit) {\r\n      this.handleHitOver(hit)\r\n    }\r\n  }\r\n\r\n\r\n  // Called when the drag moves\r\n  handleDrag(dx, dy, ev) {\r\n    let hit\r\n\r\n    super.handleDrag(dx, dy, ev)\r\n\r\n    hit = this.queryHit(getEvX(ev), getEvY(ev))\r\n\r\n    if (!isHitsEqual(hit, this.hit)) { // a different hit than before?\r\n      if (this.hit) {\r\n        this.handleHitOut()\r\n      }\r\n      if (hit) {\r\n        this.handleHitOver(hit)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Called when dragging has been stopped\r\n  handleDragEnd(ev) {\r\n    this.handleHitDone()\r\n    super.handleDragEnd(ev)\r\n  }\r\n\r\n\r\n  // Called when a the mouse has just moved over a new hit\r\n  handleHitOver(hit) {\r\n    let isOrig = isHitsEqual(hit, this.origHit)\r\n\r\n    this.hit = hit\r\n\r\n    this.trigger('hitOver', this.hit, isOrig, this.origHit)\r\n  }\r\n\r\n\r\n  // Called when the mouse has just moved out of a hit\r\n  handleHitOut() {\r\n    if (this.hit) {\r\n      this.trigger('hitOut', this.hit)\r\n      this.handleHitDone()\r\n      this.hit = null\r\n    }\r\n  }\r\n\r\n\r\n  // Called after a hitOut. Also called before a dragStop\r\n  handleHitDone() {\r\n    if (this.hit) {\r\n      this.trigger('hitDone', this.hit)\r\n    }\r\n  }\r\n\r\n\r\n  // Called when the interaction ends, whether there was a real drag or not\r\n  handleInteractionEnd(ev, isCancelled) {\r\n    super.handleInteractionEnd(ev, isCancelled)\r\n\r\n    this.origHit = null\r\n    this.hit = null\r\n\r\n    this.component.hitsNotNeeded()\r\n  }\r\n\r\n\r\n  // Called when scrolling has stopped, whether through auto scroll, or the user scrolling\r\n  handleScrollEnd() {\r\n    super.handleScrollEnd()\r\n\r\n    // hits' absolute positions will be in new places after a user's scroll.\r\n    // HACK for recomputing.\r\n    if (this.isDragging) {\r\n      this.component.releaseHits()\r\n      this.component.prepareHits()\r\n    }\r\n  }\r\n\r\n\r\n  // Gets the hit underneath the coordinates for the given mouse event\r\n  queryHit(left, top) {\r\n\r\n    if (this.coordAdjust) {\r\n      left += this.coordAdjust.left\r\n      top += this.coordAdjust.top\r\n    }\r\n\r\n    return this.component.queryHit(left, top)\r\n  }\r\n\r\n}\r\n\r\n\r\n// Returns `true` if the hits are identically equal. `false` otherwise. Must be from the same component.\r\n// Two null values will be considered equal, as two \"out of the component\" states are the same.\r\nfunction isHitsEqual(hit0, hit1) {\r\n\r\n  if (!hit0 && !hit1) {\r\n    return true\r\n  }\r\n\r\n  if (hit0 && hit1) {\r\n    return hit0.component === hit1.component &&\r\n      isHitPropsWithin(hit0, hit1) &&\r\n      isHitPropsWithin(hit1, hit0) // ensures all props are identical\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n\r\n// Returns true if all of subHit's non-standard properties are within superHit\r\nfunction isHitPropsWithin(subHit, superHit) {\r\n  for (let propName in subHit) {\r\n    if (!/^(component|left|right|top|bottom)$/.test(propName)) {\r\n      if (subHit[propName] !== superHit[propName]) {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n  return true\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/HitDragListener.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport * as exportHooks from './exports'\r\nimport { mergeOptions, globalDefaults, englishDefaults } from './options'\r\nimport { stripHtmlEntities } from './util'\r\n\r\nexport const localeOptionHash = {};\r\n(exportHooks as any).locales = localeOptionHash\r\n\r\n\r\n// NOTE: can't guarantee any of these computations will run because not every locale has datepicker\r\n// configs, so make sure there are English fallbacks for these in the defaults file.\r\nconst dpComputableOptions = {\r\n\r\n  buttonText: function(dpOptions) {\r\n    return {\r\n      // the translations sometimes wrongly contain HTML entities\r\n      prev: stripHtmlEntities(dpOptions.prevText),\r\n      next: stripHtmlEntities(dpOptions.nextText),\r\n      today: stripHtmlEntities(dpOptions.currentText)\r\n    }\r\n  },\r\n\r\n  // Produces format strings like \"MMMM YYYY\" -> \"September 2014\"\r\n  monthYearFormat: function(dpOptions) {\r\n    return dpOptions.showMonthAfterYear ?\r\n      'YYYY[' + dpOptions.yearSuffix + '] MMMM' :\r\n      'MMMM YYYY[' + dpOptions.yearSuffix + ']'\r\n  }\r\n\r\n}\r\n\r\n\r\nconst momComputableOptions = {\r\n\r\n  // Produces format strings like \"ddd M/D\" -> \"Fri 9/15\"\r\n  dayOfMonthFormat: function(momOptions, fcOptions) {\r\n    let format = momOptions.longDateFormat('l') // for the format like \"M/D/YYYY\"\r\n\r\n    // strip the year off the edge, as well as other misc non-whitespace chars\r\n    format = format.replace(/^Y+[^\\w\\s]*|[^\\w\\s]*Y+$/g, '')\r\n\r\n    if (fcOptions.isRTL) {\r\n      format += ' ddd' // for RTL, add day-of-week to end\r\n    } else {\r\n      format = 'ddd ' + format // for LTR, add day-of-week to beginning\r\n    }\r\n    return format\r\n  },\r\n\r\n  // Produces format strings like \"h:mma\" -> \"6:00pm\"\r\n  mediumTimeFormat: function(momOptions) { // can't be called `timeFormat` because collides with option\r\n    return momOptions.longDateFormat('LT')\r\n      .replace(/\\s*a$/i, 'a') // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n  },\r\n\r\n  // Produces format strings like \"h(:mm)a\" -> \"6pm\" / \"6:30pm\"\r\n  smallTimeFormat: function(momOptions) {\r\n    return momOptions.longDateFormat('LT')\r\n      .replace(':mm', '(:mm)')\r\n      .replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\r\n      .replace(/\\s*a$/i, 'a') // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n  },\r\n\r\n  // Produces format strings like \"h(:mm)t\" -> \"6p\" / \"6:30p\"\r\n  extraSmallTimeFormat: function(momOptions) {\r\n    return momOptions.longDateFormat('LT')\r\n      .replace(':mm', '(:mm)')\r\n      .replace(/(\\Wmm)$/, '($1)') // like above, but for foreign locales\r\n      .replace(/\\s*a$/i, 't') // convert to AM/PM/am/pm to lowercase one-letter. remove any spaces beforehand\r\n  },\r\n\r\n  // Produces format strings like \"ha\" / \"H\" -> \"6pm\" / \"18\"\r\n  hourFormat: function(momOptions) {\r\n    return momOptions.longDateFormat('LT')\r\n      .replace(':mm', '')\r\n      .replace(/(\\Wmm)$/, '') // like above, but for foreign locales\r\n      .replace(/\\s*a$/i, 'a') // convert AM/PM/am/pm to lowercase. remove any spaces beforehand\r\n  },\r\n\r\n  // Produces format strings like \"h:mm\" -> \"6:30\" (with no AM/PM)\r\n  noMeridiemTimeFormat: function(momOptions) {\r\n    return momOptions.longDateFormat('LT')\r\n      .replace(/\\s*a$/i, '') // remove trailing AM/PM\r\n  }\r\n\r\n}\r\n\r\n\r\n// options that should be computed off live calendar options (considers override options)\r\n// TODO: best place for this? related to locale?\r\n// TODO: flipping text based on isRTL is a bad idea because the CSS `direction` might want to handle it\r\nconst instanceComputableOptions = {\r\n\r\n  // Produces format strings for results like \"Mo 16\"\r\n  smallDayDateFormat: function(options) {\r\n    return options.isRTL ?\r\n      'D dd' :\r\n      'dd D'\r\n  },\r\n\r\n  // Produces format strings for results like \"Wk 5\"\r\n  weekFormat: function(options) {\r\n    return options.isRTL ?\r\n      'w[ ' + options.weekNumberTitle + ']' :\r\n      '[' + options.weekNumberTitle + ' ]w'\r\n  },\r\n\r\n  // Produces format strings for results like \"Wk5\"\r\n  smallWeekFormat: function(options) {\r\n    return options.isRTL ?\r\n      'w[' + options.weekNumberTitle + ']' :\r\n      '[' + options.weekNumberTitle + ']w'\r\n  }\r\n\r\n}\r\n\r\n\r\n// TODO: make these computable properties in optionsManager\r\nexport function populateInstanceComputableOptions(options) {\r\n  $.each(instanceComputableOptions, function(name, func) {\r\n    if (options[name] == null) {\r\n      options[name] = func(options)\r\n    }\r\n  })\r\n}\r\n\r\n\r\n// Initialize jQuery UI datepicker translations while using some of the translations\r\n// Will set this as the default locales for datepicker.\r\nexport function datepickerLocale(localeCode, dpLocaleCode, dpOptions) {\r\n\r\n  // get the FullCalendar internal option hash for this locale. create if necessary\r\n  let fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {})\r\n\r\n  // transfer some simple options from datepicker to fc\r\n  fcOptions.isRTL = dpOptions.isRTL\r\n  fcOptions.weekNumberTitle = dpOptions.weekHeader\r\n\r\n  // compute some more complex options from datepicker\r\n  $.each(dpComputableOptions, function(name, func) {\r\n    fcOptions[name] = func(dpOptions)\r\n  })\r\n\r\n  let jqDatePicker = ($ as any).datepicker\r\n\r\n  // is jQuery UI Datepicker is on the page?\r\n  if (jqDatePicker) {\r\n\r\n    // Register the locale data.\r\n    // FullCalendar and MomentJS use locale codes like \"pt-br\" but Datepicker\r\n    // does it like \"pt-BR\" or if it doesn't have the locale, maybe just \"pt\".\r\n    // Make an alias so the locale can be referenced either way.\r\n    jqDatePicker.regional[dpLocaleCode] =\r\n      jqDatePicker.regional[localeCode] = // alias\r\n        dpOptions\r\n\r\n    // Alias 'en' to the default locale data. Do this every time.\r\n    jqDatePicker.regional.en = jqDatePicker.regional['']\r\n\r\n    // Set as Datepicker's global defaults.\r\n    jqDatePicker.setDefaults(dpOptions)\r\n  }\r\n}\r\n\r\n\r\n// Sets FullCalendar-specific translations. Will set the locales as the global default.\r\nexport function locale(localeCode, newFcOptions) {\r\n  let fcOptions\r\n  let momOptions\r\n\r\n  // get the FullCalendar internal option hash for this locale. create if necessary\r\n  fcOptions = localeOptionHash[localeCode] || (localeOptionHash[localeCode] = {})\r\n\r\n  // provided new options for this locales? merge them in\r\n  if (newFcOptions) {\r\n    fcOptions = localeOptionHash[localeCode] = mergeOptions([ fcOptions, newFcOptions ])\r\n  }\r\n\r\n  // compute locale options that weren't defined.\r\n  // always do this. newFcOptions can be undefined when initializing from i18n file,\r\n  // so no way to tell if this is an initialization or a default-setting.\r\n  momOptions = getMomentLocaleData(localeCode) // will fall back to en\r\n  $.each(momComputableOptions, function(name, func) {\r\n    if (fcOptions[name] == null) {\r\n      fcOptions[name] = (func)(momOptions, fcOptions)\r\n    }\r\n  })\r\n\r\n  // set it as the default locale for FullCalendar\r\n  globalDefaults.locale = localeCode\r\n}\r\n\r\n\r\n// Returns moment's internal locale data. If doesn't exist, returns English.\r\nexport function getMomentLocaleData(localeCode) {\r\n  return moment.localeData(localeCode) || moment.localeData('en')\r\n}\r\n\r\n\r\n// Initialize English by forcing computation of moment-derived options.\r\n// Also, sets it as the default.\r\nlocale('en', englishDefaults)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/locale.ts","import { mergeProps } from './util'\nwindow['isMobile'] = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.userAgent)\nexport const globalDefaults = {\n\n  titleRangeSeparator: ' \\u2013 ', // en dash\n  monthYearFormat: 'MMMM YYYY', // required for en. other locales rely on datepicker computable option\n\n  defaultTimedEventDuration: '02:00:00',\n  defaultAllDayEventDuration: { days: 1 },\n  forceEventDuration: false,\n  nextDayThreshold: '09:00:00', // 9am\n\n  // display\n  columnHeader: true,\n  defaultView: 'month',\n  aspectRatio: 1.35,\n  header: {\n    left: window['isMobile'] ? 'title' : 'prev,next today',\n    center: window['isMobile'] ? 'prev,next' : 'title',\n    right: window['isMobile'] ? 'month,agendaWeek,agendaDay,listDay today' : 'month,agendaWeek,agendaDay,listDay'\n  },\n  weekends: true,\n  weekNumbers: false,\n\n  weekNumberTitle: 'W',\n  weekNumberCalculation: 'local',\n\n  // editable: false,\n\n  // nowIndicator: false,\n\n  scrollTime: '06:00:00',\n  minTime: '00:00:00',\n  maxTime: '24:00:00',\n  showNonCurrentDates: true,\n\n  // event ajax\n  lazyFetching: true,\n  startParam: 'start',\n  endParam: 'end',\n  timezoneParam: 'timezone',\n\n  timezone: false,\n\n  // allDayDefault: undefined,\n\n  // locale\n  locale: null,\n  isRTL: false,\n  buttonText: {\n    prev: 'prev',\n    next: 'next',\n    prevYear: 'prev year',\n    nextYear: 'next year',\n    year: 'year', // TODO: locale files need to specify this\n    today: 'today',\n    month: 'month',\n    week: 'week',\n    day: 'day'\n  },\n  // buttonIcons: null,\n\n  allDayText: 'all-day',\n\n  // allows setting a min-height to the event segment to prevent short events overlapping each other\n  agendaEventMinHeight: 0,\n\n  // jquery-ui theming\n  theme: false,\n  // themeButtonIcons: null,\n\n  // eventResizableFromStart: false,\n  dragOpacity: .75,\n  dragRevertDuration: 500,\n  dragScroll: true,\n\n  // selectable: false,\n  unselectAuto: true,\n  // selectMinDistance: 0,\n\n  dropAccept: '*',\n\n  eventOrder: 'title',\n  // eventRenderWait: null,\n\n  eventLimit: true,\n  eventLimitText: 'more',\n  eventLimitClick: 'popover',\n  dayPopoverFormat: 'LL',\n\n  handleWindowResize: true,\n  windowResizeDelay: 100, // milliseconds before an updateSize happens\n\n  longPressDelay: 1000\n\n}\n\n\nexport const englishDefaults = { // used by locale.js\n  dayPopoverFormat: 'dddd, MMMM D'\n}\n\n\nexport const rtlDefaults = { // right-to-left defaults\n  header: { // TODO: smarter solution (first/center/last ?)\n    left: 'next,prev today',\n    center: '',\n    right: 'title'\n  },\n  buttonIcons: {\n    prev: 'right-single-arrow',\n    next: 'left-single-arrow',\n    prevYear: 'right-double-arrow',\n    nextYear: 'left-double-arrow'\n  },\n  themeButtonIcons: {\n    prev: 'circle-triangle-e',\n    next: 'circle-triangle-w',\n    nextYear: 'seek-prev',\n    prevYear: 'seek-next'\n  }\n}\n\n\nlet complexOptions = [ // names of options that are objects whose properties should be combined\n  'header',\n  'footer',\n  'buttonText',\n  'buttonIcons',\n  'themeButtonIcons'\n]\n\n\n// Merges an array of option objects into a single object\nexport function mergeOptions(optionObjs) {\n  return mergeProps(optionObjs, complexOptions)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/options.ts","import { copyOwnProps } from '../util'\r\n\r\n\r\n// Class that all other classes will inherit from\r\nexport default class Class {\r\n\r\n  // Called on a class to create a subclass.\r\n  // LIMITATION: cannot provide a constructor!\r\n  static extend(members): any {\r\n    class SubClass extends this {}\r\n\r\n    copyOwnProps(members, SubClass.prototype)\r\n\r\n    return SubClass\r\n  }\r\n\r\n\r\n  // Adds new member variables/methods to the class's prototype.\r\n  // Can be called with another class, or a plain object hash containing new members.\r\n  static mixin(members) {\r\n    copyOwnProps(members, this.prototype)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Class.ts","import * as $ from 'jquery'\r\nimport {\r\n  default as ParsableModelMixin,\r\n  ParsableModelInterface\r\n} from '../../common/ParsableModelMixin'\r\n\r\n\r\nexport default abstract class EventDef {\r\n\r\n  static uuid: number = 0\r\n  static defineStandardProps = ParsableModelMixin.defineStandardProps\r\n  static copyVerbatimStandardProps = ParsableModelMixin.copyVerbatimStandardProps\r\n\r\n  applyProps: ParsableModelInterface['applyProps']\r\n  isStandardProp: ParsableModelInterface['isStandardProp']\r\n\r\n  source: any // required\r\n\r\n  id: any // normalized supplied ID\r\n  rawId: any // unnormalized supplied ID\r\n  uid: any // internal ID. new ID for every definition\r\n\r\n  // NOTE: eventOrder sorting relies on these\r\n  title: any\r\n  url: any\r\n  rendering: any\r\n  constraint: any\r\n  overlap: any\r\n  editable: any\r\n  startEditable: any\r\n  durationEditable: any\r\n  color: any\r\n  backgroundColor: any\r\n  borderColor: any\r\n  textColor: any\r\n\r\n  className: any // an array. TODO: rename to className*s* (API breakage)\r\n  miscProps: any\r\n\r\n\r\n  constructor(source) {\r\n    this.source = source\r\n    this.className = []\r\n    this.miscProps = {}\r\n  }\r\n\r\n\r\n  static parse(rawInput, source) {\r\n    let def = new (this as any)(source)\r\n\r\n    if (def.applyProps(rawInput)) {\r\n      return def\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  static normalizeId(id) { // TODO: converge with EventSource\r\n    return String(id)\r\n  }\r\n\r\n\r\n  static generateId() {\r\n    return '_fc' + (EventDef.uuid++)\r\n  }\r\n\r\n\r\n  abstract isAllDay() // subclasses must implement\r\n\r\n  abstract buildInstances(unzonedRange) // subclasses must implement\r\n\r\n\r\n  clone() {\r\n    let copy = new (this.constructor as any)(this.source)\r\n\r\n    copy.id = this.id\r\n    copy.rawId = this.rawId\r\n    copy.uid = this.uid // not really unique anymore :(\r\n\r\n    EventDef.copyVerbatimStandardProps(this, copy)\r\n\r\n    copy.className = this.className.slice() // copy\r\n    copy.miscProps = $.extend({}, this.miscProps)\r\n\r\n    return copy\r\n  }\r\n\r\n\r\n  hasInverseRendering() {\r\n    return this.getRendering() === 'inverse-background'\r\n  }\r\n\r\n\r\n  hasBgRendering() {\r\n    let rendering = this.getRendering()\r\n\r\n    return rendering === 'inverse-background' || rendering === 'background'\r\n  }\r\n\r\n\r\n  getRendering() {\r\n    if (this.rendering != null) {\r\n      return this.rendering\r\n    }\r\n\r\n    return this.source.rendering\r\n  }\r\n\r\n\r\n  getConstraint() {\r\n    if (this.constraint != null) {\r\n      return this.constraint\r\n    }\r\n\r\n    if (this.source.constraint != null) {\r\n      return this.source.constraint\r\n    }\r\n\r\n    return this.source.calendar.opt('eventConstraint') // what about View option?\r\n  }\r\n\r\n\r\n  getOverlap() {\r\n    if (this.overlap != null) {\r\n      return this.overlap\r\n    }\r\n\r\n    if (this.source.overlap != null) {\r\n      return this.source.overlap\r\n    }\r\n\r\n    return this.source.calendar.opt('eventOverlap') // what about View option?\r\n  }\r\n\r\n\r\n  isStartExplicitlyEditable() {\r\n    if (this.startEditable != null) {\r\n      return this.startEditable\r\n    }\r\n\r\n    return this.source.startEditable\r\n  }\r\n\r\n\r\n  isDurationExplicitlyEditable() {\r\n    if (this.durationEditable != null) {\r\n      return this.durationEditable\r\n    }\r\n\r\n    return this.source.durationEditable\r\n  }\r\n\r\n\r\n  isExplicitlyEditable() {\r\n    if (this.editable != null) {\r\n      return this.editable\r\n    }\r\n\r\n    return this.source.editable\r\n  }\r\n\r\n\r\n  toLegacy() {\r\n    let obj = $.extend({}, this.miscProps)\r\n\r\n    obj._id = this.uid\r\n    obj.source = this.source\r\n    obj.className = this.className.slice() // copy\r\n    obj.allDay = this.isAllDay()\r\n\r\n    if (this.rawId != null) {\r\n      obj.id = this.rawId\r\n    }\r\n\r\n    EventDef.copyVerbatimStandardProps(this, obj)\r\n\r\n    return obj\r\n  }\r\n\r\n\r\n  applyManualStandardProps(rawProps) {\r\n\r\n    if (rawProps.id != null) {\r\n      this.id = EventDef.normalizeId((this.rawId = rawProps.id))\r\n    } else {\r\n      this.id = EventDef.generateId()\r\n    }\r\n\r\n    if (rawProps._id != null) { // accept this prop, even tho somewhat internal\r\n      this.uid = String(rawProps._id)\r\n    } else {\r\n      this.uid = EventDef.generateId()\r\n    }\r\n\r\n    // TODO: converge with EventSource\r\n    if ($.isArray(rawProps.className)) {\r\n      this.className = rawProps.className\r\n    }\r\n    if (typeof rawProps.className === 'string') {\r\n      this.className = rawProps.className.split(/\\s+/)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n\r\n  applyMiscProps(rawProps) {\r\n    $.extend(this.miscProps, rawProps)\r\n  }\r\n\r\n}\r\n\r\nParsableModelMixin.mixInto(EventDef)\r\n\r\nEventDef.defineStandardProps({\r\n  // not automatically assigned (`false`)\r\n  _id: false,\r\n  id: false,\r\n  className: false,\r\n  source: false, // will ignored\r\n\r\n  // automatically assigned (`true`)\r\n  title: true,\r\n  description: true,\r\n  url: true,\r\n  rendering: true,\r\n  constraint: true,\r\n  overlap: true,\r\n  editable: true,\r\n  startEditable: true,\r\n  durationEditable: true,\r\n  color: true,\r\n  backgroundColor: true,\r\n  borderColor: true,\r\n  textColor: true\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventDef.ts","import EventRange from './EventRange'\r\nimport EventFootprint from './EventFootprint'\r\nimport ComponentFootprint from '../ComponentFootprint'\r\n\r\n\r\nexport function eventDefsToEventInstances(eventDefs, unzonedRange) {\r\n  let eventInstances = []\r\n  let i\r\n\r\n  for (i = 0; i < eventDefs.length; i++) {\r\n    eventInstances.push.apply(eventInstances, // append\r\n      eventDefs[i].buildInstances(unzonedRange)\r\n    )\r\n  }\r\n\r\n  return eventInstances\r\n}\r\n\r\n\r\nexport function eventInstanceToEventRange(eventInstance) {\r\n  return new EventRange(\r\n    eventInstance.dateProfile.unzonedRange,\r\n    eventInstance.def,\r\n    eventInstance\r\n  )\r\n}\r\n\r\n\r\nexport function eventRangeToEventFootprint(eventRange) {\r\n  return new EventFootprint(\r\n    new ComponentFootprint(\r\n      eventRange.unzonedRange,\r\n      eventRange.eventDef.isAllDay()\r\n    ),\r\n    eventRange.eventDef,\r\n    eventRange.eventInstance // might not exist\r\n  )\r\n}\r\n\r\n\r\nexport function eventInstanceToUnzonedRange(eventInstance) {\r\n  return eventInstance.dateProfile.unzonedRange\r\n}\r\n\r\n\r\nexport function eventFootprintToComponentFootprint(eventFootprint) {\r\n  return eventFootprint.componentFootprint\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/util.ts","\r\nexport default class EventFootprint {\r\n\r\n  componentFootprint: any\r\n  eventDef: any\r\n  eventInstance: any // optional\r\n\r\n\r\n  constructor(componentFootprint, eventDef, eventInstance) {\r\n    this.componentFootprint = componentFootprint\r\n    this.eventDef = eventDef\r\n\r\n    if (eventInstance) {\r\n      this.eventInstance = eventInstance\r\n    }\r\n  }\r\n\r\n\r\n  getEventLegacy() {\r\n    return (this.eventInstance || this.eventDef).toLegacy()\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventFootprint.ts","import { isArraysEqual } from '../../util'\r\nimport EventDateProfile from './EventDateProfile'\r\nimport EventDef from './EventDef'\r\nimport EventDefDateMutation from './EventDefDateMutation'\r\nimport SingleEventDef from './SingleEventDef'\r\n\r\n\r\nexport default class EventDefMutation {\r\n\r\n  // won't ever be empty. will be null instead.\r\n  // callers should use setDateMutation for setting.\r\n  dateMutation: any\r\n\r\n  // hacks to get updateEvent/createFromRawProps to work.\r\n  // not undo-able and not considered in isEmpty.\r\n  eventDefId: any // standard manual props\r\n  className: any // \"\r\n  verbatimStandardProps: any\r\n  miscProps: any\r\n\r\n\r\n  static createFromRawProps(eventInstance, rawProps, largeUnit) {\r\n    let eventDef = eventInstance.def\r\n    let dateProps: any = {}\r\n    let standardProps: any = {}\r\n    let miscProps: any = {}\r\n    let verbatimStandardProps: any = {}\r\n    let eventDefId = null\r\n    let className = null\r\n    let propName\r\n    let dateProfile\r\n    let dateMutation\r\n    let defMutation\r\n\r\n    for (propName in rawProps) {\r\n      if (EventDateProfile.isStandardProp(propName)) {\r\n        dateProps[propName] = rawProps[propName]\r\n      } else if (eventDef.isStandardProp(propName)) {\r\n        standardProps[propName] = rawProps[propName]\r\n      } else if (eventDef.miscProps[propName] !== rawProps[propName]) { // only if changed\r\n        miscProps[propName] = rawProps[propName]\r\n      }\r\n    }\r\n\r\n    dateProfile = EventDateProfile.parse(dateProps, eventDef.source)\r\n\r\n    if (dateProfile) { // no failure?\r\n      dateMutation = EventDefDateMutation.createFromDiff(\r\n        eventInstance.dateProfile,\r\n        dateProfile,\r\n        largeUnit\r\n      )\r\n    }\r\n\r\n    if (standardProps.id !== eventDef.id) {\r\n      eventDefId = standardProps.id // only apply if there's a change\r\n    }\r\n\r\n    if (!isArraysEqual(standardProps.className, eventDef.className)) {\r\n      className = standardProps.className // only apply if there's a change\r\n    }\r\n\r\n    EventDef.copyVerbatimStandardProps(\r\n      standardProps, // src\r\n      verbatimStandardProps // dest\r\n    )\r\n\r\n    defMutation = new EventDefMutation()\r\n    defMutation.eventDefId = eventDefId\r\n    defMutation.className = className\r\n    defMutation.verbatimStandardProps = verbatimStandardProps\r\n    defMutation.miscProps = miscProps\r\n\r\n    if (dateMutation) {\r\n      defMutation.dateMutation = dateMutation\r\n    }\r\n\r\n    return defMutation\r\n  }\r\n\r\n\r\n  /*\r\n  eventDef assumed to be a SingleEventDef.\r\n  returns an undo function.\r\n  */\r\n  mutateSingle(eventDef) {\r\n    let origDateProfile\r\n\r\n    if (this.dateMutation) {\r\n      origDateProfile = eventDef.dateProfile\r\n\r\n      eventDef.dateProfile = this.dateMutation.buildNewDateProfile(\r\n        origDateProfile,\r\n        eventDef.source.calendar\r\n      )\r\n    }\r\n\r\n    // can't undo\r\n    // TODO: more DRY with EventDef::applyManualStandardProps\r\n    if (this.eventDefId != null) {\r\n      eventDef.id = EventDef.normalizeId((eventDef.rawId = this.eventDefId))\r\n    }\r\n\r\n    // can't undo\r\n    // TODO: more DRY with EventDef::applyManualStandardProps\r\n    if (this.className) {\r\n      eventDef.className = this.className\r\n    }\r\n\r\n    // can't undo\r\n    if (this.verbatimStandardProps) {\r\n      SingleEventDef.copyVerbatimStandardProps(\r\n        this.verbatimStandardProps, // src\r\n        eventDef // dest\r\n      )\r\n    }\r\n\r\n    // can't undo\r\n    if (this.miscProps) {\r\n      eventDef.applyMiscProps(this.miscProps)\r\n    }\r\n\r\n    if (origDateProfile) {\r\n      return function() {\r\n        eventDef.dateProfile = origDateProfile\r\n      }\r\n    } else {\r\n      return function() { /* nothing to undo */ }\r\n    }\r\n  }\r\n\r\n\r\n  setDateMutation(dateMutation) {\r\n    if (dateMutation && !dateMutation.isEmpty()) {\r\n      this.dateMutation = dateMutation\r\n    } else {\r\n      this.dateMutation = null\r\n    }\r\n  }\r\n\r\n\r\n  isEmpty() {\r\n    return !this.dateMutation\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventDefMutation.ts","\r\nexport default {\r\n\r\n  sourceClasses: [],\r\n\r\n\r\n  registerClass: function(EventSourceClass) {\r\n    this.sourceClasses.unshift(EventSourceClass) // give highest priority\r\n  },\r\n\r\n\r\n  parse: function(rawInput, calendar) {\r\n    let sourceClasses = this.sourceClasses\r\n    let i\r\n    let eventSource\r\n\r\n    for (i = 0; i < sourceClasses.length; i++) {\r\n      eventSource = sourceClasses[i].parse(rawInput, calendar)\r\n\r\n      if (eventSource) {\r\n        return eventSource\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/EventSourceParser.ts","import * as $ from 'jquery'\r\nimport { getScrollbarWidths } from '../util'\r\nimport Class from '../common/Class'\r\n\r\n/*\r\nEmbodies a div that has potential scrollbars\r\n*/\r\nexport default class Scroller extends Class {\r\n\r\n  el: any // the guaranteed outer element\r\n  scrollEl: any // the element with the scrollbars\r\n  overflowX: any\r\n  overflowY: any\r\n\r\n\r\n  constructor(options?) {\r\n    super()\r\n    options = options || {}\r\n    this.overflowX = options.overflowX || options.overflow || 'auto'\r\n    this.overflowY = options.overflowY || options.overflow || 'auto'\r\n  }\r\n\r\n\r\n  render() {\r\n    this.el = this.renderEl()\r\n    this.applyOverflow()\r\n  }\r\n\r\n\r\n  renderEl() {\r\n    return (this.scrollEl = $('<div class=\"fc-scroller\"></div>'))\r\n  }\r\n\r\n\r\n  // sets to natural height, unlocks overflow\r\n  clear() {\r\n    this.setHeight('auto')\r\n    this.applyOverflow()\r\n  }\r\n\r\n\r\n  destroy() {\r\n    this.el.remove()\r\n  }\r\n\r\n\r\n  // Overflow\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  applyOverflow() {\r\n    this.scrollEl.css({\r\n      'overflow-x': this.overflowX,\r\n      'overflow-y': this.overflowY\r\n    })\r\n  }\r\n\r\n\r\n  // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\r\n  // Useful for preserving scrollbar widths regardless of future resizes.\r\n  // Can pass in scrollbarWidths for optimization.\r\n  lockOverflow(scrollbarWidths) {\r\n    let overflowX = this.overflowX\r\n    let overflowY = this.overflowY\r\n\r\n    scrollbarWidths = scrollbarWidths || this.getScrollbarWidths()\r\n\r\n    if (overflowX === 'auto') {\r\n      overflowX = (\r\n          scrollbarWidths.top || scrollbarWidths.bottom || // horizontal scrollbars?\r\n          // OR scrolling pane with massless scrollbars?\r\n          this.scrollEl[0].scrollWidth - 1 > this.scrollEl[0].clientWidth\r\n            // subtract 1 because of IE off-by-one issue\r\n        ) ? 'scroll' : 'hidden'\r\n    }\r\n\r\n    if (overflowY === 'auto') {\r\n      overflowY = (\r\n          scrollbarWidths.left || scrollbarWidths.right || // vertical scrollbars?\r\n          // OR scrolling pane with massless scrollbars?\r\n          this.scrollEl[0].scrollHeight - 1 > this.scrollEl[0].clientHeight\r\n            // subtract 1 because of IE off-by-one issue\r\n        ) ? 'scroll' : 'hidden'\r\n    }\r\n\r\n    this.scrollEl.css({ 'overflow-x': overflowX, 'overflow-y': overflowY })\r\n  }\r\n\r\n\r\n  // Getters / Setters\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  setHeight(height) {\r\n    this.scrollEl.height(height)\r\n  }\r\n\r\n\r\n  getScrollTop() {\r\n    return this.scrollEl.scrollTop()\r\n  }\r\n\r\n\r\n  setScrollTop(top) {\r\n    this.scrollEl.scrollTop(top)\r\n  }\r\n\r\n\r\n  getClientWidth() {\r\n    return this.scrollEl[0].clientWidth\r\n  }\r\n\r\n\r\n  getClientHeight() {\r\n    return this.scrollEl[0].clientHeight\r\n  }\r\n\r\n\r\n  getScrollbarWidths() {\r\n    return getScrollbarWidths(this.scrollEl)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Scroller.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { getEvIsTouch, diffByUnit, diffDayTime } from '../util'\r\nimport DateComponent from './DateComponent'\r\nimport GlobalEmitter from '../common/GlobalEmitter'\r\n\r\n\r\nexport default abstract class InteractiveDateComponent extends DateComponent {\r\n\r\n  dateClickingClass: any\r\n  dateSelectingClass: any\r\n  eventPointingClass: any\r\n  eventDraggingClass: any\r\n  eventResizingClass: any\r\n  externalDroppingClass: any\r\n\r\n  dateClicking: any\r\n  dateSelecting: any\r\n  eventPointing: any\r\n  eventDragging: any\r\n  eventResizing: any\r\n  externalDropping: any\r\n\r\n  // self-config, overridable by subclasses\r\n  segSelector: string = '.fc-event-container > *' // what constitutes an event element?\r\n\r\n  // if defined, holds the unit identified (ex: \"year\" or \"month\") that determines the level of granularity\r\n  // of the date areas. if not defined, assumes to be day and time granularity.\r\n  // TODO: port isTimeScale into same system?\r\n  largeUnit: any\r\n\r\n\r\n  constructor(_view?, _options?) {\r\n    super(_view, _options)\r\n\r\n    if (this.dateSelectingClass) {\r\n      this.dateClicking = new this.dateClickingClass(this)\r\n    }\r\n\r\n    if (this.dateSelectingClass) {\r\n      this.dateSelecting = new this.dateSelectingClass(this)\r\n    }\r\n\r\n    if (this.eventPointingClass) {\r\n      this.eventPointing = new this.eventPointingClass(this)\r\n    }\r\n\r\n    if (this.eventDraggingClass && this.eventPointing) {\r\n      this.eventDragging = new this.eventDraggingClass(this, this.eventPointing)\r\n    }\r\n\r\n    if (this.eventResizingClass && this.eventPointing) {\r\n      this.eventResizing = new this.eventResizingClass(this, this.eventPointing)\r\n    }\r\n\r\n    if (this.externalDroppingClass) {\r\n      this.externalDropping = new this.externalDroppingClass(this)\r\n    }\r\n  }\r\n\r\n\r\n  // Sets the container element that the view should render inside of, does global DOM-related initializations,\r\n  // and renders all the non-date-related content inside.\r\n  setElement(el) {\r\n    super.setElement(el)\r\n\r\n    if (this.dateClicking) {\r\n      this.dateClicking.bindToEl(el)\r\n    }\r\n\r\n    if (this.dateSelecting) {\r\n      this.dateSelecting.bindToEl(el)\r\n    }\r\n\r\n    this.bindAllSegHandlersToEl(el)\r\n  }\r\n\r\n\r\n  removeElement() {\r\n    this.endInteractions()\r\n\r\n    super.removeElement()\r\n  }\r\n\r\n\r\n  executeEventUnrender() {\r\n    this.endInteractions()\r\n\r\n    super.executeEventUnrender()\r\n  }\r\n\r\n\r\n  bindGlobalHandlers() {\r\n    super.bindGlobalHandlers()\r\n\r\n    if (this.externalDropping) {\r\n      this.externalDropping.bindToDocument()\r\n    }\r\n  }\r\n\r\n\r\n  unbindGlobalHandlers() {\r\n    super.unbindGlobalHandlers()\r\n\r\n    if (this.externalDropping) {\r\n      this.externalDropping.unbindFromDocument()\r\n    }\r\n  }\r\n\r\n\r\n  bindDateHandlerToEl(el, name, handler) {\r\n    // attach a handler to the grid's root element.\r\n    // jQuery will take care of unregistering them when removeElement gets called.\r\n    this.el.on(name, (ev) => {\r\n      if (\r\n        !$(ev.target).is(\r\n          this.segSelector + ':not(.fc-helper),' + // directly on an event element\r\n          this.segSelector + ':not(.fc-helper) *,' + // within an event element\r\n          '.fc-more,' + // a \"more..\" link\r\n          'a[data-goto]' // a clickable nav link\r\n        )\r\n      ) {\r\n        return handler.call(this, ev)\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  bindAllSegHandlersToEl(el) {\r\n    [\r\n      this.eventPointing,\r\n      this.eventDragging,\r\n      this.eventResizing\r\n    ].forEach(function(eventInteraction) {\r\n      if (eventInteraction) {\r\n        eventInteraction.bindToEl(el)\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  bindSegHandlerToEl(el, name, handler) {\r\n    el.on(name, this.segSelector, (ev) => {\r\n      let segEl = $(ev.currentTarget)\r\n      if (!segEl.is('.fc-helper')) {\r\n        let seg = segEl.data('fc-seg') // grab segment data. put there by View::renderEventsPayload\r\n        if (seg && !this.shouldIgnoreEventPointing()) {\r\n          return handler.call(this, seg, ev) // context will be the Grid\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  shouldIgnoreMouse() {\r\n    // HACK\r\n    // This will still work even though bindDateHandlerToEl doesn't use GlobalEmitter.\r\n    return GlobalEmitter.get().shouldIgnoreMouse()\r\n  }\r\n\r\n\r\n  shouldIgnoreTouch() {\r\n    let view = this._getView()\r\n\r\n    // On iOS (and Android?) when a new selection is initiated overtop another selection,\r\n    // the touchend never fires because the elements gets removed mid-touch-interaction (my theory).\r\n    // HACK: simply don't allow this to happen.\r\n    // ALSO: prevent selection when an *event* is already raised.\r\n    return view.isSelected || view.selectedEvent\r\n  }\r\n\r\n\r\n  shouldIgnoreEventPointing() {\r\n    // only call the handlers if there is not a drag/resize in progress\r\n    return (this.eventDragging && this.eventDragging.isDragging) ||\r\n      (this.eventResizing && this.eventResizing.isResizing)\r\n  }\r\n\r\n\r\n  canStartSelection(seg, ev) {\r\n    return getEvIsTouch(ev) &&\r\n      !this.canStartResize(seg, ev) &&\r\n      (this.isEventDefDraggable(seg.footprint.eventDef) ||\r\n        this.isEventDefResizable(seg.footprint.eventDef))\r\n  }\r\n\r\n\r\n  canStartDrag(seg, ev) {\r\n    return !this.canStartResize(seg, ev) &&\r\n      this.isEventDefDraggable(seg.footprint.eventDef)\r\n  }\r\n\r\n\r\n  canStartResize(seg, ev) {\r\n    let view = this._getView()\r\n    let eventDef = seg.footprint.eventDef\r\n\r\n    return (!getEvIsTouch(ev) || view.isEventDefSelected(eventDef)) &&\r\n      this.isEventDefResizable(eventDef) &&\r\n      $(ev.target).is('.fc-resizer')\r\n  }\r\n\r\n\r\n  // Kills all in-progress dragging.\r\n  // Useful for when public API methods that result in re-rendering are invoked during a drag.\r\n  // Also useful for when touch devices misbehave and don't fire their touchend.\r\n  endInteractions() {\r\n    [\r\n      this.dateClicking,\r\n      this.dateSelecting,\r\n      this.eventPointing,\r\n      this.eventDragging,\r\n      this.eventResizing\r\n    ].forEach(function(interaction) {\r\n      if (interaction) {\r\n        interaction.end()\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // Event Drag-n-Drop\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Computes if the given event is allowed to be dragged by the user\r\n  isEventDefDraggable(eventDef) {\r\n    return this.isEventDefStartEditable(eventDef)\r\n  }\r\n\r\n\r\n  isEventDefStartEditable(eventDef) {\r\n    let isEditable = eventDef.isStartExplicitlyEditable()\r\n\r\n    if (isEditable == null) {\r\n      isEditable = this.opt('eventStartEditable')\r\n\r\n      if (isEditable == null) {\r\n        isEditable = this.isEventDefGenerallyEditable(eventDef)\r\n      }\r\n    }\r\n\r\n    return isEditable\r\n  }\r\n\r\n\r\n  isEventDefGenerallyEditable(eventDef) {\r\n    let isEditable = eventDef.isExplicitlyEditable()\r\n\r\n    if (isEditable == null) {\r\n      isEditable = this.opt('editable')\r\n    }\r\n\r\n    return isEditable\r\n  }\r\n\r\n\r\n  // Event Resizing\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Computes if the given event is allowed to be resized from its starting edge\r\n  isEventDefResizableFromStart(eventDef) {\r\n    return this.opt('eventResizableFromStart') && this.isEventDefResizable(eventDef)\r\n  }\r\n\r\n\r\n  // Computes if the given event is allowed to be resized from its ending edge\r\n  isEventDefResizableFromEnd(eventDef) {\r\n    return this.isEventDefResizable(eventDef)\r\n  }\r\n\r\n\r\n  // Computes if the given event is allowed to be resized by the user at all\r\n  isEventDefResizable(eventDef) {\r\n    let isResizable = eventDef.isDurationExplicitlyEditable()\r\n\r\n    if (isResizable == null) {\r\n      isResizable = this.opt('eventDurationEditable')\r\n\r\n      if (isResizable == null) {\r\n        isResizable = this.isEventDefGenerallyEditable(eventDef)\r\n      }\r\n    }\r\n    return isResizable\r\n  }\r\n\r\n\r\n  // Event Mutation / Constraints\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Diffs the two dates, returning a duration, based on granularity of the grid\r\n  // TODO: port isTimeScale into this system?\r\n  diffDates(a, b): moment.Duration {\r\n    if (this.largeUnit) {\r\n      return diffByUnit(a, b, this.largeUnit)\r\n    } else {\r\n      return diffDayTime(a, b)\r\n    }\r\n  }\r\n\r\n\r\n  // is it allowed, in relation to the view's validRange?\r\n  // NOTE: very similar to isExternalInstanceGroupAllowed\r\n  isEventInstanceGroupAllowed(eventInstanceGroup) {\r\n    let view = this._getView()\r\n    let dateProfile = this.dateProfile\r\n    let eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges())\r\n    let i\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      // TODO: just use getAllEventRanges directly\r\n      if (!dateProfile.validUnzonedRange.containsRange(eventFootprints[i].componentFootprint.unzonedRange)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return view.calendar.constraints.isEventInstanceGroupAllowed(eventInstanceGroup)\r\n  }\r\n\r\n\r\n  // NOTE: very similar to isEventInstanceGroupAllowed\r\n  // when it's a completely anonymous external drag, no event.\r\n  isExternalInstanceGroupAllowed(eventInstanceGroup) {\r\n    let view = this._getView()\r\n    let dateProfile = this.dateProfile\r\n    let eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges())\r\n    let i\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      if (!dateProfile.validUnzonedRange.containsRange(eventFootprints[i].componentFootprint.unzonedRange)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      // treat it as a selection\r\n      // TODO: pass in eventInstanceGroup instead\r\n      //  because we don't want calendar's constraint system to depend on a component's\r\n      //  determination of footprints.\r\n      if (!view.calendar.constraints.isSelectionFootprintAllowed(eventFootprints[i].componentFootprint)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/InteractiveDateComponent.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { parseFieldSpecs, proxy, isPrimaryMouseButton } from './util'\r\nimport RenderQueue from './common/RenderQueue'\r\nimport Calendar from './Calendar'\r\nimport DateProfileGenerator from './DateProfileGenerator'\r\nimport InteractiveDateComponent from './component/InteractiveDateComponent'\r\nimport GlobalEmitter from './common/GlobalEmitter'\r\nimport UnzonedRange from './models/UnzonedRange'\r\nimport EventInstance from './models/event/EventInstance'\r\n\r\n\r\n/* An abstract class from which other views inherit from\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default abstract class View extends InteractiveDateComponent {\r\n\r\n  type: string // subclass' view name (string)\r\n  name: string // deprecated. use `type` instead\r\n  title: string // the text that will be displayed in the header's title\r\n\r\n  calendar: Calendar // owner Calendar object\r\n  viewSpec: any\r\n  options: any // hash containing all options. already merged with view-specific-options\r\n\r\n  renderQueue: RenderQueue\r\n  batchRenderDepth: number = 0\r\n  queuedScroll: object\r\n\r\n  isSelected: boolean = false // boolean whether a range of time is user-selected or not\r\n  selectedEventInstance: EventInstance\r\n\r\n  eventOrderSpecs: any // criteria for ordering events when they have same date/time\r\n\r\n  // for date utils, computed from options\r\n  isHiddenDayHash: boolean[]\r\n\r\n  // now indicator\r\n  isNowIndicatorRendered: boolean\r\n  initialNowDate: moment.Moment // result first getNow call\r\n  initialNowQueriedMs: number // ms time the getNow was called\r\n  nowIndicatorTimeoutID: any // for refresh timing of now indicator\r\n  nowIndicatorIntervalID: any // \"\r\n\r\n  dateProfileGeneratorClass: any // initialized after class\r\n  dateProfileGenerator: any\r\n\r\n  // whether minTime/maxTime will affect the activeUnzonedRange. Views must opt-in.\r\n  // initialized after class\r\n  usesMinMaxTime: boolean\r\n\r\n  // DEPRECATED\r\n  start: moment.Moment // use activeUnzonedRange\r\n  end: moment.Moment // use activeUnzonedRange\r\n  intervalStart: moment.Moment // use currentUnzonedRange\r\n  intervalEnd: moment.Moment // use currentUnzonedRange\r\n\r\n\r\n  constructor(calendar, viewSpec) {\r\n    super(null, viewSpec.options)\r\n\r\n    this.calendar = calendar\r\n    // console.log(calendar)\r\n    // if (viewSpec.type === 'listWeek') {\r\n    //   viewSpec.duration._data.days = 1\r\n    //   viewSpec.duration._days = 1\r\n    // }\r\n    this.viewSpec = viewSpec\r\n    console.log('<--Edit viewSpec-->', this.viewSpec)\r\n    // shortcuts\r\n    this.type = viewSpec.type\r\n\r\n    // .name is deprecated\r\n    this.name = this.type\r\n\r\n\r\n    this.initRenderQueue()\r\n    this.initHiddenDays()\r\n    this.dateProfileGenerator = new this.dateProfileGeneratorClass(this)\r\n    this.bindBaseRenderHandlers()\r\n    this.eventOrderSpecs = parseFieldSpecs(this.opt('eventOrder'))\r\n\r\n    // legacy\r\n    if (this['initialize']) {\r\n      this['initialize']()\r\n    }\r\n  }\r\n\r\n\r\n  _getView() {\r\n    return this\r\n  }\r\n\r\n\r\n  // Retrieves an option with the given name\r\n  opt(name) {\r\n    return this.options[name]\r\n  }\r\n\r\n\r\n  /* Render Queue\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  initRenderQueue() {\r\n    this.renderQueue = new RenderQueue({\r\n      event: this.opt('eventRenderWait')\r\n    })\r\n\r\n    this.renderQueue.on('start', this.onRenderQueueStart.bind(this))\r\n    this.renderQueue.on('stop', this.onRenderQueueStop.bind(this))\r\n\r\n    this.on('before:change', this.startBatchRender)\r\n    this.on('change', this.stopBatchRender)\r\n  }\r\n\r\n\r\n  onRenderQueueStart() {\r\n    this.calendar.freezeContentHeight()\r\n    this.addScroll(this.queryScroll())\r\n  }\r\n\r\n\r\n  onRenderQueueStop() {\r\n    if (this.calendar.updateViewSize()) { // success?\r\n      this.popScroll()\r\n    }\r\n    this.calendar.thawContentHeight()\r\n  }\r\n\r\n\r\n  startBatchRender() {\r\n    if (!(this.batchRenderDepth++)) {\r\n      this.renderQueue.pause()\r\n    }\r\n  }\r\n\r\n\r\n  stopBatchRender() {\r\n    if (!(--this.batchRenderDepth)) {\r\n      this.renderQueue.resume()\r\n    }\r\n  }\r\n\r\n\r\n  requestRender(func, namespace, actionType) {\r\n    this.renderQueue.queue(func, namespace, actionType)\r\n  }\r\n\r\n\r\n  // given func will auto-bind to `this`\r\n  whenSizeUpdated(func) {\r\n    if (this.renderQueue.isRunning) {\r\n      this.renderQueue.one('stop', func.bind(this))\r\n    } else {\r\n      func.call(this)\r\n    }\r\n  }\r\n\r\n\r\n  /* Title and Date Formatting\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Computes what the title at the top of the calendar should be for this view\r\n  computeTitle(dateProfile) {\r\n    let unzonedRange\r\n\r\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\r\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\r\n      unzonedRange = dateProfile.currentUnzonedRange\r\n    } else { // for day units or smaller, use the actual day range\r\n      unzonedRange = dateProfile.activeUnzonedRange\r\n    }\r\n\r\n    return this.formatRange(\r\n      {\r\n        start: this.calendar.msToMoment(unzonedRange.startMs, dateProfile.isRangeAllDay),\r\n        end: this.calendar.msToMoment(unzonedRange.endMs, dateProfile.isRangeAllDay)\r\n      },\r\n      dateProfile.isRangeAllDay,\r\n      this.opt('titleFormat') || this.computeTitleFormat(dateProfile),\r\n      this.opt('titleRangeSeparator')\r\n    )\r\n  }\r\n\r\n\r\n  // Generates the format string that should be used to generate the title for the current date range.\r\n  // Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\r\n  computeTitleFormat(dateProfile) {\r\n    let currentRangeUnit = dateProfile.currentRangeUnit\r\n\r\n    if (currentRangeUnit === 'year') {\r\n      return 'YYYY'\r\n    } else if (currentRangeUnit === 'month') {\r\n      return this.opt('monthYearFormat') // like \"September 2014\"\r\n    } else if (dateProfile.currentUnzonedRange.as('days') > 1) {\r\n      return 'll' // multi-day range. shorter, like \"Sep 9 - 10 2014\"\r\n    } else {\r\n      return 'LL' // one day. longer, like \"September 9 2014\"\r\n    }\r\n  }\r\n\r\n\r\n  // Date Setting/Unsetting\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  setDate(date) {\r\n    console.log(date)\r\n    let currentDateProfile = this.get('dateProfile')\r\n    let newDateProfile = this.dateProfileGenerator.build(date, undefined, true) // forceToValid=true\r\n\r\n    if (\r\n      !currentDateProfile ||\r\n      !currentDateProfile.activeUnzonedRange.equals(newDateProfile.activeUnzonedRange)\r\n    ) {\r\n      console.log('newDateProfile',newDateProfile)\r\n      console.log(moment(newDateProfile.currentUnzonedRange.startMs))\r\n      console.log(moment(newDateProfile.currentUnzonedRange.endMs))\r\n      this.set('dateProfile', newDateProfile)\r\n    }\r\n  }\r\n\r\n\r\n  unsetDate() {\r\n    this.unset('dateProfile')\r\n  }\r\n\r\n\r\n  // Event Data\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  fetchInitialEvents(dateProfile) {\r\n    let calendar = this.calendar\r\n    let forceAllDay = dateProfile.isRangeAllDay && !this.usesMinMaxTime\r\n\r\n    return calendar.requestEvents(\r\n      calendar.msToMoment(dateProfile.activeUnzonedRange.startMs, forceAllDay),\r\n      calendar.msToMoment(dateProfile.activeUnzonedRange.endMs, forceAllDay)\r\n    )\r\n  }\r\n\r\n\r\n  bindEventChanges() {\r\n    this.listenTo(this.calendar, 'eventsReset', this.resetEvents) // TODO: make this a real event\r\n  }\r\n\r\n\r\n  unbindEventChanges() {\r\n    this.stopListeningTo(this.calendar, 'eventsReset')\r\n  }\r\n\r\n\r\n  setEvents(eventsPayload) {\r\n    this.set('currentEvents', eventsPayload)\r\n    this.set('hasEvents', true)\r\n  }\r\n\r\n\r\n  unsetEvents() {\r\n    this.unset('currentEvents')\r\n    this.unset('hasEvents')\r\n  }\r\n\r\n\r\n  resetEvents(eventsPayload) {\r\n    this.startBatchRender()\r\n    this.unsetEvents()\r\n    this.setEvents(eventsPayload)\r\n    this.stopBatchRender()\r\n  }\r\n\r\n\r\n  // Date High-level Rendering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  requestDateRender(dateProfile) {\r\n    this.requestRender(() => {\r\n      this.executeDateRender(dateProfile)\r\n    }, 'date', 'init')\r\n  }\r\n\r\n\r\n  requestDateUnrender() {\r\n    this.requestRender(() => {\r\n      this.executeDateUnrender()\r\n    }, 'date', 'destroy')\r\n  }\r\n\r\n\r\n  // if dateProfile not specified, uses current\r\n  executeDateRender(dateProfile) {\r\n    super.executeDateRender(dateProfile)\r\n\r\n    if (this['render']) {\r\n      this['render']() // TODO: deprecate\r\n    }\r\n\r\n    this.trigger('datesRendered')\r\n    this.addScroll({ isDateInit: true })\r\n    this.startNowIndicator() // shouldn't render yet because updateSize will be called soon\r\n  }\r\n\r\n\r\n  executeDateUnrender() {\r\n    this.unselect()\r\n    this.stopNowIndicator()\r\n    this.trigger('before:datesUnrendered')\r\n\r\n    if (this['destroy']) {\r\n      this['destroy']() // TODO: deprecate\r\n    }\r\n\r\n    super.executeDateUnrender()\r\n  }\r\n\r\n\r\n  // \"Base\" rendering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  bindBaseRenderHandlers() {\r\n    this.on('datesRendered', () => {\r\n      this.whenSizeUpdated(\r\n        this.triggerViewRender\r\n      )\r\n    })\r\n\r\n    this.on('before:datesUnrendered', () => {\r\n      this.triggerViewDestroy()\r\n    })\r\n  }\r\n\r\n\r\n  triggerViewRender() {\r\n    this.publiclyTrigger('viewRender', {\r\n      context: this,\r\n      args: [this, this.el]\r\n    })\r\n  }\r\n\r\n\r\n  triggerViewDestroy() {\r\n    this.publiclyTrigger('viewDestroy', {\r\n      context: this,\r\n      args: [this, this.el]\r\n    })\r\n  }\r\n\r\n\r\n  // Event High-level Rendering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  requestEventsRender(eventsPayload) {\r\n    this.requestRender(() => {\r\n      this.executeEventRender(eventsPayload)\r\n      this.whenSizeUpdated(\r\n        this.triggerAfterEventsRendered\r\n      )\r\n    }, 'event', 'init')\r\n  }\r\n\r\n\r\n  requestEventsUnrender() {\r\n    this.requestRender(() => {\r\n      this.triggerBeforeEventsDestroyed()\r\n      this.executeEventUnrender()\r\n    }, 'event', 'destroy')\r\n  }\r\n\r\n\r\n  // Business Hour High-level Rendering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  requestBusinessHoursRender(businessHourGenerator) {\r\n    this.requestRender(() => {\r\n      this.renderBusinessHours(businessHourGenerator)\r\n    }, 'businessHours', 'init')\r\n  }\r\n\r\n  requestBusinessHoursUnrender() {\r\n    this.requestRender(() => {\r\n      this.unrenderBusinessHours()\r\n    }, 'businessHours', 'destroy')\r\n  }\r\n\r\n\r\n  // Misc view rendering utils\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Binds DOM handlers to elements that reside outside the view container, such as the document\r\n  bindGlobalHandlers() {\r\n    super.bindGlobalHandlers()\r\n\r\n    this.listenTo(GlobalEmitter.get(), {\r\n      touchstart: this.processUnselect,\r\n      mousedown: this.handleDocumentMousedown\r\n    })\r\n  }\r\n\r\n\r\n  // Unbinds DOM handlers from elements that reside outside the view container\r\n  unbindGlobalHandlers() {\r\n    super.unbindGlobalHandlers()\r\n\r\n    this.stopListeningTo(GlobalEmitter.get())\r\n  }\r\n\r\n\r\n  /* Now Indicator\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Immediately render the current time indicator and begins re-rendering it at an interval,\r\n  // which is defined by this.getNowIndicatorUnit().\r\n  // TODO: somehow do this for the current whole day's background too\r\n  startNowIndicator() {\r\n    let unit\r\n    let update\r\n    let delay // ms wait value\r\n\r\n    if (this.opt('nowIndicator')) {\r\n      unit = this.getNowIndicatorUnit()\r\n      if (unit) {\r\n        update = proxy(this, 'updateNowIndicator') // bind to `this`\r\n\r\n        this.initialNowDate = this.calendar.getNow()\r\n        this.initialNowQueriedMs = new Date().valueOf()\r\n\r\n        // wait until the beginning of the next interval\r\n        delay = this.initialNowDate.clone().startOf(unit).add(1, unit).valueOf() - this.initialNowDate.valueOf()\r\n        this.nowIndicatorTimeoutID = setTimeout(() => {\r\n          this.nowIndicatorTimeoutID = null\r\n          update()\r\n          delay = +moment.duration(1, unit)\r\n          delay = Math.max(100, delay) // prevent too frequent\r\n          this.nowIndicatorIntervalID = setInterval(update, delay) // update every interval\r\n        }, delay)\r\n      }\r\n\r\n      // rendering will be initiated in updateSize\r\n    }\r\n  }\r\n\r\n\r\n  // rerenders the now indicator, computing the new current time from the amount of time that has passed\r\n  // since the initial getNow call.\r\n  updateNowIndicator() {\r\n    if (\r\n      this.isDatesRendered &&\r\n      this.initialNowDate // activated before?\r\n    ) {\r\n      this.unrenderNowIndicator() // won't unrender if unnecessary\r\n      this.renderNowIndicator(\r\n        this.initialNowDate.clone().add(new Date().valueOf() - this.initialNowQueriedMs) // add ms\r\n      )\r\n      this.isNowIndicatorRendered = true\r\n    }\r\n  }\r\n\r\n\r\n  // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\r\n  // Won't cause side effects if indicator isn't rendered.\r\n  stopNowIndicator() {\r\n    if (this.isNowIndicatorRendered) {\r\n\r\n      if (this.nowIndicatorTimeoutID) {\r\n        clearTimeout(this.nowIndicatorTimeoutID)\r\n        this.nowIndicatorTimeoutID = null\r\n      }\r\n      if (this.nowIndicatorIntervalID) {\r\n        clearInterval(this.nowIndicatorIntervalID)\r\n        this.nowIndicatorIntervalID = null\r\n      }\r\n\r\n      this.unrenderNowIndicator()\r\n      this.isNowIndicatorRendered = false\r\n    }\r\n  }\r\n\r\n\r\n  /* Dimensions\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  updateSize(totalHeight, isAuto, isResize) {\r\n\r\n    if (this['setHeight']) { // for legacy API\r\n      this['setHeight'](totalHeight, isAuto)\r\n    } else {\r\n      super.updateSize(totalHeight, isAuto, isResize)\r\n    }\r\n\r\n    this.updateNowIndicator()\r\n  }\r\n\r\n\r\n  /* Scroller\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  addScroll(scroll) {\r\n    let queuedScroll = this.queuedScroll || (this.queuedScroll = {})\r\n\r\n    $.extend(queuedScroll, scroll)\r\n  }\r\n\r\n\r\n  popScroll() {\r\n    this.applyQueuedScroll()\r\n    this.queuedScroll = null\r\n  }\r\n\r\n\r\n  applyQueuedScroll() {\r\n    if (this.queuedScroll) {\r\n      this.applyScroll(this.queuedScroll)\r\n    }\r\n  }\r\n\r\n\r\n  queryScroll() {\r\n    let scroll = {}\r\n\r\n    if (this.isDatesRendered) {\r\n      $.extend(scroll, this.queryDateScroll())\r\n    }\r\n\r\n    return scroll\r\n  }\r\n\r\n\r\n  applyScroll(scroll) {\r\n    if (scroll.isDateInit && this.isDatesRendered) {\r\n      $.extend(scroll, this.computeInitialDateScroll())\r\n    }\r\n\r\n    if (this.isDatesRendered) {\r\n      this.applyDateScroll(scroll)\r\n    }\r\n  }\r\n\r\n\r\n  computeInitialDateScroll() {\r\n    return {} // subclasses must implement\r\n  }\r\n\r\n\r\n  queryDateScroll() {\r\n    return {} // subclasses must implement\r\n  }\r\n\r\n\r\n  applyDateScroll(scroll) {\r\n    // subclasses must implement\r\n  }\r\n\r\n\r\n  /* Event Drag-n-Drop\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  reportEventDrop(eventInstance, eventMutation, el, ev) {\r\n    let eventManager = this.calendar.eventManager\r\n    let undoFunc = eventManager.mutateEventsWithId(\r\n      eventInstance.def.id,\r\n      eventMutation\r\n    )\r\n    let dateMutation = eventMutation.dateMutation\r\n\r\n    // update the EventInstance, for handlers\r\n    if (dateMutation) {\r\n      eventInstance.dateProfile = dateMutation.buildNewDateProfile(\r\n        eventInstance.dateProfile,\r\n        this.calendar\r\n      )\r\n    }\r\n\r\n    this.triggerEventDrop(\r\n      eventInstance,\r\n      // a drop doesn't necessarily mean a date mutation (ex: resource change)\r\n      (dateMutation && dateMutation.dateDelta) || moment.duration(),\r\n      undoFunc,\r\n      el, ev\r\n    )\r\n  }\r\n\r\n\r\n  // Triggers event-drop handlers that have subscribed via the API\r\n  triggerEventDrop(eventInstance, dateDelta, undoFunc, el, ev) {\r\n    this.publiclyTrigger('eventDrop', {\r\n      context: el[0],\r\n      args: [\r\n        eventInstance.toLegacy(),\r\n        dateDelta,\r\n        undoFunc,\r\n        ev,\r\n        {}, // {} = jqui dummy\r\n        this\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  /* External Element Drag-n-Drop\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Must be called when an external element, via jQuery UI, has been dropped onto the calendar.\r\n  // `meta` is the parsed data that has been embedded into the dragging event.\r\n  // `dropLocation` is an object that contains the new zoned start/end/allDay values for the event.\r\n  reportExternalDrop(singleEventDef, isEvent, isSticky, el, ev, ui) {\r\n\r\n    if (isEvent) {\r\n      this.calendar.eventManager.addEventDef(singleEventDef, isSticky)\r\n    }\r\n\r\n    this.triggerExternalDrop(singleEventDef, isEvent, el, ev, ui)\r\n  }\r\n\r\n\r\n  // Triggers external-drop handlers that have subscribed via the API\r\n  triggerExternalDrop(singleEventDef, isEvent, el, ev, ui) {\r\n\r\n    // trigger 'drop' regardless of whether element represents an event\r\n    this.publiclyTrigger('drop', {\r\n      context: el[0],\r\n      args: [\r\n        singleEventDef.dateProfile.start.clone(),\r\n        ev,\r\n        ui,\r\n        this\r\n      ]\r\n    })\r\n\r\n    if (isEvent) {\r\n      // signal an external event landed\r\n      this.publiclyTrigger('eventReceive', {\r\n        context: this,\r\n        args: [\r\n          singleEventDef.buildInstance().toLegacy(),\r\n          this\r\n        ]\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  /* Event Resizing\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Must be called when an event in the view has been resized to a new length\r\n  reportEventResize(eventInstance, eventMutation, el, ev) {\r\n    let eventManager = this.calendar.eventManager\r\n    let undoFunc = eventManager.mutateEventsWithId(\r\n      eventInstance.def.id,\r\n      eventMutation\r\n    )\r\n\r\n    // update the EventInstance, for handlers\r\n    eventInstance.dateProfile = eventMutation.dateMutation.buildNewDateProfile(\r\n      eventInstance.dateProfile,\r\n      this.calendar\r\n    )\r\n\r\n    this.triggerEventResize(\r\n      eventInstance,\r\n      eventMutation.dateMutation.endDelta,\r\n      undoFunc,\r\n      el, ev\r\n    )\r\n  }\r\n\r\n\r\n  // Triggers event-resize handlers that have subscribed via the API\r\n  triggerEventResize(eventInstance, durationDelta, undoFunc, el, ev) {\r\n    this.publiclyTrigger('eventResize', {\r\n      context: el[0],\r\n      args: [\r\n        eventInstance.toLegacy(),\r\n        durationDelta,\r\n        undoFunc,\r\n        ev,\r\n        {}, // {} = jqui dummy\r\n        this\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  /* Selection (time range)\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Selects a date span on the view. `start` and `end` are both Moments.\r\n  // `ev` is the native mouse event that begin the interaction.\r\n  select(footprint, ev?) {\r\n    this.unselect(ev)\r\n    this.renderSelectionFootprint(footprint)\r\n    this.reportSelection(footprint, ev)\r\n  }\r\n\r\n\r\n  renderSelectionFootprint(footprint) {\r\n    if (this['renderSelection']) { // legacy method in custom view classes\r\n      this['renderSelection'](\r\n        footprint.toLegacy(this.calendar)\r\n      )\r\n    } else {\r\n      super.renderSelectionFootprint(footprint)\r\n    }\r\n  }\r\n\r\n\r\n  // Called when a new selection is made. Updates internal state and triggers handlers.\r\n  reportSelection(footprint, ev?) {\r\n    this.isSelected = true\r\n    this.triggerSelect(footprint, ev)\r\n  }\r\n\r\n\r\n  // Triggers handlers to 'select'\r\n  triggerSelect(footprint, ev?) {\r\n    let dateProfile = this.calendar.footprintToDateProfile(footprint) // abuse of \"Event\"DateProfile?\r\n\r\n    this.publiclyTrigger('select', {\r\n      context: this,\r\n      args: [\r\n        dateProfile.start,\r\n        dateProfile.end,\r\n        ev,\r\n        this\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  // Undoes a selection. updates in the internal state and triggers handlers.\r\n  // `ev` is the native mouse event that began the interaction.\r\n  unselect(ev?) {\r\n    if (this.isSelected) {\r\n      this.isSelected = false\r\n      if (this['destroySelection']) {\r\n        this['destroySelection']() // TODO: deprecate\r\n      }\r\n      this.unrenderSelection()\r\n      this.publiclyTrigger('unselect', {\r\n        context: this,\r\n        args: [ev, this]\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  /* Event Selection\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  selectEventInstance(eventInstance) {\r\n    if (\r\n      !this.selectedEventInstance ||\r\n      this.selectedEventInstance !== eventInstance\r\n    ) {\r\n      this.unselectEventInstance()\r\n\r\n      this.getEventSegs().forEach(function (seg) {\r\n        if (\r\n          seg.footprint.eventInstance === eventInstance &&\r\n          seg.el // necessary?\r\n        ) {\r\n          seg.el.addClass('fc-selected')\r\n        }\r\n      })\r\n\r\n      this.selectedEventInstance = eventInstance\r\n    }\r\n  }\r\n\r\n\r\n  unselectEventInstance() {\r\n    if (this.selectedEventInstance) {\r\n\r\n      this.getEventSegs().forEach(function (seg) {\r\n        if (seg.el) { // necessary?\r\n          seg.el.removeClass('fc-selected')\r\n        }\r\n      })\r\n\r\n      this.selectedEventInstance = null\r\n    }\r\n  }\r\n\r\n\r\n  isEventDefSelected(eventDef) {\r\n    // event references might change on refetchEvents(), while selectedEventInstance doesn't,\r\n    // so compare IDs\r\n    return this.selectedEventInstance && this.selectedEventInstance.def.id === eventDef.id\r\n  }\r\n\r\n\r\n  /* Mouse / Touch Unselecting (time range & event unselection)\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n  // TODO: move consistently to down/start or up/end?\r\n  // TODO: don't kill previous selection if touch scrolling\r\n\r\n\r\n  handleDocumentMousedown(ev) {\r\n    if (isPrimaryMouseButton(ev)) {\r\n      this.processUnselect(ev)\r\n    }\r\n  }\r\n\r\n\r\n  processUnselect(ev) {\r\n    this.processRangeUnselect(ev)\r\n    this.processEventUnselect(ev)\r\n  }\r\n\r\n\r\n  processRangeUnselect(ev) {\r\n    let ignore\r\n\r\n    // is there a time-range selection?\r\n    if (this.isSelected && this.opt('unselectAuto')) {\r\n      // only unselect if the clicked element is not identical to or inside of an 'unselectCancel' element\r\n      ignore = this.opt('unselectCancel')\r\n      if (!ignore || !$(ev.target).closest(ignore).length) {\r\n        this.unselect(ev)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  processEventUnselect(ev) {\r\n    if (this.selectedEventInstance) {\r\n      if (!$(ev.target).closest('.fc-selected').length) {\r\n        this.unselectEventInstance()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* Triggers\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  triggerBaseRendered() {\r\n    this.publiclyTrigger('viewRender', {\r\n      context: this,\r\n      args: [this, this.el]\r\n    })\r\n  }\r\n\r\n\r\n  triggerBaseUnrendered() {\r\n    this.publiclyTrigger('viewDestroy', {\r\n      context: this,\r\n      args: [this, this.el]\r\n    })\r\n  }\r\n\r\n\r\n  // Triggers handlers to 'dayClick'\r\n  // Span has start/end of the clicked area. Only the start is useful.\r\n  triggerDayClick(footprint, dayEl, ev) {\r\n    let dateProfile = this.calendar.footprintToDateProfile(footprint) // abuse of \"Event\"DateProfile?\r\n    this.publiclyTrigger('dayClick', {\r\n      context: dayEl,\r\n      args: [dateProfile.start, ev, this]\r\n    })\r\n  }\r\n\r\n\r\n  /* Date Utils\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // For DateComponent::getDayClasses\r\n  isDateInOtherMonth(date, dateProfile) {\r\n    return false\r\n  }\r\n\r\n\r\n  // Arguments after name will be forwarded to a hypothetical function value\r\n  // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\r\n  // Always clone your objects if you fear mutation.\r\n  getUnzonedRangeOption(name) {\r\n    let val = this.opt(name)\r\n\r\n    if (typeof val === 'function') {\r\n      val = val.apply(\r\n        null,\r\n        Array.prototype.slice.call(arguments, 1)\r\n      )\r\n    }\r\n\r\n    if (val) {\r\n      return this.calendar.parseUnzonedRange(val)\r\n    }\r\n  }\r\n\r\n\r\n  /* Hidden Days\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Initializes internal variables related to calculating hidden days-of-week\r\n  initHiddenDays() {\r\n    let hiddenDays = this.opt('hiddenDays') || [] // array of day-of-week indices that are hidden\r\n    let isHiddenDayHash = [] // is the day-of-week hidden? (hash with day-of-week-index -> bool)\r\n    let dayCnt = 0\r\n    let i\r\n\r\n    if (this.opt('weekends') === false) {\r\n      hiddenDays.push(0, 6) // 0=sunday, 6=saturday\r\n    }\r\n\r\n    for (i = 0; i < 7; i++) {\r\n      if (\r\n        !(isHiddenDayHash[i] = $.inArray(i, hiddenDays) !== -1)\r\n      ) {\r\n        dayCnt++\r\n      }\r\n    }\r\n\r\n    if (!dayCnt) {\r\n      throw new Error('invalid hiddenDays') // all days were hidden? bad.\r\n    }\r\n\r\n    this.isHiddenDayHash = isHiddenDayHash\r\n  }\r\n\r\n\r\n  // Remove days from the beginning and end of the range that are computed as hidden.\r\n  // If the whole range is trimmed off, returns null\r\n  trimHiddenDays(inputUnzonedRange) {\r\n    let start = inputUnzonedRange.getStart()\r\n    let end = inputUnzonedRange.getEnd()\r\n\r\n    if (start) {\r\n      start = this.skipHiddenDays(start)\r\n    }\r\n\r\n    if (end) {\r\n      end = this.skipHiddenDays(end, -1, true)\r\n    }\r\n\r\n    if (start === null || end === null || start < end) {\r\n      return new UnzonedRange(start, end)\r\n    }\r\n    return null\r\n  }\r\n\r\n\r\n  // Is the current day hidden?\r\n  // `day` is a day-of-week index (0-6), or a Moment\r\n  isHiddenDay(day) {\r\n    if (moment.isMoment(day)) {\r\n      day = day.day()\r\n    }\r\n    return this.isHiddenDayHash[day]\r\n  }\r\n\r\n\r\n  // Incrementing the current day until it is no longer a hidden day, returning a copy.\r\n  // DOES NOT CONSIDER validUnzonedRange!\r\n  // If the initial value of `date` is not a hidden day, don't do anything.\r\n  // Pass `isExclusive` as `true` if you are dealing with an end date.\r\n  // `inc` defaults to `1` (increment one day forward each time)\r\n  skipHiddenDays(date, inc = 1, isExclusive = false) {\r\n    let out = date.clone()\r\n    while (\r\n      this.isHiddenDayHash[(out.day() + (isExclusive ? inc : 0) + 7) % 7]\r\n    ) {\r\n      out.add(inc, 'days')\r\n    }\r\n    return out\r\n  }\r\n\r\n}\r\n\r\nView.prototype.usesMinMaxTime = false\r\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator\r\n\r\n\r\nView.watch('displayingDates', ['isInDom', 'dateProfile'], function (deps) {\r\n  this.requestDateRender(deps.dateProfile)\r\n}, function () {\r\n  this.requestDateUnrender()\r\n})\r\n\r\n\r\nView.watch('displayingBusinessHours', ['displayingDates', 'businessHourGenerator'], function (deps) {\r\n  this.requestBusinessHoursRender(deps.businessHourGenerator)\r\n}, function () {\r\n  this.requestBusinessHoursUnrender()\r\n})\r\n\r\n\r\nView.watch('initialEvents', ['dateProfile'], function (deps) {\r\n  return this.fetchInitialEvents(deps.dateProfile)\r\n})\r\n\r\n\r\nView.watch('bindingEvents', ['initialEvents'], function (deps) {\r\n  this.setEvents(deps.initialEvents)\r\n  this.bindEventChanges()\r\n}, function () {\r\n  this.unbindEventChanges()\r\n  this.unsetEvents()\r\n})\r\n\r\n\r\nView.watch('displayingEvents', ['displayingDates', 'hasEvents'], function () {\r\n  this.requestEventsRender(this.get('currentEvents'))\r\n}, function () {\r\n  this.requestEventsUnrender()\r\n})\r\n\r\n\r\nView.watch('title', ['dateProfile'], function (deps) {\r\n  return (this.title = this.computeTitle(deps.dateProfile)) // assign to View for legacy reasons\r\n})\r\n\r\n\r\nView.watch('legacyDateProps', ['dateProfile'], function (deps) {\r\n  let calendar = this.calendar\r\n  let dateProfile = deps.dateProfile\r\n\r\n  // DEPRECATED, but we need to keep it updated...\r\n  this.start = calendar.msToMoment(dateProfile.activeUnzonedRange.startMs, dateProfile.isRangeAllDay)\r\n  this.end = calendar.msToMoment(dateProfile.activeUnzonedRange.endMs, dateProfile.isRangeAllDay)\r\n  this.intervalStart = calendar.msToMoment(dateProfile.currentUnzonedRange.startMs, dateProfile.isRangeAllDay)\r\n  this.intervalEnd = calendar.msToMoment(dateProfile.currentUnzonedRange.endMs, dateProfile.isRangeAllDay)\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/View.ts","import * as $ from 'jquery'\nimport { compareByFieldSpecs, proxy } from '../../util'\nexport default class EventRenderer {\n\n  view: any\n  component: any\n  fillRenderer: any // might remain null\n\n  fgSegs: any\n  bgSegs: any\n\n  // derived from options\n  eventTimeFormat: any\n  displayEventTime: any\n  displayEventEnd: any\n\n\n  constructor(component, fillRenderer) { // fillRenderer is optional\n    this.view = component._getView()\n    this.component = component\n    this.fillRenderer = fillRenderer\n  }\n\n\n  opt(name) {\n    return this.view.opt(name)\n  }\n\n\n  // Updates values that rely on options and also relate to range\n  rangeUpdated() {\n    let displayEventTime\n    let displayEventEnd\n\n    this.eventTimeFormat =\n      this.opt('eventTimeFormat') ||\n      this.opt('timeFormat') || // deprecated\n      this.computeEventTimeFormat()\n\n    displayEventTime = this.opt('displayEventTime')\n    if (displayEventTime == null) {\n      displayEventTime = this.computeDisplayEventTime() // might be based off of range\n    }\n\n    displayEventEnd = this.opt('displayEventEnd')\n    if (displayEventEnd == null) {\n      displayEventEnd = this.computeDisplayEventEnd() // might be based off of range\n    }\n\n    this.displayEventTime = displayEventTime\n    this.displayEventEnd = displayEventEnd\n  }\n\n\n  render(eventsPayload) {\n    $('#basicViewEventList').remove()\n    let dateProfile = this.component._getDateProfile()\n    let eventDefId\n    let instanceGroup\n    let eventRanges\n    let bgRanges = []\n    let fgRanges = []\n\n    for (eventDefId in eventsPayload) {\n      instanceGroup = eventsPayload[eventDefId]\n      eventRanges = instanceGroup.sliceRenderRanges(\n        dateProfile.activeUnzonedRange\n      )\n      // for (let eventRange in eventRanges) {\n      //   if (eventRanges[eventRange].eventInstance.def.dateProfile.end) {\n      //     let eventStartDate = eventRanges[eventRange].eventInstance.def.dateProfile.start\n      //     let eventEndDate = eventRanges[eventRange].eventInstance.def.dateProfile.end\n      //     let eventDiffDate = eventEndDate.diff(eventStartDate, 'days')\n      //     if (eventDiffDate > 0) {\n      //       for (let i = 1; i <= eventDiffDate - 1; i++) {\n      //         if (instanceGroup.getEventDef().hasBgRendering()) {\n      //           bgRanges.push.apply(bgRanges, eventRanges)\n      //         } else {\n      //           fgRanges.push.apply(fgRanges, eventRanges)\n      //         }\n\n      //       }\n      //     } else {\n\n      //     }\n      //   }\n      // }\n\n      if (instanceGroup.getEventDef().hasBgRendering()) {\n        bgRanges.push.apply(bgRanges, eventRanges)\n      } else {\n        fgRanges.push.apply(fgRanges, eventRanges)\n      }\n      // if ( eventRanges.eventInstance.def.dateProfile.end ) {\n      //   console.log(moment().diff(eventRanges.eventInstance.def.dateProfile.start, eventRanges.eventInstance.def.dateProfile.end))\n      // }\n      // if (instanceGroup.getEventDef().hasBgRendering()) {\n      //   bgRanges.push.apply(bgRanges, eventRanges)\n      // } else {\n      //   fgRanges.push.apply(fgRanges, eventRanges)\n      // }\n    }\n    console.log(fgRanges)\n    // if ( this.view.type === 'listWeek' && this.view.subType === 'day') {\n    // for (let fgRange in fgRanges) {\n    //   if (fgRanges[fgRange].eventInstance.def.dateProfile.end) {\n    //     let eventStartDate = fgRanges[fgRange].eventInstance.def.dateProfile.start\n    //     let eventEndDate = fgRanges[fgRange].eventInstance.def.dateProfile.end\n    //     let eventDiffDate = eventEndDate.diff(eventStartDate, 'days')\n    //     if (eventDiffDate > 0) {\n    //       for (let i = 1; i <= eventDiffDate - 1; i++) {\n    //         let eventDate = JSON.parse(JSON.stringify(eventStartDate))\n    //         eventDate = moment(eventDate)\n    //         let sameEventForNextDate = eventDate.set('date', eventDate.get('date') + i)\n    //         fgRanges.push()\n    //       }\n    //     }\n    //     fgRanges[fgRange].eventInstance.def.dateProfile.end = null\n    //   }\n    // if(fgRanges[fgRange].eventInstance.def.dateProfile.start.format('YYYY-MM-DD'))\n    // console.log(fgRanges[fgRange].eventInstance.def.dateProfile.start.format('YYYY-MM-DD'))\n    // }\n    // }\n    this.renderBgRanges(bgRanges)\n    this.renderFgRanges(fgRanges)\n    if (this.view.type === 'month' && window['isMobile']) {\n      setTimeout(() => {\n        this.setListCardEvent(fgRanges, $('td .fc-day.fc-today').data('date'))\n      }, 100)\n      let eventRenderer = this\n      $('td .fc-day').click(function (ev: any) {\n        $('.fc-day-active').remove()\n        // $('td .fc-day').removeClass('fc-day-active')\n        if (!$(this).hasClass('fc-today')) {\n          $(this).html('<div class=\"fc-day-active\"></div>')\n          // $(this).addClass('fc-day-active')\n        }\n        eventRenderer.setListCardEvent(fgRanges, ev.target.dataset.date.toString())\n      })\n    }\n    // let eventFootprints = this.component.eventRangesToEventFootprints(fgRanges[0])\n    // let segs = this.component.eventFootprintsToSegs(eventFootprints)\n    // // console.log(segs[0].footprint.getEventLegacy())\n    // console.log(segs)\n\n  }\n  setListCardEvent(fgRanges, targetDate) {\n    let eventFootprints = this.component.eventRangesToEventFootprints(fgRanges)\n    let segs = this.component.eventFootprintsToSegs(eventFootprints)\n    let htmlBasicViewEventList = ''\n    for (let fgRange in fgRanges) {\n      // tslint:disable-next-line:radix\n      let seg = segs[parseInt(fgRange)].footprint.getEventLegacy()\n      let eventStartDate = seg.start\n      let eventEndDate = null\n      if (seg.backupEnd) {\n        eventEndDate = seg.backupEnd\n      }\n      if (eventStartDate.format('YYYY-MM-DD') === targetDate) {\n        let startDate = eventStartDate\n        let endDate = eventEndDate\n        if (this.view.calendar.optionsManager.overrides.locale === 'th') {\n          startDate = startDate.set('year', startDate.get('year') + 543).format('MMM/DD/YYYY HH:mm')\n          endDate = endDate.set('year', endDate.get('year') + 543).format('MMM/DD/YYYY HH:mm')\n        } else {\n          startDate = eventStartDate.format('MMM/DD/YYYY HH:mm')\n          endDate = eventEndDate.format('MMM/DD/YYYY HH:mm')\n        }\n        console.log(eventStartDate)\n        // if(eventStartDate.format('HH:mm')) //eventEndDate\n        htmlBasicViewEventList += '<div class=\"eventCard\">' + '<div id=\"' + fgRange + '\" class=\"eventBox\"></div>' + '<div class=\"statBarEventList\"><span>' + eventStartDate.format('DD') + '</span></div>' + '<span class=\"eventCardTitle\">' + fgRanges[fgRange].eventDef.title + '</span>' + '<span class=\"eventCardTime\">' + '' + '</span>' + '<span class=\"eventCardDetail\">' + startDate + ' - ' + endDate + '</span>' + '</div>'\n      }\n    }\n\n    if (!htmlBasicViewEventList) {\n      htmlBasicViewEventList += '<div class=\"noEvent\">' + ' <div class=\"noEventImg\">  </div>' + ' No events to display ' + '</div>'\n    }\n    $('#basicViewEventList').remove()\n    $('.fc-basic-view')\n      .after('<div id=\"basicViewEventList\">' + htmlBasicViewEventList + '</div>')\n    $('.eventBox').on('click', function (e) {\n      // tslint:disable-next-line:radix\n      let seg = segs[parseInt(e.target.id)]\n      let modifySeg = seg.footprint.getEventLegacy()\n      modifySeg.end = modifySeg.backupEnd\n      delete modifySeg.backupEnd\n      this.component.publiclyTrigger('eventClick', { // can return `false` to cancel\n        context: e,\n        args: [modifySeg, e, this.view]\n      })\n    }.bind(this))\n  }\n\n\n  unrender() {\n    this.unrenderBgRanges()\n    this.unrenderFgRanges()\n  }\n\n\n  renderFgRanges(eventRanges) {\n    let eventFootprints = this.component.eventRangesToEventFootprints(eventRanges)\n    let segs = this.component.eventFootprintsToSegs(eventFootprints)\n    console.log(segs)\n    // render an `.el` on each seg\n    // returns a subset of the segs. segs that were actually rendered\n    segs = this.renderFgSegEls(segs)\n\n    if (this.renderFgSegs(segs) !== false) { // no failure?\n      this.fgSegs = segs\n    }\n\n  }\n\n\n  unrenderFgRanges() {\n    this.unrenderFgSegs(this.fgSegs || [])\n    this.fgSegs = null\n  }\n\n\n  renderBgRanges(eventRanges) {\n    let eventFootprints = this.component.eventRangesToEventFootprints(eventRanges)\n    let segs = this.component.eventFootprintsToSegs(eventFootprints)\n\n    if (this.renderBgSegs(segs) !== false) { // no failure?\n      this.bgSegs = segs\n    }\n  }\n\n\n  unrenderBgRanges() {\n    this.unrenderBgSegs()\n    this.bgSegs = null\n  }\n\n\n  getSegs() {\n    return (this.bgSegs || []).concat(this.fgSegs || [])\n  }\n\n\n  // Renders foreground event segments onto the grid\n  renderFgSegs(segs): (boolean | void) {\n    // subclasses must implement\n    // segs already has rendered els, and has been filtered.\n\n    return false // signal failure if not implemented\n  }\n\n\n  // Unrenders all currently rendered foreground segments\n  unrenderFgSegs(segs) {\n    // subclasses must implement\n  }\n\n\n  renderBgSegs(segs) {\n    if (this.fillRenderer) {\n      this.fillRenderer.renderSegs('bgEvent', segs, {\n        getClasses: (seg) => {\n          return this.getBgClasses(seg.footprint.eventDef)\n        },\n        getCss: (seg) => {\n          return {\n            'background-color': this.getBgColor(seg.footprint.eventDef)\n          }\n        },\n        filterEl: (seg, el) => {\n          return this.filterEventRenderEl(seg.footprint, el)\n        }\n      })\n    } else {\n      return false // signal failure if no fillRenderer\n    }\n  }\n\n\n  unrenderBgSegs() {\n    if (this.fillRenderer) {\n      this.fillRenderer.unrender('bgEvent')\n    }\n  }\n\n\n  // Renders and assigns an `el` property for each foreground event segment.\n  // Only returns segments that successfully rendered.\n  renderFgSegEls(segs, disableResizing = false) {\n    let hasEventRenderHandlers = this.view.hasPublicHandlers('eventRender')\n    let html = ''\n    let renderedSegs = []\n    let i\n\n    if (segs.length) { // don't build an empty html string\n\n      // build a large concatenation of event segment HTML\n      for (i = 0; i < segs.length; i++) {\n        this.beforeFgSegHtml(segs[i])\n        html += this.fgSegHtml(segs[i], disableResizing)\n      }\n      // Grab individual elements from the combined HTML string. Use each as the default rendering.\n      // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n      $(html).each((i, node) => {\n        let seg = segs[i]\n        let el = $(node)\n        if (hasEventRenderHandlers) { // optimization\n          el = this.filterEventRenderEl(seg.footprint, el)\n        }\n\n        if (el) {\n          el.data('fc-seg', seg) // used by handlers\n          seg.el = el\n          renderedSegs.push(seg)\n        }\n      })\n    }\n\n    return renderedSegs\n  }\n\n\n  beforeFgSegHtml(seg) { // hack\n  }\n\n\n  // Generates the HTML for the default rendering of a foreground event segment. Used by renderFgSegEls()\n  fgSegHtml(seg, disableResizing) {\n    // subclasses should implement\n  }\n\n\n  // Generic utility for generating the HTML classNames for an event segment's element\n  getSegClasses(seg, isDraggable, isResizable) {\n    let classes = [\n      'fc-event',\n      seg.isStart ? 'fc-start' : 'fc-not-start',\n      seg.isEnd ? 'fc-end' : 'fc-not-end'\n    ].concat(this.getClasses(seg.footprint.eventDef))\n\n    if (isDraggable) {\n      classes.push('fc-draggable')\n    }\n    if (isResizable) {\n      classes.push('fc-resizable')\n    }\n\n    // event is currently selected? attach a className.\n    if (this.view.isEventDefSelected(seg.footprint.eventDef)) {\n      classes.push('fc-selected')\n    }\n\n    return classes\n  }\n\n\n  // Given an event and the default element used for rendering, returns the element that should actually be used.\n  // Basically runs events and elements through the eventRender hook.\n  filterEventRenderEl(eventFootprint, el) {\n    let legacy = eventFootprint.getEventLegacy()\n\n    let custom = this.view.publiclyTrigger('eventRender', {\n      context: legacy,\n      args: [legacy, el, this.view]\n    })\n\n    if (custom === false) { // means don't render at all\n      el = null\n    } else if (custom && custom !== true) {\n      el = $(custom)\n    }\n\n    return el\n  }\n\n\n  // Compute the text that should be displayed on an event's element.\n  // `range` can be the Event object itself, or something range-like, with at least a `start`.\n  // If event times are disabled, or the event has no time, will return a blank string.\n  // If not specified, formatStr will default to the eventTimeFormat setting,\n  // and displayEnd will default to the displayEventEnd setting.\n  getTimeText(eventFootprint, formatStr?, displayEnd?) {\n    return this._getTimeText(\n      eventFootprint.eventInstance.dateProfile.start,\n      eventFootprint.eventInstance.dateProfile.end,\n      eventFootprint.componentFootprint.isAllDay,\n      formatStr,\n      displayEnd\n    )\n  }\n\n\n  _getTimeText(start, end, isAllDay, formatStr?, displayEnd?) {\n    if (formatStr == null) {\n      formatStr = this.eventTimeFormat\n    }\n\n    if (displayEnd == null) {\n      displayEnd = this.displayEventEnd\n    }\n\n    if (this.displayEventTime && !isAllDay) {\n      if (displayEnd && end) {\n        return this.view.formatRange(\n          { start: start, end: end },\n          false, // allDay\n          formatStr\n        )\n      } else {\n        return start.format(formatStr)\n      }\n    }\n\n    return ''\n  }\n\n\n  computeEventTimeFormat() {\n    return this.opt('smallTimeFormat')\n  }\n\n\n  computeDisplayEventTime() {\n    return true\n  }\n\n\n  computeDisplayEventEnd() {\n    return true\n  }\n\n\n  getBgClasses(eventDef) {\n    let classNames = this.getClasses(eventDef)\n    classNames.push('fc-bgevent')\n    return classNames\n  }\n\n\n  getClasses(eventDef) {\n    let objs = this.getStylingObjs(eventDef)\n    let i\n    let classNames = []\n\n    for (i = 0; i < objs.length; i++) {\n      classNames.push.apply( // append\n        classNames,\n        objs[i].eventClassName || objs[i].className || []\n      )\n    }\n\n    return classNames\n  }\n\n\n  // Utility for generating event skin-related CSS properties\n  getSkinCss(eventDef) {\n    return {\n      'background-color': this.getBgColor(eventDef),\n      'border-color': this.getBorderColor(eventDef),\n      color: this.getTextColor(eventDef)\n    }\n  }\n\n\n  // Queries for caller-specified color, then falls back to default\n  getBgColor(eventDef) {\n    let objs = this.getStylingObjs(eventDef)\n    let i\n    let val\n\n    for (i = 0; i < objs.length && !val; i++) {\n      val = objs[i].eventBackgroundColor || objs[i].eventColor ||\n        objs[i].backgroundColor || objs[i].color\n    }\n\n    if (!val) {\n      val = this.opt('eventBackgroundColor') || this.opt('eventColor')\n    }\n\n    return val\n  }\n\n\n  // Queries for caller-specified color, then falls back to default\n  getBorderColor(eventDef) {\n    let objs = this.getStylingObjs(eventDef)\n    let i\n    let val\n\n    for (i = 0; i < objs.length && !val; i++) {\n      val = objs[i].eventBorderColor || objs[i].eventColor ||\n        objs[i].borderColor || objs[i].color\n    }\n\n    if (!val) {\n      val = this.opt('eventBorderColor') || this.opt('eventColor')\n    }\n\n    return val\n  }\n\n\n  // Queries for caller-specified color, then falls back to default\n  getTextColor(eventDef) {\n    let objs = this.getStylingObjs(eventDef)\n    let i\n    let val\n\n    for (i = 0; i < objs.length && !val; i++) {\n      val = objs[i].eventTextColor ||\n        objs[i].textColor\n    }\n\n    if (!val) {\n      val = this.opt('eventTextColor')\n    }\n\n    return val\n  }\n\n\n  getStylingObjs(eventDef) {\n    let objs = this.getFallbackStylingObjs(eventDef)\n    objs.unshift(eventDef)\n    return objs\n  }\n\n\n  getFallbackStylingObjs(eventDef) {\n    return [eventDef.source]\n  }\n\n\n  sortEventSegs(segs) {\n    segs.sort(proxy(this, 'compareEventSegs'))\n  }\n\n\n  // A cmp function for determining which segments should take visual priority\n  compareEventSegs(seg1, seg2) {\n    let f1 = seg1.footprint\n    let f2 = seg2.footprint\n    let cf1 = f1.componentFootprint\n    let cf2 = f2.componentFootprint\n    let r1 = cf1.unzonedRange\n    let r2 = cf2.unzonedRange\n\n    return r1.startMs - r2.startMs || // earlier events go first\n      (r2.endMs - r2.startMs) - (r1.endMs - r1.startMs) || // tie? longer events go first\n      cf2.isAllDay - cf1.isAllDay || // tie? put all-day events first (booleans cast to 0/1)\n      compareByFieldSpecs(\n        f1.eventDef,\n        f2.eventDef,\n        this.view.eventOrderSpecs,\n        f1.eventDef.miscProps,\n        f2.eventDef.miscProps\n      )\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/renderers/EventRenderer.ts","import {\r\n  default as momentExt,\r\n  newMomentProto,\r\n  oldMomentProto,\r\n  oldMomentFormat\r\n} from './moment-ext'\r\n\r\n\r\n// Plugin\r\n// -------------------------------------------------------------------------------------------------\r\n\r\nnewMomentProto.format = function() {\r\n\r\n  if (this._fullCalendar && arguments[0]) { // an enhanced moment? and a format string provided?\r\n    return formatDate(this, arguments[0]) // our extended formatting\r\n  }\r\n  if (this._ambigTime) {\r\n    return oldMomentFormat(englishMoment(this), 'YYYY-MM-DD')\r\n  }\r\n  if (this._ambigZone) {\r\n    return oldMomentFormat(englishMoment(this), 'YYYY-MM-DD[T]HH:mm:ss')\r\n  }\r\n  if (this._fullCalendar) { // enhanced non-ambig moment?\r\n    // moment.format() doesn't ensure english, but we want to.\r\n    return oldMomentFormat(englishMoment(this))\r\n  }\r\n\r\n  return oldMomentProto.format.apply(this, arguments)\r\n}\r\n\r\nnewMomentProto.toISOString = function() {\r\n\r\n  if (this._ambigTime) {\r\n    return oldMomentFormat(englishMoment(this), 'YYYY-MM-DD')\r\n  }\r\n  if (this._ambigZone) {\r\n    return oldMomentFormat(englishMoment(this), 'YYYY-MM-DD[T]HH:mm:ss')\r\n  }\r\n  if (this._fullCalendar) { // enhanced non-ambig moment?\r\n    // depending on browser, moment might not output english. ensure english.\r\n    // https://github.com/moment/moment/blob/2.18.1/src/lib/moment/format.js#L22\r\n    return oldMomentProto.toISOString.apply(englishMoment(this), arguments)\r\n  }\r\n\r\n  return oldMomentProto.toISOString.apply(this, arguments)\r\n}\r\n\r\nfunction englishMoment(mom) {\r\n  if (mom.locale() !== 'en') {\r\n    return mom.clone().locale('en')\r\n  }\r\n  return mom\r\n}\r\n\r\n\r\n// Config\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n/*\r\nInserted between chunks in the fake (\"intermediate\") formatting string.\r\nImportant that it passes as whitespace (\\s) because moment often identifies non-standalone months\r\nvia a regexp with an \\s.\r\n*/\r\nlet PART_SEPARATOR = '\\u000b' // vertical tab\r\n\r\n/*\r\nInserted as the first character of a literal-text chunk to indicate that the literal text is not actually literal text,\r\nbut rather, a \"special\" token that has custom rendering (see specialTokens map).\r\n*/\r\nlet SPECIAL_TOKEN_MARKER = '\\u001f' // information separator 1\r\n\r\n/*\r\nInserted at the beginning and end of a span of text that must have non-zero numeric characters.\r\nHandling of these markers is done in a post-processing step at the very end of text rendering.\r\n*/\r\nlet MAYBE_MARKER = '\\u001e' // information separator 2\r\nlet MAYBE_REGEXP = new RegExp(MAYBE_MARKER + '([^' + MAYBE_MARKER + ']*)' + MAYBE_MARKER, 'g') // must be global\r\n\r\n/*\r\nAddition formatting tokens we want recognized\r\n*/\r\nlet specialTokens = {\r\n  t: function(date) { // \"a\" or \"p\"\r\n    return oldMomentFormat(date, 'a').charAt(0)\r\n  },\r\n  T: function(date) { // \"A\" or \"P\"\r\n    return oldMomentFormat(date, 'A').charAt(0)\r\n  }\r\n}\r\n\r\n/*\r\nThe first characters of formatting tokens for units that are 1 day or larger.\r\n`value` is for ranking relative size (lower means bigger).\r\n`unit` is a normalized unit, used for comparing moments.\r\n*/\r\nlet largeTokenMap = {\r\n  Y: { value: 1, unit: 'year' },\r\n  M: { value: 2, unit: 'month' },\r\n  W: { value: 3, unit: 'week' }, // ISO week\r\n  w: { value: 3, unit: 'week' }, // local week\r\n  D: { value: 4, unit: 'day' }, // day of month\r\n  d: { value: 4, unit: 'day' } // day of week\r\n}\r\n\r\n\r\n// Single Date Formatting\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n/*\r\nFormats `date` with a Moment formatting string, but allow our non-zero areas and special token\r\n*/\r\nexport function formatDate(date, formatStr) {\r\n  return renderFakeFormatString(\r\n    getParsedFormatString(formatStr).fakeFormatString,\r\n    date\r\n  )\r\n}\r\n\r\n\r\n// Date Range Formatting\r\n// -------------------------------------------------------------------------------------------------\r\n// TODO: make it work with timezone offset\r\n\r\n/*\r\nUsing a formatting string meant for a single date, generate a range string, like\r\n\"Sep 2 - 9 2013\", that intelligently inserts a separator where the dates differ.\r\nIf the dates are the same as far as the format string is concerned, just return a single\r\nrendering of one date, without any separator.\r\n*/\r\nexport function formatRange(date1, date2, formatStr, separator, isRTL) {\r\n  let localeData\r\n\r\n  date1 = momentExt.parseZone(date1)\r\n  date2 = momentExt.parseZone(date2)\r\n\r\n  localeData = date1.localeData()\r\n\r\n  // Expand localized format strings, like \"LL\" -> \"MMMM D YYYY\".\r\n  // BTW, this is not important for `formatDate` because it is impossible to put custom tokens\r\n  // or non-zero areas in Moment's localized format strings.\r\n  formatStr = localeData.longDateFormat(formatStr) || formatStr\r\n\r\n  return renderParsedFormat(\r\n    getParsedFormatString(formatStr),\r\n    date1,\r\n    date2,\r\n    separator || ' - ',\r\n    isRTL\r\n  )\r\n}\r\n\r\n/*\r\nRenders a range with an already-parsed format string.\r\n*/\r\nfunction renderParsedFormat(parsedFormat, date1, date2, separator, isRTL) {\r\n  let sameUnits = parsedFormat.sameUnits\r\n  let unzonedDate1 = date1.clone().stripZone() // for same-unit comparisons\r\n  let unzonedDate2 = date2.clone().stripZone() // \"\r\n\r\n  let renderedParts1 = renderFakeFormatStringParts(parsedFormat.fakeFormatString, date1)\r\n  let renderedParts2 = renderFakeFormatStringParts(parsedFormat.fakeFormatString, date2)\r\n\r\n  let leftI\r\n  let leftStr = ''\r\n  let rightI\r\n  let rightStr = ''\r\n  let middleI\r\n  let middleStr1 = ''\r\n  let middleStr2 = ''\r\n  let middleStr = ''\r\n\r\n  // Start at the leftmost side of the formatting string and continue until you hit a token\r\n  // that is not the same between dates.\r\n  for (\r\n    leftI = 0;\r\n    leftI < sameUnits.length && (!sameUnits[leftI] || unzonedDate1.isSame(unzonedDate2, sameUnits[leftI]));\r\n    leftI++\r\n  ) {\r\n    leftStr += renderedParts1[leftI]\r\n  }\r\n\r\n  // Similarly, start at the rightmost side of the formatting string and move left\r\n  for (\r\n    rightI = sameUnits.length - 1;\r\n    rightI > leftI && (!sameUnits[rightI] || unzonedDate1.isSame(unzonedDate2, sameUnits[rightI]));\r\n    rightI--\r\n  ) {\r\n    // If current chunk is on the boundary of unique date-content, and is a special-case\r\n    // date-formatting postfix character, then don't consume it. Consider it unique date-content.\r\n    // TODO: make configurable\r\n    if (rightI - 1 === leftI && renderedParts1[rightI] === '.') {\r\n      break\r\n    }\r\n\r\n    rightStr = renderedParts1[rightI] + rightStr\r\n  }\r\n\r\n  // The area in the middle is different for both of the dates.\r\n  // Collect them distinctly so we can jam them together later.\r\n  for (middleI = leftI; middleI <= rightI; middleI++) {\r\n    middleStr1 += renderedParts1[middleI]\r\n    middleStr2 += renderedParts2[middleI]\r\n  }\r\n\r\n  if (middleStr1 || middleStr2) {\r\n    if (isRTL) {\r\n      middleStr = middleStr2 + separator + middleStr1\r\n    } else {\r\n      middleStr = middleStr1 + separator + middleStr2\r\n    }\r\n  }\r\n\r\n  return processMaybeMarkers(\r\n    leftStr + middleStr + rightStr\r\n  )\r\n}\r\n\r\n\r\n// Format String Parsing\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\nlet parsedFormatStrCache = {}\r\n\r\n/*\r\nReturns a parsed format string, leveraging a cache.\r\n*/\r\nfunction getParsedFormatString(formatStr) {\r\n  return parsedFormatStrCache[formatStr] ||\r\n    (parsedFormatStrCache[formatStr] = parseFormatString(formatStr))\r\n}\r\n\r\n/*\r\nParses a format string into the following:\r\n- fakeFormatString: a momentJS formatting string, littered with special control characters that get post-processed.\r\n- sameUnits: for every part in fakeFormatString, if the part is a token, the value will be a unit string (like \"day\"),\r\n  that indicates how similar a range's start & end must be in order to share the same formatted text.\r\n  If not a token, then the value is null.\r\n  Always a flat array (not nested liked \"chunks\").\r\n*/\r\nfunction parseFormatString(formatStr) {\r\n  let chunks = chunkFormatString(formatStr)\r\n\r\n  return {\r\n    fakeFormatString: buildFakeFormatString(chunks),\r\n    sameUnits: buildSameUnits(chunks)\r\n  }\r\n}\r\n\r\n/*\r\nBreak the formatting string into an array of chunks.\r\nA 'maybe' chunk will have nested chunks.\r\n*/\r\nfunction chunkFormatString(formatStr) {\r\n  let chunks = []\r\n  let match\r\n\r\n  // TODO: more descrimination\r\n  // \\4 is a backreference to the first character of a multi-character set.\r\n  let chunker = /\\[([^\\]]*)\\]|\\(([^\\)]*)\\)|(LTS|LT|(\\w)\\4*o?)|([^\\w\\[\\(]+)/g\r\n\r\n  while ((match = chunker.exec(formatStr))) {\r\n    if (match[1]) { // a literal string inside [ ... ]\r\n      chunks.push.apply(chunks, // append\r\n        splitStringLiteral(match[1])\r\n      )\r\n    } else if (match[2]) { // non-zero formatting inside ( ... )\r\n      chunks.push({ maybe: chunkFormatString(match[2]) })\r\n    } else if (match[3]) { // a formatting token\r\n      chunks.push({ token: match[3] })\r\n    } else if (match[5]) { // an unenclosed literal string\r\n      chunks.push.apply(chunks, // append\r\n        splitStringLiteral(match[5])\r\n      )\r\n    }\r\n  }\r\n\r\n  return chunks\r\n}\r\n\r\n/*\r\nPotentially splits a literal-text string into multiple parts. For special cases.\r\n*/\r\nfunction splitStringLiteral(s) {\r\n  if (s === '. ') {\r\n    return [ '.', ' ' ] // for locales with periods bound to the end of each year/month/date\r\n  } else {\r\n    return [ s ]\r\n  }\r\n}\r\n\r\n/*\r\nGiven chunks parsed from a real format string, generate a fake (aka \"intermediate\") format string with special control\r\ncharacters that will eventually be given to moment for formatting, and then post-processed.\r\n*/\r\nfunction buildFakeFormatString(chunks) {\r\n  let parts = []\r\n  let i\r\n  let chunk\r\n\r\n  for (i = 0; i < chunks.length; i++) {\r\n    chunk = chunks[i]\r\n\r\n    if (typeof chunk === 'string') {\r\n      parts.push('[' + chunk + ']')\r\n    } else if (chunk.token) {\r\n      if (chunk.token in specialTokens) {\r\n        parts.push(\r\n          SPECIAL_TOKEN_MARKER + // useful during post-processing\r\n          '[' + chunk.token + ']' // preserve as literal text\r\n        )\r\n      } else {\r\n        parts.push(chunk.token) // unprotected text implies a format string\r\n      }\r\n    } else if (chunk.maybe) {\r\n      parts.push(\r\n        MAYBE_MARKER + // useful during post-processing\r\n        buildFakeFormatString(chunk.maybe) +\r\n        MAYBE_MARKER\r\n      )\r\n    }\r\n  }\r\n\r\n  return parts.join(PART_SEPARATOR)\r\n}\r\n\r\n/*\r\nGiven parsed chunks from a real formatting string, generates an array of unit strings (like \"day\") that indicate\r\nin which regard two dates must be similar in order to share range formatting text.\r\nThe `chunks` can be nested (because of \"maybe\" chunks), however, the returned array will be flat.\r\n*/\r\nfunction buildSameUnits(chunks) {\r\n  let units = []\r\n  let i\r\n  let chunk\r\n  let tokenInfo\r\n\r\n  for (i = 0; i < chunks.length; i++) {\r\n    chunk = chunks[i]\r\n\r\n    if (chunk.token) {\r\n      tokenInfo = largeTokenMap[chunk.token.charAt(0)]\r\n      units.push(tokenInfo ? tokenInfo.unit : 'second') // default to a very strict same-second\r\n    } else if (chunk.maybe) {\r\n      units.push.apply(units, // append\r\n        buildSameUnits(chunk.maybe)\r\n      )\r\n    } else {\r\n      units.push(null)\r\n    }\r\n  }\r\n\r\n  return units\r\n}\r\n\r\n\r\n// Rendering to text\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n/*\r\nFormats a date with a fake format string, post-processes the control characters, then returns.\r\n*/\r\nfunction renderFakeFormatString(fakeFormatString, date) {\r\n  return processMaybeMarkers(\r\n    renderFakeFormatStringParts(fakeFormatString, date).join('')\r\n  )\r\n}\r\n\r\n/*\r\nFormats a date into parts that will have been post-processed, EXCEPT for the \"maybe\" markers.\r\n*/\r\nfunction renderFakeFormatStringParts(fakeFormatString, date) {\r\n  let parts = []\r\n  let fakeRender = oldMomentFormat(date, fakeFormatString)\r\n  let fakeParts = fakeRender.split(PART_SEPARATOR)\r\n  let i\r\n  let fakePart\r\n\r\n  for (i = 0; i < fakeParts.length; i++) {\r\n    fakePart = fakeParts[i]\r\n\r\n    if (fakePart.charAt(0) === SPECIAL_TOKEN_MARKER) {\r\n      parts.push(\r\n        // the literal string IS the token's name.\r\n        // call special token's registered function.\r\n        specialTokens[fakePart.substring(1)](date)\r\n      )\r\n    } else {\r\n      parts.push(fakePart)\r\n    }\r\n  }\r\n\r\n  return parts\r\n}\r\n\r\n/*\r\nAccepts an almost-finally-formatted string and processes the \"maybe\" control characters, returning a new string.\r\n*/\r\nfunction processMaybeMarkers(s) {\r\n  return s.replace(MAYBE_REGEXP, function(m0, m1) { // regex assumed to have 'g' flag\r\n    if (m1.match(/[1-9]/)) { // any non-zero numeric characters?\r\n      return m1\r\n    } else {\r\n      return ''\r\n    }\r\n  })\r\n}\r\n\r\n\r\n// Misc Utils\r\n// -------------------------------------------------------------------------------------------------\r\n\r\n/*\r\nReturns a unit string, either 'year', 'month', 'day', or null for the most granular formatting token in the string.\r\n*/\r\nexport function queryMostGranularFormatUnit(formatStr) {\r\n  let chunks = chunkFormatString(formatStr)\r\n  let i\r\n  let chunk\r\n  let candidate\r\n  let best\r\n\r\n  for (i = 0; i < chunks.length; i++) {\r\n    chunk = chunks[i]\r\n\r\n    if (chunk.token) {\r\n      candidate = largeTokenMap[chunk.token.charAt(0)]\r\n      if (candidate) {\r\n        if (!best || candidate.value > best.value) {\r\n          best = candidate\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (best) {\r\n    return best.unit\r\n  }\r\n\r\n  return null\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/date-formatting.ts","import Class from './Class'\r\nimport { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\r\nimport { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\n\r\n\r\nexport default class Model extends Class {\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  _props: any\r\n  _watchers: any\r\n  _globalWatchArgs: any // initialized after class\r\n\r\n  constructor() {\r\n    super()\r\n    this._watchers = {}\r\n    this._props = {}\r\n    this.applyGlobalWatchers()\r\n    this.constructed()\r\n  }\r\n\r\n  static watch(name, ...args) {\r\n    // subclasses should make a masked-copy of the superclass's map\r\n    // TODO: write test\r\n    if (!this.prototype.hasOwnProperty('_globalWatchArgs')) {\r\n      this.prototype._globalWatchArgs = Object.create(this.prototype._globalWatchArgs)\r\n    }\r\n\r\n    this.prototype._globalWatchArgs[name] = args\r\n  }\r\n\r\n  constructed() {\r\n    // useful for monkeypatching. TODO: BaseClass?\r\n  }\r\n\r\n  applyGlobalWatchers() {\r\n    let map = this._globalWatchArgs\r\n    let name\r\n\r\n    for (name in map) {\r\n      this.watch.apply(this, [ name ].concat(map[name]))\r\n    }\r\n  }\r\n\r\n  has(name) {\r\n    return name in this._props\r\n  }\r\n\r\n  get(name) {\r\n    if (name === undefined) {\r\n      return this._props\r\n    }\r\n\r\n    return this._props[name]\r\n  }\r\n\r\n  set(name, val) {\r\n    let newProps\r\n\r\n    if (typeof name === 'string') {\r\n      newProps = {}\r\n      newProps[name] = val === undefined ? null : val\r\n    } else {\r\n      newProps = name\r\n    }\r\n\r\n    this.setProps(newProps)\r\n  }\r\n\r\n  reset(newProps) {\r\n    let oldProps = this._props\r\n    let changeset = {} // will have undefined's to signal unsets\r\n    let name\r\n\r\n    for (name in oldProps) {\r\n      changeset[name] = undefined\r\n    }\r\n\r\n    for (name in newProps) {\r\n      changeset[name] = newProps[name]\r\n    }\r\n\r\n    this.setProps(changeset)\r\n  }\r\n\r\n  unset(name) { // accepts a string or array of strings\r\n    let newProps = {}\r\n    let names\r\n    let i\r\n\r\n    if (typeof name === 'string') {\r\n      names = [ name ]\r\n    } else {\r\n      names = name\r\n    }\r\n\r\n    for (i = 0; i < names.length; i++) {\r\n      newProps[names[i]] = undefined\r\n    }\r\n\r\n    this.setProps(newProps)\r\n  }\r\n\r\n  setProps(newProps) {\r\n    let changedProps = {}\r\n    let changedCnt = 0\r\n    let name\r\n    let val\r\n\r\n    for (name in newProps) {\r\n      val = newProps[name]\r\n\r\n      // a change in value?\r\n      // if an object, don't check equality, because might have been mutated internally.\r\n      // TODO: eventually enforce immutability.\r\n      if (\r\n        typeof val === 'object' ||\r\n        val !== this._props[name]\r\n      ) {\r\n        changedProps[name] = val\r\n        changedCnt++\r\n      }\r\n    }\r\n\r\n    if (changedCnt) {\r\n\r\n      this.trigger('before:batchChange', changedProps)\r\n\r\n      for (name in changedProps) {\r\n        val = changedProps[name]\r\n\r\n        this.trigger('before:change', name, val)\r\n        this.trigger('before:change:' + name, val)\r\n      }\r\n\r\n      for (name in changedProps) {\r\n        val = changedProps[name]\r\n\r\n        if (val === undefined) {\r\n          delete this._props[name]\r\n        } else {\r\n          this._props[name] = val\r\n        }\r\n\r\n        this.trigger('change:' + name, val)\r\n        this.trigger('change', name, val)\r\n      }\r\n\r\n      this.trigger('batchChange', changedProps)\r\n    }\r\n  }\r\n\r\n  watch(name, depList, startFunc, stopFunc?) {\r\n    this.unwatch(name)\r\n\r\n    this._watchers[name] = this._watchDeps(depList, (deps) => {\r\n      let res = startFunc.call(this, deps)\r\n\r\n      if (res && res.then) {\r\n        this.unset(name) // put in an unset state while resolving\r\n        res.then((val) => {\r\n          this.set(name, val)\r\n        })\r\n      } else {\r\n        this.set(name, res)\r\n      }\r\n    }, (deps) => {\r\n      this.unset(name)\r\n\r\n      if (stopFunc) {\r\n        stopFunc.call(this, deps)\r\n      }\r\n    })\r\n  }\r\n\r\n  unwatch(name) {\r\n    let watcher = this._watchers[name]\r\n\r\n    if (watcher) {\r\n      delete this._watchers[name]\r\n      watcher.teardown()\r\n    }\r\n  }\r\n\r\n  _watchDeps(depList, startFunc, stopFunc) {\r\n    let queuedChangeCnt = 0\r\n    let depCnt = depList.length\r\n    let satisfyCnt = 0\r\n    let values = {} // what's passed as the `deps` arguments\r\n    let bindTuples = [] // array of [ eventName, handlerFunc ] arrays\r\n    let isCallingStop = false\r\n\r\n    const onBeforeDepChange = (depName, val, isOptional) => {\r\n      queuedChangeCnt++\r\n      if (queuedChangeCnt === 1) { // first change to cause a \"stop\" ?\r\n        if (satisfyCnt === depCnt) { // all deps previously satisfied?\r\n          isCallingStop = true\r\n          stopFunc(values)\r\n          isCallingStop = false\r\n        }\r\n      }\r\n    }\r\n\r\n    const onDepChange = (depName, val, isOptional) => {\r\n\r\n      if (val === undefined) { // unsetting a value?\r\n\r\n        // required dependency that was previously set?\r\n        if (!isOptional && values[depName] !== undefined) {\r\n          satisfyCnt--\r\n        }\r\n\r\n        delete values[depName]\r\n      } else { // setting a value?\r\n\r\n        // required dependency that was previously unset?\r\n        if (!isOptional && values[depName] === undefined) {\r\n          satisfyCnt++\r\n        }\r\n\r\n        values[depName] = val\r\n      }\r\n\r\n      queuedChangeCnt--\r\n      if (!queuedChangeCnt) { // last change to cause a \"start\"?\r\n\r\n        // now finally satisfied or satisfied all along?\r\n        if (satisfyCnt === depCnt) {\r\n\r\n          // if the stopFunc initiated another value change, ignore it.\r\n          // it will be processed by another change event anyway.\r\n          if (!isCallingStop) {\r\n            startFunc(values)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // intercept for .on() that remembers handlers\r\n    const bind = (eventName, handler) => {\r\n      this.on(eventName, handler)\r\n      bindTuples.push([ eventName, handler ])\r\n    }\r\n\r\n    // listen to dependency changes\r\n    depList.forEach((depName) => {\r\n      let isOptional = false\r\n\r\n      if (depName.charAt(0) === '?') { // TODO: more DRY\r\n        depName = depName.substring(1)\r\n        isOptional = true\r\n      }\r\n\r\n      bind('before:change:' + depName, function(val) {\r\n        onBeforeDepChange(depName, val, isOptional)\r\n      })\r\n\r\n      bind('change:' + depName, function(val) {\r\n        onDepChange(depName, val, isOptional)\r\n      })\r\n    })\r\n\r\n    // process current dependency values\r\n    depList.forEach((depName) => {\r\n      let isOptional = false\r\n\r\n      if (depName.charAt(0) === '?') { // TODO: more DRY\r\n        depName = depName.substring(1)\r\n        isOptional = true\r\n      }\r\n\r\n      if (this.has(depName)) {\r\n        values[depName] = this.get(depName)\r\n        satisfyCnt++\r\n      } else if (isOptional) {\r\n        satisfyCnt++\r\n      }\r\n    })\r\n\r\n    // initially satisfied\r\n    if (satisfyCnt === depCnt) {\r\n      startFunc(values)\r\n    }\r\n\r\n    return {\r\n      teardown: () => {\r\n        // remove all handlers\r\n        for (let i = 0; i < bindTuples.length; i++) {\r\n          this.off(bindTuples[i][0], bindTuples[i][1])\r\n        }\r\n        bindTuples = null\r\n\r\n        // was satisfied, so call stopFunc\r\n        if (satisfyCnt === depCnt) {\r\n          stopFunc()\r\n        }\r\n      },\r\n      flash: () => {\r\n        if (satisfyCnt === depCnt) {\r\n          stopFunc()\r\n          startFunc(values)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  flash(name) {\r\n    let watcher = this._watchers[name]\r\n\r\n    if (watcher) {\r\n      watcher.flash()\r\n    }\r\n  }\r\n\r\n}\r\n\r\nModel.prototype._globalWatchArgs = {} // mutation protection in Model.watch\r\n\r\nEmitterMixin.mixInto(Model)\r\nListenerMixin.mixInto(Model)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Model.ts","import * as moment from 'moment'\r\nimport { isTimeString } from '../../util'\r\nimport SingleEventDef from './SingleEventDef'\r\nimport RecurringEventDef from './RecurringEventDef'\r\n\r\n\r\nexport default {\r\n\r\n  parse: function(eventInput, source) {\r\n    if (\r\n      isTimeString(eventInput.start) || moment.isDuration(eventInput.start) ||\r\n      isTimeString(eventInput.end) || moment.isDuration(eventInput.end)\r\n    ) {\r\n      return RecurringEventDef.parse(eventInput, source)\r\n    } else {\r\n      return SingleEventDef.parse(eventInput, source)\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventDefParser.ts","import { diffByUnit, diffDay, diffDayTime } from '../../util'\r\nimport EventDateProfile from './EventDateProfile'\r\n\r\n\r\nexport default class EventDefDateMutation {\r\n\r\n  clearEnd: boolean = false\r\n  forceTimed: boolean = false\r\n  forceAllDay: boolean = false\r\n\r\n  // Durations. if 0-ms duration, will be null instead.\r\n  // Callers should not set this directly.\r\n  dateDelta: any\r\n  startDelta: any\r\n  endDelta: any\r\n\r\n\r\n  static createFromDiff(dateProfile0, dateProfile1, largeUnit) {\r\n    let clearEnd = dateProfile0.end && !dateProfile1.end\r\n    let forceTimed = dateProfile0.isAllDay() && !dateProfile1.isAllDay()\r\n    let forceAllDay = !dateProfile0.isAllDay() && dateProfile1.isAllDay()\r\n    let dateDelta\r\n    let endDiff\r\n    let endDelta\r\n    let mutation\r\n\r\n    // subtracts the dates in the appropriate way, returning a duration\r\n    function subtractDates(date1, date0) { // date1 - date0\r\n      if (largeUnit) {\r\n        return diffByUnit(date1, date0, largeUnit) // poorly named\r\n      } else if (dateProfile1.isAllDay()) {\r\n        return diffDay(date1, date0) // poorly named\r\n      } else {\r\n        return diffDayTime(date1, date0) // poorly named\r\n      }\r\n    }\r\n\r\n    dateDelta = subtractDates(dateProfile1.start, dateProfile0.start)\r\n\r\n    if (dateProfile1.end) {\r\n      // use unzonedRanges because dateProfile0.end might be null\r\n      endDiff = subtractDates(\r\n        dateProfile1.unzonedRange.getEnd(),\r\n        dateProfile0.unzonedRange.getEnd()\r\n      )\r\n      endDelta = endDiff.subtract(dateDelta)\r\n    }\r\n\r\n    mutation = new EventDefDateMutation()\r\n    mutation.clearEnd = clearEnd\r\n    mutation.forceTimed = forceTimed\r\n    mutation.forceAllDay = forceAllDay\r\n    mutation.setDateDelta(dateDelta)\r\n    mutation.setEndDelta(endDelta)\r\n\r\n    return mutation\r\n  }\r\n\r\n\r\n  /*\r\n  returns an undo function.\r\n  */\r\n  buildNewDateProfile(eventDateProfile, calendar) {\r\n    let start = eventDateProfile.start.clone()\r\n    let end = null\r\n    let shouldRezone = false\r\n\r\n    if (eventDateProfile.end && !this.clearEnd) {\r\n      end = eventDateProfile.end.clone()\r\n    } else if (this.endDelta && !end) {\r\n      end = calendar.getDefaultEventEnd(eventDateProfile.isAllDay(), start)\r\n    }\r\n\r\n    if (this.forceTimed) {\r\n      shouldRezone = true\r\n\r\n      if (!start.hasTime()) {\r\n        start.time(0)\r\n      }\r\n\r\n      if (end && !end.hasTime()) {\r\n        end.time(0)\r\n      }\r\n    } else if (this.forceAllDay) {\r\n\r\n      if (start.hasTime()) {\r\n        start.stripTime()\r\n      }\r\n\r\n      if (end && end.hasTime()) {\r\n        end.stripTime()\r\n      }\r\n    }\r\n\r\n    if (this.dateDelta) {\r\n      shouldRezone = true\r\n\r\n      start.add(this.dateDelta)\r\n\r\n      if (end) {\r\n        end.add(this.dateDelta)\r\n      }\r\n    }\r\n\r\n    // do this before adding startDelta to start, so we can work off of start\r\n    if (this.endDelta) {\r\n      shouldRezone = true\r\n\r\n      end.add(this.endDelta)\r\n    }\r\n\r\n    if (this.startDelta) {\r\n      shouldRezone = true\r\n\r\n      start.add(this.startDelta)\r\n    }\r\n\r\n    if (shouldRezone) {\r\n      start = calendar.applyTimezone(start)\r\n\r\n      if (end) {\r\n        end = calendar.applyTimezone(end)\r\n      }\r\n    }\r\n\r\n    // TODO: okay to access calendar option?\r\n    if (!end && calendar.opt('forceEventDuration')) {\r\n      end = calendar.getDefaultEventEnd(eventDateProfile.isAllDay(), start)\r\n    }\r\n\r\n    return new EventDateProfile(start, end, calendar)\r\n  }\r\n\r\n\r\n  setDateDelta(dateDelta) {\r\n    if (dateDelta && dateDelta.valueOf()) {\r\n      this.dateDelta = dateDelta\r\n    } else {\r\n      this.dateDelta = null\r\n    }\r\n  }\r\n\r\n\r\n  setStartDelta(startDelta) {\r\n    if (startDelta && startDelta.valueOf()) {\r\n      this.startDelta = startDelta\r\n    } else {\r\n      this.startDelta = null\r\n    }\r\n  }\r\n\r\n\r\n  setEndDelta(endDelta) {\r\n    if (endDelta && endDelta.valueOf()) {\r\n      this.endDelta = endDelta\r\n    } else {\r\n      this.endDelta = null\r\n    }\r\n  }\r\n\r\n\r\n  isEmpty() {\r\n    return !this.clearEnd && !this.forceTimed && !this.forceAllDay &&\r\n      !this.dateDelta && !this.startDelta && !this.endDelta\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventDefDateMutation.ts","import StandardTheme from './StandardTheme'\r\nimport JqueryUiTheme from './JqueryUiTheme'\r\n\r\n\r\nconst themeClassHash = {} as any\r\n\r\n\r\nexport function defineThemeSystem(themeName, themeClass) {\r\n  themeClassHash[themeName] = themeClass\r\n}\r\n\r\n\r\nexport function getThemeSystemClass(themeSetting) {\r\n  if (!themeSetting) {\r\n    return StandardTheme\r\n  } else if (themeSetting === true) {\r\n    return JqueryUiTheme\r\n  } else {\r\n    return themeClassHash[themeSetting]\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/ThemeRegistry.ts","import * as $ from 'jquery'\r\nimport { removeMatching } from '../../util'\r\nimport Promise from '../../common/Promise'\r\nimport EventSource from './EventSource'\r\nimport SingleEventDef from '../event/SingleEventDef'\r\n\r\n\r\nexport default class ArrayEventSource extends EventSource {\r\n\r\n  rawEventDefs: any // unparsed\r\n  eventDefs: any\r\n  currentTimezone: any\r\n\r\n\r\n  constructor(calendar) {\r\n    super(calendar)\r\n    this.eventDefs = [] // for if setRawEventDefs is never called\r\n  }\r\n\r\n\r\n  static parse(rawInput, calendar) {\r\n    let rawProps\r\n\r\n    // normalize raw input\r\n    if ($.isArray(rawInput.events)) { // extended form\r\n      rawProps = rawInput\r\n    } else if ($.isArray(rawInput)) { // short form\r\n      rawProps = { events: rawInput }\r\n    }\r\n\r\n    if (rawProps) {\r\n      return EventSource.parse.call(this, rawProps, calendar)\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  setRawEventDefs(rawEventDefs) {\r\n    this.rawEventDefs = rawEventDefs\r\n    this.eventDefs = this.parseEventDefs(rawEventDefs)\r\n  }\r\n\r\n\r\n  fetch(start, end, timezone) {\r\n    let eventDefs = this.eventDefs\r\n    let i\r\n\r\n    if (\r\n      this.currentTimezone != null &&\r\n      this.currentTimezone !== timezone\r\n    ) {\r\n      for (i = 0; i < eventDefs.length; i++) {\r\n        if (eventDefs[i] instanceof SingleEventDef) {\r\n          eventDefs[i].rezone()\r\n        }\r\n      }\r\n    }\r\n\r\n    this.currentTimezone = timezone\r\n\r\n    return Promise.resolve(eventDefs)\r\n  }\r\n\r\n\r\n  addEventDef(eventDef) {\r\n    this.eventDefs.push(eventDef)\r\n  }\r\n\r\n\r\n  /*\r\n  eventDefId already normalized to a string\r\n  */\r\n  removeEventDefsById(eventDefId) {\r\n    return removeMatching(this.eventDefs, function(eventDef) {\r\n      return eventDef.id === eventDefId\r\n    })\r\n  }\r\n\r\n\r\n  removeAllEventDefs() {\r\n    this.eventDefs = []\r\n  }\r\n\r\n\r\n  getPrimitive() {\r\n    return this.rawEventDefs\r\n  }\r\n\r\n\r\n  applyManualStandardProps(rawProps) {\r\n    let superSuccess = super.applyManualStandardProps(rawProps)\r\n\r\n    this.setRawEventDefs(rawProps.events)\r\n\r\n    return superSuccess\r\n  }\r\n\r\n}\r\n\r\n\r\nArrayEventSource.defineStandardProps({\r\n  events: false // don't automatically transfer\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/ArrayEventSource.ts","import * as $ from 'jquery'\r\nimport { getClientRect, getScrollParent } from '../util'\r\n\r\n/*\r\nA cache for the left/right/top/bottom/width/height values for one or more elements.\r\nWorks with both offset (from topleft document) and position (from offsetParent).\r\n\r\noptions:\r\n- els\r\n- isHorizontal\r\n- isVertical\r\n*/\r\nexport default class CoordCache {\r\n\r\n  els: any // jQuery set (assumed to be siblings)\r\n  forcedOffsetParentEl: any // options can override the natural offsetParent\r\n  origin: any // {left,top} position of offsetParent of els\r\n  boundingRect: any // constrain cordinates to this rectangle. {left,right,top,bottom} or null\r\n  isHorizontal: boolean = false // whether to query for left/right/width\r\n  isVertical: boolean = false // whether to query for top/bottom/height\r\n\r\n  // arrays of coordinates (offsets from topleft of document)\r\n  lefts: any\r\n  rights: any\r\n  tops: any\r\n  bottoms: any\r\n\r\n\r\n  constructor(options) {\r\n    this.els = $(options.els)\r\n    this.isHorizontal = options.isHorizontal\r\n    this.isVertical = options.isVertical\r\n    this.forcedOffsetParentEl = options.offsetParent ? $(options.offsetParent) : null\r\n  }\r\n\r\n\r\n  // Queries the els for coordinates and stores them.\r\n  // Call this method before using and of the get* methods below.\r\n  build() {\r\n    let offsetParentEl = this.forcedOffsetParentEl\r\n    if (!offsetParentEl && this.els.length > 0) {\r\n      offsetParentEl = this.els.eq(0).offsetParent()\r\n    }\r\n\r\n    this.origin = offsetParentEl ?\r\n      offsetParentEl.offset() :\r\n      null\r\n\r\n    this.boundingRect = this.queryBoundingRect()\r\n\r\n    if (this.isHorizontal) {\r\n      this.buildElHorizontals()\r\n    }\r\n    if (this.isVertical) {\r\n      this.buildElVerticals()\r\n    }\r\n  }\r\n\r\n\r\n  // Destroys all internal data about coordinates, freeing memory\r\n  clear() {\r\n    this.origin = null\r\n    this.boundingRect = null\r\n    this.lefts = null\r\n    this.rights = null\r\n    this.tops = null\r\n    this.bottoms = null\r\n  }\r\n\r\n\r\n  // When called, if coord caches aren't built, builds them\r\n  ensureBuilt() {\r\n    if (!this.origin) {\r\n      this.build()\r\n    }\r\n  }\r\n\r\n\r\n  // Populates the left/right internal coordinate arrays\r\n  buildElHorizontals() {\r\n    let lefts = []\r\n    let rights = []\r\n\r\n    this.els.each(function(i, node) {\r\n      let el = $(node)\r\n      let left = el.offset().left\r\n      let width = el.outerWidth()\r\n\r\n      lefts.push(left)\r\n      rights.push(left + width)\r\n    })\r\n\r\n    this.lefts = lefts\r\n    this.rights = rights\r\n  }\r\n\r\n\r\n  // Populates the top/bottom internal coordinate arrays\r\n  buildElVerticals() {\r\n    let tops = []\r\n    let bottoms = []\r\n\r\n    this.els.each(function(i, node) {\r\n      let el = $(node)\r\n      let top = el.offset().top\r\n      let height = el.outerHeight()\r\n\r\n      tops.push(top)\r\n      bottoms.push(top + height)\r\n    })\r\n\r\n    this.tops = tops\r\n    this.bottoms = bottoms\r\n  }\r\n\r\n\r\n  // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\r\n  // If no intersection is made, returns undefined.\r\n  getHorizontalIndex(leftOffset) {\r\n    this.ensureBuilt()\r\n\r\n    let lefts = this.lefts\r\n    let rights = this.rights\r\n    let len = lefts.length\r\n    let i\r\n\r\n    for (i = 0; i < len; i++) {\r\n      if (leftOffset >= lefts[i] && leftOffset < rights[i]) {\r\n        return i\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Given a top offset (from document top), returns the index of the el that it vertically intersects.\r\n  // If no intersection is made, returns undefined.\r\n  getVerticalIndex(topOffset) {\r\n    this.ensureBuilt()\r\n\r\n    let tops = this.tops\r\n    let bottoms = this.bottoms\r\n    let len = tops.length\r\n    let i\r\n\r\n    for (i = 0; i < len; i++) {\r\n      if (topOffset >= tops[i] && topOffset < bottoms[i]) {\r\n        return i\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Gets the left offset (from document left) of the element at the given index\r\n  getLeftOffset(leftIndex) {\r\n    this.ensureBuilt()\r\n    return this.lefts[leftIndex]\r\n  }\r\n\r\n\r\n  // Gets the left position (from offsetParent left) of the element at the given index\r\n  getLeftPosition(leftIndex) {\r\n    this.ensureBuilt()\r\n    return this.lefts[leftIndex] - this.origin.left\r\n  }\r\n\r\n\r\n  // Gets the right offset (from document left) of the element at the given index.\r\n  // This value is NOT relative to the document's right edge, like the CSS concept of \"right\" would be.\r\n  getRightOffset(leftIndex) {\r\n    this.ensureBuilt()\r\n    return this.rights[leftIndex]\r\n  }\r\n\r\n\r\n  // Gets the right position (from offsetParent left) of the element at the given index.\r\n  // This value is NOT relative to the offsetParent's right edge, like the CSS concept of \"right\" would be.\r\n  getRightPosition(leftIndex) {\r\n    this.ensureBuilt()\r\n    return this.rights[leftIndex] - this.origin.left\r\n  }\r\n\r\n\r\n  // Gets the width of the element at the given index\r\n  getWidth(leftIndex) {\r\n    this.ensureBuilt()\r\n    return this.rights[leftIndex] - this.lefts[leftIndex]\r\n  }\r\n\r\n\r\n  // Gets the top offset (from document top) of the element at the given index\r\n  getTopOffset(topIndex) {\r\n    this.ensureBuilt()\r\n    return this.tops[topIndex]\r\n  }\r\n\r\n\r\n  // Gets the top position (from offsetParent top) of the element at the given position\r\n  getTopPosition(topIndex) {\r\n    this.ensureBuilt()\r\n    return this.tops[topIndex] - this.origin.top\r\n  }\r\n\r\n  // Gets the bottom offset (from the document top) of the element at the given index.\r\n  // This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\r\n  getBottomOffset(topIndex) {\r\n    this.ensureBuilt()\r\n    return this.bottoms[topIndex]\r\n  }\r\n\r\n\r\n  // Gets the bottom position (from the offsetParent top) of the element at the given index.\r\n  // This value is NOT relative to the offsetParent's bottom edge, like the CSS concept of \"bottom\" would be.\r\n  getBottomPosition(topIndex) {\r\n    this.ensureBuilt()\r\n    return this.bottoms[topIndex] - this.origin.top\r\n  }\r\n\r\n\r\n  // Gets the height of the element at the given index\r\n  getHeight(topIndex) {\r\n    this.ensureBuilt()\r\n    return this.bottoms[topIndex] - this.tops[topIndex]\r\n  }\r\n\r\n\r\n  // Bounding Rect\r\n  // TODO: decouple this from CoordCache\r\n\r\n  // Compute and return what the elements' bounding rectangle is, from the user's perspective.\r\n  // Right now, only returns a rectangle if constrained by an overflow:scroll element.\r\n  // Returns null if there are no elements\r\n  queryBoundingRect() {\r\n    let scrollParentEl\r\n\r\n    if (this.els.length > 0) {\r\n      scrollParentEl = getScrollParent(this.els.eq(0))\r\n\r\n      if (!scrollParentEl.is(document)) {\r\n        return getClientRect(scrollParentEl)\r\n      }\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  isPointInBounds(leftOffset, topOffset) {\r\n    return this.isLeftInBounds(leftOffset) && this.isTopInBounds(topOffset)\r\n  }\r\n\r\n  isLeftInBounds(leftOffset) {\r\n    return !this.boundingRect || (leftOffset >= this.boundingRect.left && leftOffset < this.boundingRect.right)\r\n  }\r\n\r\n  isTopInBounds(topOffset) {\r\n    return !this.boundingRect || (topOffset >= this.boundingRect.top && topOffset < this.boundingRect.bottom)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/CoordCache.ts","import * as $ from 'jquery'\r\nimport {\r\n  firstDefined,\r\n  preventSelection,\r\n  getEvIsTouch,\r\n  getEvX,\r\n  getEvY,\r\n  getScrollParent,\r\n  isPrimaryMouseButton,\r\n  allowSelection,\r\n  preventDefault,\r\n  debounce,\r\n  getOuterRect,\r\n  proxy\r\n} from '../util'\r\nimport { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\nimport GlobalEmitter from './GlobalEmitter'\r\n\r\n\r\n/* Tracks a drag's mouse movement, firing various handlers\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// TODO: use Emitter\r\n\r\nexport default class DragListener {\r\n\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  options: any\r\n  subjectEl: any\r\n\r\n  // coordinates of the initial mousedown\r\n  originX: any\r\n  originY: any\r\n\r\n  // the wrapping element that scrolls, or MIGHT scroll if there's overflow.\r\n  // TODO: do this for wrappers that have overflow:hidden as well.\r\n  scrollEl: any\r\n\r\n  isInteracting: boolean = false\r\n  isDistanceSurpassed: boolean = false\r\n  isDelayEnded: boolean = false\r\n  isDragging: boolean = false\r\n  isTouch: boolean = false\r\n  isGeneric: boolean = false // initiated by 'dragstart' (jqui)\r\n\r\n  delay: any\r\n  delayTimeoutId: any\r\n  minDistance: any\r\n\r\n  shouldCancelTouchScroll: boolean = true\r\n  scrollAlwaysKills: boolean = false\r\n\r\n  isAutoScroll: boolean = false\r\n\r\n  scrollBounds: any // { top, bottom, left, right }\r\n  scrollTopVel: any // pixels per second\r\n  scrollLeftVel: any // pixels per second\r\n  scrollIntervalId: any // ID of setTimeout for scrolling animation loop\r\n\r\n  // defaults\r\n  scrollSensitivity: number = 30 // pixels from edge for scrolling to start\r\n  scrollSpeed: number = 200 // pixels per second, at maximum speed\r\n  scrollIntervalMs: number = 50 // millisecond wait between scroll increment\r\n\r\n\r\n  constructor(options) {\r\n    this.options = options || {}\r\n  }\r\n\r\n\r\n  // Interaction (high-level)\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  startInteraction(ev, extraOptions: any= {}) {\r\n\r\n    if (ev.type === 'mousedown') {\r\n      if (GlobalEmitter.get().shouldIgnoreMouse()) {\r\n        return\r\n      } else if (!isPrimaryMouseButton(ev)) {\r\n        return\r\n      } else {\r\n        ev.preventDefault() // prevents native selection in most browsers\r\n      }\r\n    }\r\n\r\n    if (!this.isInteracting) {\r\n\r\n      // process options\r\n      this.delay = firstDefined(extraOptions.delay, this.options.delay, 0)\r\n      this.minDistance = firstDefined(extraOptions.distance, this.options.distance, 0)\r\n      this.subjectEl = this.options.subjectEl\r\n\r\n      preventSelection($('body'))\r\n\r\n      this.isInteracting = true\r\n      this.isTouch = getEvIsTouch(ev)\r\n      this.isGeneric = ev.type === 'dragstart'\r\n      this.isDelayEnded = false\r\n      this.isDistanceSurpassed = false\r\n\r\n      this.originX = getEvX(ev)\r\n      this.originY = getEvY(ev)\r\n      this.scrollEl = getScrollParent($(ev.target))\r\n\r\n      this.bindHandlers()\r\n      this.initAutoScroll()\r\n      this.handleInteractionStart(ev)\r\n      this.startDelay(ev)\r\n\r\n      if (!this.minDistance) {\r\n        this.handleDistanceSurpassed(ev)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  handleInteractionStart(ev) {\r\n    this.trigger('interactionStart', ev)\r\n  }\r\n\r\n\r\n  endInteraction(ev, isCancelled) {\r\n    if (this.isInteracting) {\r\n      this.endDrag(ev)\r\n\r\n      if (this.delayTimeoutId) {\r\n        clearTimeout(this.delayTimeoutId)\r\n        this.delayTimeoutId = null\r\n      }\r\n\r\n      this.destroyAutoScroll()\r\n      this.unbindHandlers()\r\n\r\n      this.isInteracting = false\r\n      this.handleInteractionEnd(ev, isCancelled)\r\n\r\n      allowSelection($('body'))\r\n    }\r\n  }\r\n\r\n\r\n  handleInteractionEnd(ev, isCancelled) {\r\n    this.trigger('interactionEnd', ev, isCancelled || false)\r\n  }\r\n\r\n\r\n  // Binding To DOM\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  bindHandlers() {\r\n    // some browsers (Safari in iOS 10) don't allow preventDefault on touch events that are bound after touchstart,\r\n    // so listen to the GlobalEmitter singleton, which is always bound, instead of the document directly.\r\n    let globalEmitter = GlobalEmitter.get()\r\n\r\n    if (this.isGeneric) {\r\n      this.listenTo($(document), { // might only work on iOS because of GlobalEmitter's bind :(\r\n        drag: this.handleMove,\r\n        dragstop: this.endInteraction\r\n      })\r\n    } else if (this.isTouch) {\r\n      this.listenTo(globalEmitter, {\r\n        touchmove: this.handleTouchMove,\r\n        touchend: this.endInteraction,\r\n        scroll: this.handleTouchScroll\r\n      })\r\n    } else {\r\n      this.listenTo(globalEmitter, {\r\n        mousemove: this.handleMouseMove,\r\n        mouseup: this.endInteraction\r\n      })\r\n    }\r\n\r\n    this.listenTo(globalEmitter, {\r\n      selectstart: preventDefault, // don't allow selection while dragging\r\n      contextmenu: preventDefault // long taps would open menu on Chrome dev tools\r\n    })\r\n  }\r\n\r\n\r\n  unbindHandlers() {\r\n    this.stopListeningTo(GlobalEmitter.get())\r\n    this.stopListeningTo($(document)) // for isGeneric\r\n  }\r\n\r\n\r\n  // Drag (high-level)\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // extraOptions ignored if drag already started\r\n  startDrag(ev, extraOptions?) {\r\n    this.startInteraction(ev, extraOptions) // ensure interaction began\r\n\r\n    if (!this.isDragging) {\r\n      this.isDragging = true\r\n      this.handleDragStart(ev)\r\n    }\r\n  }\r\n\r\n\r\n  handleDragStart(ev) {\r\n    this.trigger('dragStart', ev)\r\n  }\r\n\r\n\r\n  handleMove(ev) {\r\n    let dx = getEvX(ev) - this.originX\r\n    let dy = getEvY(ev) - this.originY\r\n    let minDistance = this.minDistance\r\n    let distanceSq // current distance from the origin, squared\r\n\r\n    if (!this.isDistanceSurpassed) {\r\n      distanceSq = dx * dx + dy * dy\r\n      if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\r\n        this.handleDistanceSurpassed(ev)\r\n      }\r\n    }\r\n\r\n    if (this.isDragging) {\r\n      this.handleDrag(dx, dy, ev)\r\n    }\r\n  }\r\n\r\n\r\n  // Called while the mouse is being moved and when we know a legitimate drag is taking place\r\n  handleDrag(dx, dy, ev) {\r\n    this.trigger('drag', dx, dy, ev)\r\n    this.updateAutoScroll(ev) // will possibly cause scrolling\r\n  }\r\n\r\n\r\n  endDrag(ev) {\r\n    if (this.isDragging) {\r\n      this.isDragging = false\r\n      this.handleDragEnd(ev)\r\n    }\r\n  }\r\n\r\n\r\n  handleDragEnd(ev) {\r\n    this.trigger('dragEnd', ev)\r\n  }\r\n\r\n\r\n  // Delay\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  startDelay(initialEv) {\r\n    if (this.delay) {\r\n      this.delayTimeoutId = setTimeout(() => {\r\n        this.handleDelayEnd(initialEv)\r\n      }, this.delay)\r\n    } else {\r\n      this.handleDelayEnd(initialEv)\r\n    }\r\n  }\r\n\r\n\r\n  handleDelayEnd(initialEv) {\r\n    this.isDelayEnded = true\r\n\r\n    if (this.isDistanceSurpassed) {\r\n      this.startDrag(initialEv)\r\n    }\r\n  }\r\n\r\n\r\n  // Distance\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  handleDistanceSurpassed(ev) {\r\n    this.isDistanceSurpassed = true\r\n\r\n    if (this.isDelayEnded) {\r\n      this.startDrag(ev)\r\n    }\r\n  }\r\n\r\n\r\n  // Mouse / Touch\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  handleTouchMove(ev) {\r\n\r\n    // prevent inertia and touchmove-scrolling while dragging\r\n    if (this.isDragging && this.shouldCancelTouchScroll) {\r\n      ev.preventDefault()\r\n    }\r\n\r\n    this.handleMove(ev)\r\n  }\r\n\r\n\r\n  handleMouseMove(ev) {\r\n    this.handleMove(ev)\r\n  }\r\n\r\n\r\n  // Scrolling (unrelated to auto-scroll)\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  handleTouchScroll(ev) {\r\n    // if the drag is being initiated by touch, but a scroll happens before\r\n    // the drag-initiating delay is over, cancel the drag\r\n    if (!this.isDragging || this.scrollAlwaysKills) {\r\n      this.endInteraction(ev, true) // isCancelled=true\r\n    }\r\n  }\r\n\r\n\r\n  // Utils\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Triggers a callback. Calls a function in the option hash of the same name.\r\n  // Arguments beyond the first `name` are forwarded on.\r\n  trigger(name, ...args) {\r\n    if (this.options[name]) {\r\n      this.options[name].apply(this, args)\r\n    }\r\n    // makes _methods callable by event name. TODO: kill this\r\n    if (this['_' + name]) {\r\n      this['_' + name].apply(this, args)\r\n    }\r\n  }\r\n\r\n\r\n  // Auto-scroll\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  initAutoScroll() {\r\n    let scrollEl = this.scrollEl\r\n\r\n    this.isAutoScroll =\r\n      this.options.scroll &&\r\n      scrollEl &&\r\n      !scrollEl.is(window) &&\r\n      !scrollEl.is(document)\r\n\r\n    if (this.isAutoScroll) {\r\n      // debounce makes sure rapid calls don't happen\r\n      this.listenTo(scrollEl, 'scroll', debounce(this.handleDebouncedScroll, 100))\r\n    }\r\n  }\r\n\r\n\r\n  destroyAutoScroll() {\r\n    this.endAutoScroll() // kill any animation loop\r\n\r\n    // remove the scroll handler if there is a scrollEl\r\n    if (this.isAutoScroll) {\r\n      this.stopListeningTo(this.scrollEl, 'scroll') // will probably get removed by unbindHandlers too :(\r\n    }\r\n  }\r\n\r\n\r\n  // Computes and stores the bounding rectangle of scrollEl\r\n  computeScrollBounds() {\r\n    if (this.isAutoScroll) {\r\n      this.scrollBounds = getOuterRect(this.scrollEl)\r\n      // TODO: use getClientRect in future. but prevents auto scrolling when on top of scrollbars\r\n    }\r\n  }\r\n\r\n\r\n  // Called when the dragging is in progress and scrolling should be updated\r\n  updateAutoScroll(ev) {\r\n    let sensitivity = this.scrollSensitivity\r\n    let bounds = this.scrollBounds\r\n    let topCloseness\r\n    let bottomCloseness\r\n    let leftCloseness\r\n    let rightCloseness\r\n    let topVel = 0\r\n    let leftVel = 0\r\n\r\n    if (bounds) { // only scroll if scrollEl exists\r\n\r\n      // compute closeness to edges. valid range is from 0.0 - 1.0\r\n      topCloseness = (sensitivity - (getEvY(ev) - bounds.top)) / sensitivity\r\n      bottomCloseness = (sensitivity - (bounds.bottom - getEvY(ev))) / sensitivity\r\n      leftCloseness = (sensitivity - (getEvX(ev) - bounds.left)) / sensitivity\r\n      rightCloseness = (sensitivity - (bounds.right - getEvX(ev))) / sensitivity\r\n\r\n      // translate vertical closeness into velocity.\r\n      // mouse must be completely in bounds for velocity to happen.\r\n      if (topCloseness >= 0 && topCloseness <= 1) {\r\n        topVel = topCloseness * this.scrollSpeed * -1 // negative. for scrolling up\r\n      } else if (bottomCloseness >= 0 && bottomCloseness <= 1) {\r\n        topVel = bottomCloseness * this.scrollSpeed\r\n      }\r\n\r\n      // translate horizontal closeness into velocity\r\n      if (leftCloseness >= 0 && leftCloseness <= 1) {\r\n        leftVel = leftCloseness * this.scrollSpeed * -1 // negative. for scrolling left\r\n      } else if (rightCloseness >= 0 && rightCloseness <= 1) {\r\n        leftVel = rightCloseness * this.scrollSpeed\r\n      }\r\n    }\r\n\r\n    this.setScrollVel(topVel, leftVel)\r\n  }\r\n\r\n\r\n  // Sets the speed-of-scrolling for the scrollEl\r\n  setScrollVel(topVel, leftVel) {\r\n\r\n    this.scrollTopVel = topVel\r\n    this.scrollLeftVel = leftVel\r\n\r\n    this.constrainScrollVel() // massages into realistic values\r\n\r\n    // if there is non-zero velocity, and an animation loop hasn't already started, then START\r\n    if ((this.scrollTopVel || this.scrollLeftVel) && !this.scrollIntervalId) {\r\n      this.scrollIntervalId = setInterval(\r\n        proxy(this, 'scrollIntervalFunc'), // scope to `this`\r\n        this.scrollIntervalMs\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  // Forces scrollTopVel and scrollLeftVel to be zero if scrolling has already gone all the way\r\n  constrainScrollVel() {\r\n    let el = this.scrollEl\r\n\r\n    if (this.scrollTopVel < 0) { // scrolling up?\r\n      if (el.scrollTop() <= 0) { // already scrolled all the way up?\r\n        this.scrollTopVel = 0\r\n      }\r\n    } else if (this.scrollTopVel > 0) { // scrolling down?\r\n      if (el.scrollTop() + el[0].clientHeight >= el[0].scrollHeight) { // already scrolled all the way down?\r\n        this.scrollTopVel = 0\r\n      }\r\n    }\r\n\r\n    if (this.scrollLeftVel < 0) { // scrolling left?\r\n      if (el.scrollLeft() <= 0) { // already scrolled all the left?\r\n        this.scrollLeftVel = 0\r\n      }\r\n    } else if (this.scrollLeftVel > 0) { // scrolling right?\r\n      if (el.scrollLeft() + el[0].clientWidth >= el[0].scrollWidth) { // already scrolled all the way right?\r\n        this.scrollLeftVel = 0\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // This function gets called during every iteration of the scrolling animation loop\r\n  scrollIntervalFunc() {\r\n    let el = this.scrollEl\r\n    let frac = this.scrollIntervalMs / 1000 // considering animation frequency, what the vel should be mult'd by\r\n\r\n    // change the value of scrollEl's scroll\r\n    if (this.scrollTopVel) {\r\n      el.scrollTop(el.scrollTop() + this.scrollTopVel * frac)\r\n    }\r\n    if (this.scrollLeftVel) {\r\n      el.scrollLeft(el.scrollLeft() + this.scrollLeftVel * frac)\r\n    }\r\n\r\n    this.constrainScrollVel() // since the scroll values changed, recompute the velocities\r\n\r\n    // if scrolled all the way, which causes the vels to be zero, stop the animation loop\r\n    if (!this.scrollTopVel && !this.scrollLeftVel) {\r\n      this.endAutoScroll()\r\n    }\r\n  }\r\n\r\n\r\n  // Kills any existing scrolling animation loop\r\n  endAutoScroll() {\r\n    if (this.scrollIntervalId) {\r\n      clearInterval(this.scrollIntervalId)\r\n      this.scrollIntervalId = null\r\n\r\n      this.handleScrollEnd()\r\n    }\r\n  }\r\n\r\n\r\n  // Get called when the scrollEl is scrolled (NOTE: this is delayed via debounce)\r\n  handleDebouncedScroll() {\r\n    // recompute all coordinates, but *only* if this is *not* part of our scrolling animation\r\n    if (!this.scrollIntervalId) {\r\n      this.handleScrollEnd()\r\n    }\r\n  }\r\n\r\n\r\n  handleScrollEnd() {\r\n    // Called when scrolling has stopped, whether through auto scroll, or the user scrolling\r\n  }\r\n\r\n}\r\n\r\nListenerMixin.mixInto(DragListener)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/DragListener.ts","import { htmlEscape, dayIDs } from '../util'\r\nimport Mixin from '../common/Mixin'\r\n\r\nexport interface DayTableInterface {\r\n  dayDates: any\r\n  daysPerRow: any\r\n  rowCnt: any\r\n  colCnt: any\r\n  updateDayTable()\r\n  renderHeadHtml()\r\n  renderBgTrHtml(row)\r\n  bookendCells(trEl)\r\n  getCellDate(row, col)\r\n  getCellRange(row, col)\r\n  sliceRangeByDay(unzonedRange)\r\n  sliceRangeByRow(unzonedRange)\r\n  renderIntroHtml()\r\n}\r\n\r\n/*\r\nA set of rendering and date-related methods for a visual component comprised of one or more rows of day columns.\r\nPrerequisite: the object being mixed into needs to be a *Grid*\r\n*/\r\nexport default class DayTableMixin extends Mixin implements DayTableInterface {\r\n\r\n  breakOnWeeks: boolean // should create a new row for each week? not specified, so default is FALSY\r\n  dayDates: any // whole-day dates for each column. left to right\r\n  dayIndices: any // for each day from start, the offset\r\n  daysPerRow: any\r\n  rowCnt: any\r\n  colCnt: any\r\n  colHeadFormat: any\r\n\r\n\r\n  // Populates internal variables used for date calculation and rendering\r\n  updateDayTable() {\r\n    let t = (this as any)\r\n    let view = t.view\r\n    let calendar = view.calendar\r\n    let date = calendar.msToUtcMoment(t.dateProfile.renderUnzonedRange.startMs, true)\r\n    let end = calendar.msToUtcMoment(t.dateProfile.renderUnzonedRange.endMs, true)\r\n    let dayIndex = -1\r\n    let dayIndices = []\r\n    let dayDates = []\r\n    let daysPerRow\r\n    let firstDay\r\n    let rowCnt\r\n\r\n    while (date.isBefore(end)) { // loop each day from start to end\r\n      if (view.isHiddenDay(date)) {\r\n        dayIndices.push(dayIndex + 0.5) // mark that it's between indices\r\n      } else {\r\n        dayIndex++\r\n        dayIndices.push(dayIndex)\r\n        dayDates.push(date.clone())\r\n      }\r\n      date.add(1, 'days')\r\n    }\r\n\r\n    if (this.breakOnWeeks) {\r\n      // count columns until the day-of-week repeats\r\n      firstDay = dayDates[0].day()\r\n      for (daysPerRow = 1; daysPerRow < dayDates.length; daysPerRow++) {\r\n        if (dayDates[daysPerRow].day() === firstDay) {\r\n          break\r\n        }\r\n      }\r\n      rowCnt = Math.ceil(dayDates.length / daysPerRow)\r\n    } else {\r\n      rowCnt = 1\r\n      daysPerRow = dayDates.length\r\n    }\r\n\r\n    this.dayDates = dayDates\r\n    this.dayIndices = dayIndices\r\n    this.daysPerRow = daysPerRow\r\n    this.rowCnt = rowCnt\r\n\r\n    this.updateDayTableCols()\r\n  }\r\n\r\n\r\n  // Computes and assigned the colCnt property and updates any options that may be computed from it\r\n  updateDayTableCols() {\r\n    this.colCnt = this.computeColCnt()\r\n    this.colHeadFormat =\r\n      (this as any).opt('columnHeaderFormat') ||\r\n      (this as any).opt('columnFormat') || // deprecated\r\n      this.computeColHeadFormat()\r\n  }\r\n\r\n\r\n  // Determines how many columns there should be in the table\r\n  computeColCnt() {\r\n    return this.daysPerRow\r\n  }\r\n\r\n\r\n  // Computes the ambiguously-timed moment for the given cell\r\n  getCellDate(row, col) {\r\n    return this.dayDates[\r\n        this.getCellDayIndex(row, col)\r\n      ].clone()\r\n  }\r\n\r\n\r\n  // Computes the ambiguously-timed date range for the given cell\r\n  getCellRange(row, col) {\r\n    let start = this.getCellDate(row, col)\r\n    let end = start.clone().add(1, 'days')\r\n\r\n    return { start: start, end: end }\r\n  }\r\n\r\n\r\n  // Returns the number of day cells, chronologically, from the first of the grid (0-based)\r\n  getCellDayIndex(row, col) {\r\n    return row * this.daysPerRow + this.getColDayIndex(col)\r\n  }\r\n\r\n\r\n  // Returns the numner of day cells, chronologically, from the first cell in *any given row*\r\n  getColDayIndex(col) {\r\n    if ((this as any).isRTL) {\r\n      return this.colCnt - 1 - col\r\n    } else {\r\n      return col\r\n    }\r\n  }\r\n\r\n\r\n  // Given a date, returns its chronolocial cell-index from the first cell of the grid.\r\n  // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\r\n  // If before the first offset, returns a negative number.\r\n  // If after the last offset, returns an offset past the last cell offset.\r\n  // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\r\n  getDateDayIndex(date) {\r\n    let dayIndices = this.dayIndices\r\n    let dayOffset = date.diff(this.dayDates[0], 'days')\r\n\r\n    if (dayOffset < 0) {\r\n      return dayIndices[0] - 1\r\n    } else if (dayOffset >= dayIndices.length) {\r\n      return dayIndices[dayIndices.length - 1] + 1\r\n    } else {\r\n      return dayIndices[dayOffset]\r\n    }\r\n  }\r\n\r\n\r\n  /* Options\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Computes a default column header formatting string if `colFormat` is not explicitly defined\r\n  computeColHeadFormat() {\r\n    // if more than one week row, or if there are a lot of columns with not much space,\r\n    // put just the day numbers will be in each cell\r\n    if (this.rowCnt > 1 || this.colCnt > 10) {\r\n      return 'ddd' // \"Sat\"\r\n    } else if (this.colCnt > 1) {\r\n      return (this as any).opt('dayOfMonthFormat') // \"Sat 12/10\"\r\n    } else {\r\n      return 'dddd' // \"Saturday\"\r\n    }\r\n  }\r\n\r\n\r\n  /* Slicing\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Slices up a date range into a segment for every week-row it intersects with\r\n  sliceRangeByRow(unzonedRange) {\r\n    let daysPerRow = this.daysPerRow\r\n    let normalRange = (this as any).view.computeDayRange(unzonedRange) // make whole-day range, considering nextDayThreshold\r\n    let rangeFirst = this.getDateDayIndex(normalRange.start) // inclusive first index\r\n    let rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')) // inclusive last index\r\n    let segs = []\r\n    let row\r\n    let rowFirst\r\n    let rowLast // inclusive day-index range for current row\r\n    let segFirst\r\n    let segLast // inclusive day-index range for segment\r\n\r\n    for (row = 0; row < this.rowCnt; row++) {\r\n      rowFirst = row * daysPerRow\r\n      rowLast = rowFirst + daysPerRow - 1\r\n\r\n      // intersect segment's offset range with the row's\r\n      segFirst = Math.max(rangeFirst, rowFirst)\r\n      segLast = Math.min(rangeLast, rowLast)\r\n\r\n      // deal with in-between indices\r\n      segFirst = Math.ceil(segFirst) // in-between starts round to next cell\r\n      segLast = Math.floor(segLast) // in-between ends round to prev cell\r\n\r\n      if (segFirst <= segLast) { // was there any intersection with the current row?\r\n        segs.push({\r\n          row: row,\r\n\r\n          // normalize to start of row\r\n          firstRowDayIndex: segFirst - rowFirst,\r\n          lastRowDayIndex: segLast - rowFirst,\r\n\r\n          // must be matching integers to be the segment's start/end\r\n          isStart: segFirst === rangeFirst,\r\n          isEnd: segLast === rangeLast\r\n        })\r\n      }\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  // Slices up a date range into a segment for every day-cell it intersects with.\r\n  // TODO: make more DRY with sliceRangeByRow somehow.\r\n  sliceRangeByDay(unzonedRange) {\r\n    let daysPerRow = this.daysPerRow\r\n    let normalRange = (this as any).view.computeDayRange(unzonedRange) // make whole-day range, considering nextDayThreshold\r\n    let rangeFirst = this.getDateDayIndex(normalRange.start) // inclusive first index\r\n    let rangeLast = this.getDateDayIndex(normalRange.end.clone().subtract(1, 'days')) // inclusive last index\r\n    let segs = []\r\n    let row\r\n    let rowFirst\r\n    let rowLast // inclusive day-index range for current row\r\n    let i\r\n    let segFirst\r\n    let segLast // inclusive day-index range for segment\r\n\r\n    for (row = 0; row < this.rowCnt; row++) {\r\n      rowFirst = row * daysPerRow\r\n      rowLast = rowFirst + daysPerRow - 1\r\n\r\n      for (i = rowFirst; i <= rowLast; i++) {\r\n\r\n        // intersect segment's offset range with the row's\r\n        segFirst = Math.max(rangeFirst, i)\r\n        segLast = Math.min(rangeLast, i)\r\n\r\n        // deal with in-between indices\r\n        segFirst = Math.ceil(segFirst) // in-between starts round to next cell\r\n        segLast = Math.floor(segLast) // in-between ends round to prev cell\r\n\r\n        if (segFirst <= segLast) { // was there any intersection with the current row?\r\n          segs.push({\r\n            row: row,\r\n\r\n            // normalize to start of row\r\n            firstRowDayIndex: segFirst - rowFirst,\r\n            lastRowDayIndex: segLast - rowFirst,\r\n\r\n            // must be matching integers to be the segment's start/end\r\n            isStart: segFirst === rangeFirst,\r\n            isEnd: segLast === rangeLast\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  /* Header Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderHeadHtml() {\r\n    let theme = (this as any).view.calendar.theme\r\n\r\n    return '' +\r\n      '<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\r\n        '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n          '<thead>' +\r\n            this.renderHeadTrHtml() +\r\n          '</thead>' +\r\n        '</table>' +\r\n      '</div>'\r\n  }\r\n\r\n\r\n  renderHeadIntroHtml() {\r\n    return this.renderIntroHtml() // fall back to generic\r\n  }\r\n\r\n\r\n  renderHeadTrHtml() {\r\n    return '' +\r\n      '<tr>' +\r\n        ((this as any).isRTL ? '' : this.renderHeadIntroHtml()) +\r\n        this.renderHeadDateCellsHtml() +\r\n        ((this as any).isRTL ? this.renderHeadIntroHtml() : '') +\r\n      '</tr>'\r\n  }\r\n\r\n\r\n  renderHeadDateCellsHtml() {\r\n    let htmls = []\r\n    let col\r\n    let date\r\n\r\n    for (col = 0; col < this.colCnt; col++) {\r\n      date = this.getCellDate(0, col)\r\n      htmls.push((this as any).renderHeadDateCellHtml(date))\r\n    }\r\n\r\n    return htmls.join('')\r\n  }\r\n\r\n\r\n  // TODO: when internalApiVersion, accept an object for HTML attributes\r\n  // (colspan should be no different)\r\n  renderHeadDateCellHtml(date, colspan, otherAttrs) {\r\n    let t = (this as any)\r\n    let view = t.view\r\n    let isDateValid = t.dateProfile.activeUnzonedRange.containsDate(date) // TODO: called too frequently. cache somehow.\r\n    let classNames = [\r\n      'fc-day-header',\r\n      view.calendar.theme.getClass('widgetHeader')\r\n    ]\r\n    let innerHtml\r\n\r\n    if (typeof t.opt('columnHeaderHtml') === 'function') {\r\n      innerHtml = t.opt('columnHeaderHtml')(date)\r\n    } else if (typeof t.opt('columnHeaderText') === 'function') {\r\n      innerHtml = htmlEscape(t.opt('columnHeaderText')(date))\r\n    } else {\r\n      innerHtml = htmlEscape(date.format(t.colHeadFormat))\r\n    }\r\n\r\n    // if only one row of days, the classNames on the header can represent the specific days beneath\r\n    if (t.rowCnt === 1) {\r\n      classNames = classNames.concat(\r\n        // includes the day-of-week class\r\n        // noThemeHighlight=true (don't highlight the header)\r\n        t.getDayClasses(date, true)\r\n      )\r\n    } else {\r\n      classNames.push('fc-' + dayIDs[date.day()]) // only add the day-of-week class\r\n    }\r\n\r\n    return '' +\r\n      '<th class=\"' + classNames.join(' ') + '\"' +\r\n        ((isDateValid && t.rowCnt) === 1 ?\r\n          ' data-date=\"' + date.format('YYYY-MM-DD') + '\"' :\r\n          '') +\r\n        (colspan > 1 ?\r\n          ' colspan=\"' + colspan + '\"' :\r\n          '') +\r\n        (otherAttrs ?\r\n          ' ' + otherAttrs :\r\n          '') +\r\n        '>' +\r\n        (isDateValid ?\r\n          // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\r\n          view.buildGotoAnchorHtml(\r\n            { date: date, forceOff: t.rowCnt > 1 || t.colCnt === 1 },\r\n            innerHtml\r\n          ) :\r\n          // if not valid, display text, but no link\r\n          innerHtml\r\n        ) +\r\n      '</th>'\r\n  }\r\n\r\n\r\n  /* Background Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderBgTrHtml(row) {\r\n    return '' +\r\n      '<tr>' +\r\n        ((this as any).isRTL ? '' : this.renderBgIntroHtml(row)) +\r\n        this.renderBgCellsHtml(row) +\r\n        ((this as any).isRTL ? this.renderBgIntroHtml(row) : '') +\r\n      '</tr>'\r\n  }\r\n\r\n\r\n  renderBgIntroHtml(row) {\r\n    return this.renderIntroHtml() // fall back to generic\r\n  }\r\n\r\n\r\n  renderBgCellsHtml(row) {\r\n    let htmls = []\r\n    let col\r\n    let date\r\n\r\n    for (col = 0; col < this.colCnt; col++) {\r\n      date = this.getCellDate(row, col)\r\n      htmls.push((this as any).renderBgCellHtml(date))\r\n    }\r\n\r\n    return htmls.join('')\r\n  }\r\n\r\n\r\n  renderBgCellHtml(date, otherAttrs) {\r\n    let t = (this as any)\r\n    let view = t.view\r\n    let isDateValid = t.dateProfile.activeUnzonedRange.containsDate(date) // TODO: called too frequently. cache somehow.\r\n    let classes = t.getDayClasses(date)\r\n\r\n    classes.unshift('fc-day', view.calendar.theme.getClass('widgetContent'))\r\n\r\n    return '<td class=\"' + classes.join(' ') + '\"' +\r\n      (isDateValid ?\r\n        ' data-date=\"' + date.format('YYYY-MM-DD') + '\"' : // if date has a time, won't format it\r\n        '') +\r\n      (otherAttrs ?\r\n        ' ' + otherAttrs :\r\n        '') +\r\n      '></td>'\r\n  }\r\n\r\n\r\n  /* Generic\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderIntroHtml() {\r\n    // Generates the default HTML intro for any row. User classes should override\r\n  }\r\n\r\n\r\n  // TODO: a generic method for dealing with <tr>, RTL, intro\r\n  // when increment internalApiVersion\r\n  // wrapTr (scheduler)\r\n\r\n\r\n  /* Utils\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Applies the generic \"intro\" and \"outro\" HTML to the given cells.\r\n  // Intro means the leftmost cell when the calendar is LTR and the rightmost cell when RTL. Vice-versa for outro.\r\n  bookendCells(trEl) {\r\n    let introHtml = this.renderIntroHtml()\r\n\r\n    if (introHtml) {\r\n      if ((this as any).isRTL) {\r\n        trEl.append(introHtml)\r\n      } else {\r\n        trEl.prepend(introHtml)\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/DayTableMixin.ts","\r\nexport default class BusinessHourRenderer {\r\n\r\n  component: any\r\n  fillRenderer: any\r\n  segs: any\r\n\r\n\r\n  /*\r\n  component implements:\r\n    - eventRangesToEventFootprints\r\n    - eventFootprintsToSegs\r\n  */\r\n  constructor(component, fillRenderer) {\r\n    this.component = component\r\n    this.fillRenderer = fillRenderer\r\n  }\r\n\r\n\r\n  render(businessHourGenerator) {\r\n    let component = this.component\r\n    let unzonedRange = component._getDateProfile().activeUnzonedRange\r\n\r\n    let eventInstanceGroup = businessHourGenerator.buildEventInstanceGroup(\r\n      component.hasAllDayBusinessHours,\r\n      unzonedRange\r\n    )\r\n\r\n    let eventFootprints = eventInstanceGroup ?\r\n      component.eventRangesToEventFootprints(\r\n        eventInstanceGroup.sliceRenderRanges(unzonedRange)\r\n      ) :\r\n      []\r\n\r\n    this.renderEventFootprints(eventFootprints)\r\n  }\r\n\r\n\r\n  renderEventFootprints(eventFootprints) {\r\n    let segs = this.component.eventFootprintsToSegs(eventFootprints)\r\n\r\n    this.renderSegs(segs)\r\n    this.segs = segs\r\n  }\r\n\r\n\r\n  renderSegs(segs) {\r\n    if (this.fillRenderer) {\r\n      this.fillRenderer.renderSegs('businessHours', segs, {\r\n        getClasses(seg) {\r\n          return [ 'fc-nonbusiness', 'fc-bgevent' ]\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  unrender() {\r\n    if (this.fillRenderer) {\r\n      this.fillRenderer.unrender('businessHours')\r\n    }\r\n\r\n    this.segs = null\r\n  }\r\n\r\n\r\n  getSegs() {\r\n    return this.segs || []\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/renderers/BusinessHourRenderer.ts","import * as $ from 'jquery'\r\nimport { cssToStr } from '../../util'\r\n\r\n\r\nexport default class FillRenderer { // use for highlight, background events, business hours\r\n\r\n  fillSegTag: string = 'div'\r\n  component: any\r\n  elsByFill: any // a hash of jQuery element sets used for rendering each fill. Keyed by fill name.\r\n\r\n\r\n  constructor(component) {\r\n    this.component = component\r\n    this.elsByFill = {}\r\n  }\r\n\r\n\r\n  renderFootprint(type, componentFootprint, props) {\r\n    this.renderSegs(\r\n      type,\r\n      this.component.componentFootprintToSegs(componentFootprint),\r\n      props\r\n    )\r\n  }\r\n\r\n\r\n  renderSegs(type, segs, props) {\r\n    let els\r\n\r\n    segs = this.buildSegEls(type, segs, props) // assignes `.el` to each seg. returns successfully rendered segs\r\n    els = this.attachSegEls(type, segs)\r\n\r\n    if (els) {\r\n      this.reportEls(type, els)\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  // Unrenders a specific type of fill that is currently rendered on the grid\r\n  unrender(type) {\r\n    let el = this.elsByFill[type]\r\n\r\n    if (el) {\r\n      el.remove()\r\n      delete this.elsByFill[type]\r\n    }\r\n  }\r\n\r\n\r\n  // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\r\n  // Only returns segments that successfully rendered.\r\n  buildSegEls(type, segs, props) {\r\n    let html = ''\r\n    let renderedSegs = []\r\n    let i\r\n\r\n    if (segs.length) {\r\n\r\n      // build a large concatenation of segment HTML\r\n      for (i = 0; i < segs.length; i++) {\r\n        html += this.buildSegHtml(type, segs[i], props)\r\n      }\r\n\r\n      // Grab individual elements from the combined HTML string. Use each as the default rendering.\r\n      // Then, compute the 'el' for each segment.\r\n      $(html).each((i, node) => {\r\n        let seg = segs[i]\r\n        let el = $(node)\r\n\r\n        // allow custom filter methods per-type\r\n        if (props.filterEl) {\r\n          el = props.filterEl(seg, el)\r\n        }\r\n\r\n        if (el) { // custom filters did not cancel the render\r\n          el = $(el) // allow custom filter to return raw DOM node\r\n\r\n          // correct element type? (would be bad if a non-TD were inserted into a table for example)\r\n          if (el.is(this.fillSegTag)) {\r\n            seg.el = el\r\n            renderedSegs.push(seg)\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return renderedSegs\r\n  }\r\n\r\n\r\n  // Builds the HTML needed for one fill segment. Generic enough to work with different types.\r\n  buildSegHtml(type, seg, props) {\r\n    // custom hooks per-type\r\n    let classes = props.getClasses ? props.getClasses(seg) : []\r\n    let css = cssToStr(props.getCss ? props.getCss(seg) : {})\r\n\r\n    return '<' + this.fillSegTag +\r\n      (classes.length ? ' class=\"' + classes.join(' ') + '\"' : '') +\r\n      (css ? ' style=\"' + css + '\"' : '') +\r\n      ' />'\r\n  }\r\n\r\n\r\n  // Should return wrapping DOM structure\r\n  attachSegEls(type, segs) {\r\n    // subclasses must implement\r\n  }\r\n\r\n\r\n  reportEls(type, nodes) {\r\n    if (this.elsByFill[type]) {\r\n      this.elsByFill[type] = this.elsByFill[type].add(nodes)\r\n    } else {\r\n      this.elsByFill[type] = $(nodes)\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/renderers/FillRenderer.ts","import SingleEventDef from '../../models/event/SingleEventDef'\r\nimport EventFootprint from '../../models/event/EventFootprint'\r\nimport EventSource from '../../models/event-source/EventSource'\r\n\r\n\r\nexport default class HelperRenderer {\r\n\r\n  view: any\r\n  component: any\r\n  eventRenderer: any\r\n  helperEls: any\r\n\r\n\r\n  constructor(component, eventRenderer) {\r\n    this.view = component._getView()\r\n    this.component = component\r\n    this.eventRenderer = eventRenderer\r\n  }\r\n\r\n\r\n  renderComponentFootprint(componentFootprint) {\r\n    this.renderEventFootprints([\r\n      this.fabricateEventFootprint(componentFootprint)\r\n    ])\r\n  }\r\n\r\n\r\n  renderEventDraggingFootprints(eventFootprints, sourceSeg, isTouch) {\r\n    this.renderEventFootprints(\r\n      eventFootprints,\r\n      sourceSeg,\r\n      'fc-dragging',\r\n      isTouch ? null : this.view.opt('dragOpacity')\r\n    )\r\n  }\r\n\r\n\r\n  renderEventResizingFootprints(eventFootprints, sourceSeg, isTouch) {\r\n    this.renderEventFootprints(\r\n      eventFootprints,\r\n      sourceSeg,\r\n      'fc-resizing'\r\n    )\r\n  }\r\n\r\n\r\n  renderEventFootprints(eventFootprints, sourceSeg?, extraClassNames?, opacity?) {\r\n    let segs = this.component.eventFootprintsToSegs(eventFootprints)\r\n    let classNames = 'fc-helper ' + (extraClassNames || '')\r\n    let i\r\n\r\n    // assigns each seg's el and returns a subset of segs that were rendered\r\n    segs = this.eventRenderer.renderFgSegEls(segs)\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      segs[i].el.addClass(classNames)\r\n    }\r\n\r\n    if (opacity != null) {\r\n      for (i = 0; i < segs.length; i++) {\r\n        segs[i].el.css('opacity', opacity)\r\n      }\r\n    }\r\n\r\n    this.helperEls = this.renderSegs(segs, sourceSeg)\r\n  }\r\n\r\n\r\n  /*\r\n  Must return all mock event elements\r\n  */\r\n  renderSegs(segs, sourceSeg?) {\r\n    // Subclasses must implement\r\n  }\r\n\r\n\r\n  unrender() {\r\n    if (this.helperEls) {\r\n      this.helperEls.remove()\r\n      this.helperEls = null\r\n    }\r\n  }\r\n\r\n\r\n  fabricateEventFootprint(componentFootprint) {\r\n    let calendar = this.view.calendar\r\n    let eventDateProfile = calendar.footprintToDateProfile(componentFootprint)\r\n    let dummyEvent = new SingleEventDef(new EventSource(calendar))\r\n    let dummyInstance\r\n\r\n    dummyEvent.dateProfile = eventDateProfile\r\n    dummyInstance = dummyEvent.buildInstance()\r\n\r\n    return new EventFootprint(componentFootprint, dummyEvent, dummyInstance)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/renderers/HelperRenderer.ts","import GlobalEmitter from '../../common/GlobalEmitter'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class EventPointing extends Interaction {\r\n\r\n  mousedOverSeg: any // the segment object the user's mouse is over. null if over nothing\r\n\r\n\r\n  /*\r\n  component must implement:\r\n    - publiclyTrigger\r\n  */\r\n\r\n\r\n  bindToEl(el) {\r\n    let component = this.component\r\n\r\n    component.bindSegHandlerToEl(el, 'click', this.handleClick.bind(this))\r\n    component.bindSegHandlerToEl(el, 'mouseenter', this.handleMouseover.bind(this))\r\n    component.bindSegHandlerToEl(el, 'mouseleave', this.handleMouseout.bind(this))\r\n  }\r\n\r\n\r\n  handleClick(seg, ev) {\r\n    let res = this.component.publiclyTrigger('eventClick', { // can return `false` to cancel\r\n      context: seg.el[0],\r\n      args: [ seg.footprint.getEventLegacy(), ev, this.view ]\r\n    })\r\n    if (res === false) {\r\n      ev.preventDefault()\r\n    }\r\n  }\r\n\r\n\r\n  // Updates internal state and triggers handlers for when an event element is moused over\r\n  handleMouseover(seg, ev) {\r\n    if (\r\n      !GlobalEmitter.get().shouldIgnoreMouse() &&\r\n      !this.mousedOverSeg\r\n    ) {\r\n      this.mousedOverSeg = seg\r\n\r\n      // TODO: move to EventSelecting's responsibility\r\n      if (this.view.isEventDefResizable(seg.footprint.eventDef)) {\r\n        seg.el.addClass('fc-allow-mouse-resize')\r\n      }\r\n\r\n      this.component.publiclyTrigger('eventMouseover', {\r\n        context: seg.el[0],\r\n        args: [ seg.footprint.getEventLegacy(), ev, this.view ]\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // Updates internal state and triggers handlers for when an event element is moused out.\r\n  // Can be given no arguments, in which case it will mouseout the segment that was previously moused over.\r\n  handleMouseout(seg, ev?) {\r\n    if (this.mousedOverSeg) {\r\n      this.mousedOverSeg = null\r\n\r\n      // TODO: move to EventSelecting's responsibility\r\n      if (this.view.isEventDefResizable(seg.footprint.eventDef)) {\r\n        seg.el.removeClass('fc-allow-mouse-resize')\r\n      }\r\n\r\n      this.component.publiclyTrigger('eventMouseout', {\r\n        context: seg.el[0],\r\n        args: [\r\n          seg.footprint.getEventLegacy(),\r\n          ev || {}, // if given no arg, make a mock mouse event\r\n          this.view\r\n        ]\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  end() {\r\n    if (this.mousedOverSeg) {\r\n      this.handleMouseout(this.mousedOverSeg)\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/EventPointing.ts","import Mixin from '../../common/Mixin'\r\nimport DateClicking from './DateClicking'\r\nimport DateSelecting from './DateSelecting'\r\nimport EventPointing from './EventPointing'\r\nimport EventDragging from './EventDragging'\r\nimport EventResizing from './EventResizing'\r\nimport ExternalDropping from './ExternalDropping'\r\n\r\nexport default class StandardInteractionsMixin extends Mixin {\r\n}\r\n\r\n(StandardInteractionsMixin as any).prototype.dateClickingClass = DateClicking;\r\n(StandardInteractionsMixin as any).prototype.dateSelectingClass = DateSelecting;\r\n(StandardInteractionsMixin as any).prototype.eventPointingClass = EventPointing;\r\n(StandardInteractionsMixin as any).prototype.eventDraggingClass = EventDragging;\r\n(StandardInteractionsMixin as any).prototype.eventResizingClass = EventResizing;\r\n(StandardInteractionsMixin as any).prototype.externalDroppingClass = ExternalDropping\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/StandardInteractionsMixin.ts","import * as $ from 'jquery'\r\nimport { htmlEscape } from '../util'\r\nimport CoordCache from '../common/CoordCache'\r\nimport Popover from '../common/Popover'\r\nimport UnzonedRange from '../models/UnzonedRange'\r\nimport ComponentFootprint from '../models/ComponentFootprint'\r\nimport EventFootprint from '../models/event/EventFootprint'\r\nimport BusinessHourRenderer from '../component/renderers/BusinessHourRenderer'\r\nimport StandardInteractionsMixin from '../component/interactions/StandardInteractionsMixin'\r\nimport InteractiveDateComponent from '../component/InteractiveDateComponent'\r\nimport { default as DayTableMixin, DayTableInterface } from '../component/DayTableMixin'\r\nimport DayGridEventRenderer from './DayGridEventRenderer'\r\nimport DayGridHelperRenderer from './DayGridHelperRenderer'\r\nimport DayGridFillRenderer from './DayGridFillRenderer'\r\n\r\n\r\n/* A component that renders a grid of whole-days that runs horizontally. There can be multiple rows, one per week.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class DayGrid extends InteractiveDateComponent {\r\n\r\n  rowCnt: DayTableInterface['rowCnt']\r\n  colCnt: DayTableInterface['colCnt']\r\n  daysPerRow: DayTableInterface['daysPerRow']\r\n  sliceRangeByRow: DayTableInterface['sliceRangeByRow']\r\n  updateDayTable: DayTableInterface['updateDayTable']\r\n  renderHeadHtml: DayTableInterface['renderHeadHtml']\r\n  getCellDate: DayTableInterface['getCellDate']\r\n  renderBgTrHtml: DayTableInterface['renderBgTrHtml']\r\n  renderIntroHtml: DayTableInterface['renderIntroHtml']\r\n  getCellRange: DayTableInterface['getCellRange']\r\n  sliceRangeByDay: DayTableInterface['sliceRangeByDay']\r\n\r\n  view: any // TODO: make more general and/or remove\r\n  helperRenderer: any\r\n\r\n  cellWeekNumbersVisible: boolean = false // display week numbers in day cell?\r\n\r\n  bottomCoordPadding: number = 0 // hack for extending the hit area for the last row of the coordinate grid\r\n\r\n  headContainerEl: any // div that hold's the date header\r\n  rowEls: any // set of fake row elements\r\n  cellEls: any // set of whole-day elements comprising the row's background\r\n\r\n  rowCoordCache: any\r\n  colCoordCache: any\r\n\r\n  // isRigid determines whether the individual rows should ignore the contents and be a constant height.\r\n  // Relies on the view's colCnt and rowCnt. In the future, this component should probably be self-sufficient.\r\n  isRigid: boolean = false\r\n\r\n  hasAllDayBusinessHours: boolean = true\r\n\r\n  segPopover: any // the Popover that holds events that can't fit in a cell. null when not visible\r\n  popoverSegs: any // an array of segment objects that the segPopover holds. null when not visible\r\n\r\n\r\n  constructor(view) { // view is required, unlike superclass\r\n    super(view)\r\n  }\r\n\r\n\r\n  // Slices up the given span (unzoned start/end with other misc data) into an array of segments\r\n  componentFootprintToSegs(componentFootprint) {\r\n    let segs = this.sliceRangeByRow(componentFootprint.unzonedRange)\r\n    let i\r\n    let seg\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n\r\n      if (this.isRTL) {\r\n        seg.leftCol = this.daysPerRow - 1 - seg.lastRowDayIndex\r\n        seg.rightCol = this.daysPerRow - 1 - seg.firstRowDayIndex\r\n      } else {\r\n        seg.leftCol = seg.firstRowDayIndex\r\n        seg.rightCol = seg.lastRowDayIndex\r\n      }\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  /* Date Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderDates(dateProfile) {\r\n    this.dateProfile = dateProfile\r\n    this.updateDayTable()\r\n    this.renderGrid()\r\n  }\r\n\r\n\r\n  unrenderDates() {\r\n    this.removeSegPopover()\r\n  }\r\n\r\n\r\n  // Renders the rows and columns into the component's `this.el`, which should already be assigned.\r\n  renderGrid() {\r\n    let view = this.view\r\n    let rowCnt = this.rowCnt\r\n    let colCnt = this.colCnt\r\n    let html = ''\r\n    let row\r\n    let col\r\n\r\n    if (this.headContainerEl) {\r\n      this.headContainerEl.html(this.renderHeadHtml())\r\n    }\r\n\r\n    for (row = 0; row < rowCnt; row++) {\r\n      html += this.renderDayRowHtml(row, this.isRigid)\r\n    }\r\n    this.el.html(html)\r\n\r\n    this.rowEls = this.el.find('.fc-row')\r\n    this.cellEls = this.el.find('.fc-day, .fc-disabled-day')\r\n\r\n    this.rowCoordCache = new CoordCache({\r\n      els: this.rowEls,\r\n      isVertical: true\r\n    })\r\n    this.colCoordCache = new CoordCache({\r\n      els: this.cellEls.slice(0, this.colCnt), // only the first row\r\n      isHorizontal: true\r\n    })\r\n\r\n    // trigger dayRender with each cell's element\r\n    for (row = 0; row < rowCnt; row++) {\r\n      for (col = 0; col < colCnt; col++) {\r\n        this.publiclyTrigger('dayRender', {\r\n          context: view,\r\n          args: [\r\n            this.getCellDate(row, col),\r\n            this.getCellEl(row, col),\r\n            view\r\n          ]\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Generates the HTML for a single row, which is a div that wraps a table.\r\n  // `row` is the row number.\r\n  renderDayRowHtml(row, isRigid) {\r\n    let theme = this.view.calendar.theme\r\n    let classes = [ 'fc-row', 'fc-week', theme.getClass('dayRow') ]\r\n\r\n    if (isRigid) {\r\n      classes.push('fc-rigid')\r\n    }\r\n\r\n    return '' +\r\n      '<div class=\"' + classes.join(' ') + '\">' +\r\n        '<div class=\"fc-bg\">' +\r\n          '<table align=\"center\" class=\"' + theme.getClass('tableGrid') + '\">' +\r\n            this.renderBgTrHtml(row) +\r\n          '</table>' +\r\n        '</div>' +\r\n        '<div class=\"fc-content-skeleton\">' +\r\n          '<table>' +\r\n            (this.getIsNumbersVisible() ?\r\n              '<thead>' +\r\n                this.renderNumberTrHtml(row) +\r\n              '</thead>' :\r\n              ''\r\n              ) +\r\n          '</table>' +\r\n        '</div>' +\r\n      '</div>'\r\n  }\r\n\r\n\r\n  getIsNumbersVisible() {\r\n    return this.getIsDayNumbersVisible() || this.cellWeekNumbersVisible\r\n  }\r\n\r\n\r\n  getIsDayNumbersVisible() {\r\n    return this.rowCnt > 1\r\n  }\r\n\r\n\r\n  /* Grid Number Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderNumberTrHtml(row) {\r\n    return '' +\r\n      '<tr>' +\r\n        (this.isRTL ? '' : this.renderNumberIntroHtml(row)) +\r\n        this.renderNumberCellsHtml(row) +\r\n        (this.isRTL ? this.renderNumberIntroHtml(row) : '') +\r\n      '</tr>'\r\n  }\r\n\r\n\r\n  renderNumberIntroHtml(row) {\r\n    return this.renderIntroHtml()\r\n  }\r\n\r\n\r\n  renderNumberCellsHtml(row) {\r\n    let htmls = []\r\n    let col\r\n    let date\r\n\r\n    for (col = 0; col < this.colCnt; col++) {\r\n      date = this.getCellDate(row, col)\r\n      htmls.push(this.renderNumberCellHtml(date))\r\n    }\r\n\r\n    return htmls.join('')\r\n  }\r\n\r\n\r\n  // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\r\n  // The number row will only exist if either day numbers or week numbers are turned on.\r\n  renderNumberCellHtml(date) {\r\n    let view = this.view\r\n    let html = ''\r\n    let isDateValid = this.dateProfile.activeUnzonedRange.containsDate(date) // TODO: called too frequently. cache somehow.\r\n    let isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid\r\n    let classes\r\n    let weekCalcFirstDoW\r\n\r\n    if (!isDayNumberVisible && !this.cellWeekNumbersVisible) {\r\n      // no numbers in day cell (week number must be along the side)\r\n      return '<td/>' //  will create an empty space above events :(\r\n    }\r\n\r\n    classes = this.getDayClasses(date)\r\n    classes.unshift('fc-day-top')\r\n\r\n    if (this.cellWeekNumbersVisible) {\r\n      // To determine the day of week number change under ISO, we cannot\r\n      // rely on moment.js methods such as firstDayOfWeek() or weekday(),\r\n      // because they rely on the locale's dow (possibly overridden by\r\n      // our firstDay option), which may not be Monday. We cannot change\r\n      // dow, because that would affect the calendar start day as well.\r\n      if (date._locale._fullCalendar_weekCalc === 'ISO') {\r\n        weekCalcFirstDoW = 1  // Monday by ISO 8601 definition\r\n      } else {\r\n        weekCalcFirstDoW = date._locale.firstDayOfWeek()\r\n      }\r\n    }\r\n\r\n    html += '<td class=\"' + classes.join(' ') + '\"' +\r\n      (isDateValid ?\r\n        ' data-date=\"' + date.format() + '\"' :\r\n        ''\r\n        ) +\r\n      '>'\r\n\r\n    if (this.cellWeekNumbersVisible && (date.day() === weekCalcFirstDoW)) {\r\n      html += view.buildGotoAnchorHtml(\r\n        { date: date, type: 'week' },\r\n        { 'class': 'fc-week-number' },\r\n        date.format('w') // inner HTML\r\n      )\r\n    }\r\n\r\n    if (isDayNumberVisible) {\r\n      html += view.buildGotoAnchorHtml(\r\n        date,\r\n        { 'class': 'fc-day-number' },\r\n        date.format('D') // inner HTML\r\n      )\r\n    }\r\n\r\n    html += '</td>'\r\n\r\n\r\n    return html\r\n  }\r\n\r\n\r\n  /* Hit System\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n  prepareHits() {\r\n    this.colCoordCache.build()\r\n    this.rowCoordCache.build()\r\n    this.rowCoordCache.bottoms[this.rowCnt - 1] += this.bottomCoordPadding // hack\r\n  }\r\n\r\n\r\n  releaseHits() {\r\n    this.colCoordCache.clear()\r\n    this.rowCoordCache.clear()\r\n  }\r\n\r\n\r\n  queryHit(leftOffset, topOffset) {\r\n    if (this.colCoordCache.isLeftInBounds(leftOffset) && this.rowCoordCache.isTopInBounds(topOffset)) {\r\n      let col = this.colCoordCache.getHorizontalIndex(leftOffset)\r\n      let row = this.rowCoordCache.getVerticalIndex(topOffset)\r\n\r\n      if (row != null && col != null) {\r\n        return this.getCellHit(row, col)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  getHitFootprint(hit) {\r\n    let range = this.getCellRange(hit.row, hit.col)\r\n\r\n    return new ComponentFootprint(\r\n      new UnzonedRange(range.start, range.end),\r\n      true // all-day?\r\n    )\r\n  }\r\n\r\n\r\n  getHitEl(hit) {\r\n    return this.getCellEl(hit.row, hit.col)\r\n  }\r\n\r\n\r\n  /* Cell System\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n  // FYI: the first column is the leftmost column, regardless of date\r\n\r\n\r\n  getCellHit(row, col): any {\r\n    return {\r\n      row: row,\r\n      col: col,\r\n      component: this, // needed unfortunately :(\r\n      left: this.colCoordCache.getLeftOffset(col),\r\n      right: this.colCoordCache.getRightOffset(col),\r\n      top: this.rowCoordCache.getTopOffset(row),\r\n      bottom: this.rowCoordCache.getBottomOffset(row)\r\n    }\r\n  }\r\n\r\n\r\n  getCellEl(row, col) {\r\n    return this.cellEls.eq(row * this.colCnt + col)\r\n  }\r\n\r\n\r\n  /* Event Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Unrenders all events currently rendered on the grid\r\n  executeEventUnrender() {\r\n    this.removeSegPopover() // removes the \"more..\" events popover\r\n    super.executeEventUnrender()\r\n  }\r\n\r\n\r\n  // Retrieves all rendered segment objects currently rendered on the grid\r\n  getOwnEventSegs() {\r\n    // append the segments from the \"more...\" popover\r\n    return super.getOwnEventSegs().concat(this.popoverSegs || [])\r\n  }\r\n\r\n\r\n  /* Event Drag Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of an event or external element being dragged.\r\n  // `eventLocation` has zoned start and end (optional)\r\n  renderDrag(eventFootprints, seg, isTouch) {\r\n    let i\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      this.renderHighlight(eventFootprints[i].componentFootprint)\r\n    }\r\n\r\n    // render drags from OTHER components as helpers\r\n    if (eventFootprints.length && seg && seg.component !== this) {\r\n      this.helperRenderer.renderEventDraggingFootprints(eventFootprints, seg, isTouch)\r\n\r\n      return true // signal helpers rendered\r\n    }\r\n  }\r\n\r\n\r\n  // Unrenders any visual indication of a hovering event\r\n  unrenderDrag() {\r\n    this.unrenderHighlight()\r\n    this.helperRenderer.unrender()\r\n  }\r\n\r\n\r\n  /* Event Resize Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of an event being resized\r\n  renderEventResize(eventFootprints, seg, isTouch) {\r\n    let i\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      this.renderHighlight(eventFootprints[i].componentFootprint)\r\n    }\r\n\r\n    this.helperRenderer.renderEventResizingFootprints(eventFootprints, seg, isTouch)\r\n  }\r\n\r\n\r\n  // Unrenders a visual indication of an event being resized\r\n  unrenderEventResize() {\r\n    this.unrenderHighlight()\r\n    this.helperRenderer.unrender()\r\n  }\r\n\r\n\r\n  /* More+ Link Popover\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  removeSegPopover() {\r\n    if (this.segPopover) {\r\n      this.segPopover.hide() // in handler, will call segPopover's removeElement\r\n    }\r\n  }\r\n\r\n\r\n  // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\r\n  // `levelLimit` can be false (don't limit), a number, or true (should be computed).\r\n  limitRows(levelLimit) {\r\n    let rowStructs = this.eventRenderer.rowStructs || []\r\n    let row // row #\r\n    let rowLevelLimit\r\n\r\n    for (row = 0; row < rowStructs.length; row++) {\r\n      this.unlimitRow(row)\r\n\r\n      if (!levelLimit) {\r\n        rowLevelLimit = false\r\n      } else if (typeof levelLimit === 'number') {\r\n        rowLevelLimit = levelLimit\r\n      } else {\r\n        rowLevelLimit = this.computeRowLevelLimit(row)\r\n      }\r\n\r\n      if (rowLevelLimit !== false) {\r\n        this.limitRow(row, rowLevelLimit)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Computes the number of levels a row will accomodate without going outside its bounds.\r\n  // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\r\n  // `row` is the row number.\r\n  computeRowLevelLimit(row): (number | false) {\r\n    let rowEl = this.rowEls.eq(row) // the containing \"fake\" row div\r\n    let rowHeight = rowEl.height() // TODO: cache somehow?\r\n    let trEls = this.eventRenderer.rowStructs[row].tbodyEl.children()\r\n    let i\r\n    let trEl\r\n    let trHeight\r\n\r\n    function iterInnerHeights(i, childNode) {\r\n      trHeight = Math.max(trHeight, $(childNode).outerHeight())\r\n    }\r\n\r\n    // Reveal one level <tr> at a time and stop when we find one out of bounds\r\n    for (i = 0; i < trEls.length; i++) {\r\n      trEl = trEls.eq(i).removeClass('fc-limited') // reset to original state (reveal)\r\n\r\n      // with rowspans>1 and IE8, trEl.outerHeight() would return the height of the largest cell,\r\n      // so instead, find the tallest inner content element.\r\n      trHeight = 0\r\n      trEl.find('> td > :first-child').each(iterInnerHeights)\r\n\r\n      if (trEl.position().top + trHeight > rowHeight) {\r\n        return i\r\n      }\r\n    }\r\n\r\n    return false // should not limit at all\r\n  }\r\n\r\n\r\n  // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\r\n  // `row` is the row number.\r\n  // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\r\n  limitRow(row, levelLimit) {\r\n    let rowStruct = this.eventRenderer.rowStructs[row]\r\n    let moreNodes = [] // array of \"more\" <a> links and <td> DOM nodes\r\n    let col = 0 // col #, left-to-right (not chronologically)\r\n    let levelSegs // array of segment objects in the last allowable level, ordered left-to-right\r\n    let cellMatrix // a matrix (by level, then column) of all <td> jQuery elements in the row\r\n    let limitedNodes // array of temporarily hidden level <tr> and segment <td> DOM nodes\r\n    let i\r\n    let seg\r\n    let segsBelow // array of segment objects below `seg` in the current `col`\r\n    let totalSegsBelow // total number of segments below `seg` in any of the columns `seg` occupies\r\n    let colSegsBelow // array of segment arrays, below seg, one for each column (offset from segs's first column)\r\n    let td\r\n    let rowspan\r\n    let segMoreNodes // array of \"more\" <td> cells that will stand-in for the current seg's cell\r\n    let j\r\n    let moreTd\r\n    let moreWrap\r\n    let moreLink\r\n\r\n    // Iterates through empty level cells and places \"more\" links inside if need be\r\n    let emptyCellsUntil = (endCol) => { // goes from current `col` to `endCol`\r\n      while (col < endCol) {\r\n        segsBelow = this.getCellSegs(row, col, levelLimit)\r\n        if (segsBelow.length) {\r\n          td = cellMatrix[levelLimit - 1][col]\r\n          moreLink = this.renderMoreLink(row, col, segsBelow)\r\n          moreWrap = $('<div/>').append(moreLink)\r\n          td.append(moreWrap)\r\n          moreNodes.push(moreWrap[0])\r\n        }\r\n        col++\r\n      }\r\n    }\r\n\r\n    if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\r\n      levelSegs = rowStruct.segLevels[levelLimit - 1]\r\n      cellMatrix = rowStruct.cellMatrix\r\n\r\n      limitedNodes = rowStruct.tbodyEl.children().slice(levelLimit) // get level <tr> elements past the limit\r\n        .addClass('fc-limited').get() // hide elements and get a simple DOM-nodes array\r\n\r\n      // iterate though segments in the last allowable level\r\n      for (i = 0; i < levelSegs.length; i++) {\r\n        seg = levelSegs[i]\r\n        emptyCellsUntil(seg.leftCol) // process empty cells before the segment\r\n\r\n        // determine *all* segments below `seg` that occupy the same columns\r\n        colSegsBelow = []\r\n        totalSegsBelow = 0\r\n        while (col <= seg.rightCol) {\r\n          segsBelow = this.getCellSegs(row, col, levelLimit)\r\n          colSegsBelow.push(segsBelow)\r\n          totalSegsBelow += segsBelow.length\r\n          col++\r\n        }\r\n\r\n        if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\r\n          td = cellMatrix[levelLimit - 1][seg.leftCol] // the segment's parent cell\r\n          rowspan = td.attr('rowspan') || 1\r\n          segMoreNodes = []\r\n\r\n          // make a replacement <td> for each column the segment occupies. will be one for each colspan\r\n          for (j = 0; j < colSegsBelow.length; j++) {\r\n            moreTd = $('<td class=\"fc-more-cell\"/>').attr('rowspan', rowspan)\r\n            segsBelow = colSegsBelow[j]\r\n            moreLink = this.renderMoreLink(\r\n              row,\r\n              seg.leftCol + j,\r\n              [ seg ].concat(segsBelow) // count seg as hidden too\r\n            )\r\n            moreWrap = $('<div/>').append(moreLink)\r\n            moreTd.append(moreWrap)\r\n            segMoreNodes.push(moreTd[0])\r\n            moreNodes.push(moreTd[0])\r\n          }\r\n\r\n          td.addClass('fc-limited').after($(segMoreNodes)) // hide original <td> and inject replacements\r\n          limitedNodes.push(td[0])\r\n        }\r\n      }\r\n\r\n      emptyCellsUntil(this.colCnt) // finish off the level\r\n      rowStruct.moreEls = $(moreNodes) // for easy undoing later\r\n      rowStruct.limitedEls = $(limitedNodes) // for easy undoing later\r\n    }\r\n  }\r\n\r\n\r\n  // Reveals all levels and removes all \"more\"-related elements for a grid's row.\r\n  // `row` is a row number.\r\n  unlimitRow(row) {\r\n    let rowStruct = this.eventRenderer.rowStructs[row]\r\n\r\n    if (rowStruct.moreEls) {\r\n      rowStruct.moreEls.remove()\r\n      rowStruct.moreEls = null\r\n    }\r\n\r\n    if (rowStruct.limitedEls) {\r\n      rowStruct.limitedEls.removeClass('fc-limited')\r\n      rowStruct.limitedEls = null\r\n    }\r\n  }\r\n\r\n\r\n  // Renders an <a> element that represents hidden event element for a cell.\r\n  // Responsible for attaching click handler as well.\r\n  renderMoreLink(row, col, hiddenSegs) {\r\n    let view = this.view\r\n\r\n    return $('<a class=\"fc-more\"/>')\r\n      .text(\r\n        this.getMoreLinkText(hiddenSegs.length)\r\n      )\r\n      .on('click', (ev) => {\r\n        let clickOption = this.opt('eventLimitClick')\r\n        let date = this.getCellDate(row, col)\r\n        let moreEl = $(ev.currentTarget)\r\n        let dayEl = this.getCellEl(row, col)\r\n        let allSegs = this.getCellSegs(row, col)\r\n\r\n        // rescope the segments to be within the cell's date\r\n        let reslicedAllSegs = this.resliceDaySegs(allSegs, date)\r\n        let reslicedHiddenSegs = this.resliceDaySegs(hiddenSegs, date)\r\n\r\n        if (typeof clickOption === 'function') {\r\n          // the returned value can be an atomic option\r\n          clickOption = this.publiclyTrigger('eventLimitClick', {\r\n            context: view,\r\n            args: [\r\n              {\r\n                date: date.clone(),\r\n                dayEl: dayEl,\r\n                moreEl: moreEl,\r\n                segs: reslicedAllSegs,\r\n                hiddenSegs: reslicedHiddenSegs\r\n              },\r\n              ev,\r\n              view\r\n            ]\r\n          })\r\n        }\r\n\r\n        if (clickOption === 'popover') {\r\n          this.showSegPopover(row, col, moreEl, reslicedAllSegs)\r\n        } else if (typeof clickOption === 'string') { // a view name\r\n          view.calendar.zoomTo(date, clickOption)\r\n        }\r\n      })\r\n  }\r\n\r\n\r\n  // Reveals the popover that displays all events within a cell\r\n  showSegPopover(row, col, moreLink, segs) {\r\n    let view = this.view\r\n    let moreWrap = moreLink.parent() // the <div> wrapper around the <a>\r\n    let topEl // the element we want to match the top coordinate of\r\n    let options\r\n\r\n    if (this.rowCnt === 1) {\r\n      topEl = view.el // will cause the popover to cover any sort of header\r\n    } else {\r\n      topEl = this.rowEls.eq(row) // will align with top of row\r\n    }\r\n\r\n    options = {\r\n      className: 'fc-more-popover ' + view.calendar.theme.getClass('popover'),\r\n      content: this.renderSegPopoverContent(row, col, segs),\r\n      parentEl: view.el, // attach to root of view. guarantees outside of scrollbars.\r\n      top: topEl.offset().top,\r\n      autoHide: true, // when the user clicks elsewhere, hide the popover\r\n      viewportConstrain: this.opt('popoverViewportConstrain'),\r\n      hide: () => {\r\n        // kill everything when the popover is hidden\r\n        // notify events to be removed\r\n        if (this.popoverSegs) {\r\n          this.triggerBeforeEventSegsDestroyed(this.popoverSegs)\r\n        }\r\n        this.segPopover.removeElement()\r\n        this.segPopover = null\r\n        this.popoverSegs = null\r\n      }\r\n    }\r\n\r\n    // Determine horizontal coordinate.\r\n    // We use the moreWrap instead of the <td> to avoid border confusion.\r\n    if (this.isRTL) {\r\n      options.right = moreWrap.offset().left + moreWrap.outerWidth() + 1 // +1 to be over cell border\r\n    } else {\r\n      options.left = moreWrap.offset().left - 1 // -1 to be over cell border\r\n    }\r\n\r\n    this.segPopover = new Popover(options)\r\n    this.segPopover.show()\r\n\r\n    // the popover doesn't live within the grid's container element, and thus won't get the event\r\n    // delegated-handlers for free. attach event-related handlers to the popover.\r\n    this.bindAllSegHandlersToEl(this.segPopover.el)\r\n\r\n    this.triggerAfterEventSegsRendered(segs)\r\n  }\r\n\r\n\r\n  // Builds the inner DOM contents of the segment popover\r\n  renderSegPopoverContent(row, col, segs) {\r\n    let view = this.view\r\n    let theme = view.calendar.theme\r\n    let title = this.getCellDate(row, col).format(this.opt('dayPopoverFormat'))\r\n    let content = $(\r\n      '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\r\n        '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\r\n        '<span class=\"fc-title\">' +\r\n          htmlEscape(title) +\r\n        '</span>' +\r\n        '<div class=\"fc-clear\"/>' +\r\n      '</div>' +\r\n      '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\r\n        '<div class=\"fc-event-container\"></div>' +\r\n      '</div>'\r\n    )\r\n    let segContainer = content.find('.fc-event-container')\r\n    let i\r\n\r\n    // render each seg's `el` and only return the visible segs\r\n    segs = this.eventRenderer.renderFgSegEls(segs, true) // disableResizing=true\r\n    this.popoverSegs = segs\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n\r\n      // because segments in the popover are not part of a grid coordinate system, provide a hint to any\r\n      // grids that want to do drag-n-drop about which cell it came from\r\n      this.hitsNeeded()\r\n      segs[i].hit = this.getCellHit(row, col)\r\n      this.hitsNotNeeded()\r\n\r\n      segContainer.append(segs[i].el)\r\n    }\r\n\r\n    return content\r\n  }\r\n\r\n\r\n  // Given the events within an array of segment objects, reslice them to be in a single day\r\n  resliceDaySegs(segs, dayDate) {\r\n    let dayStart = dayDate.clone()\r\n    let dayEnd = dayStart.clone().add(1, 'days')\r\n    let dayRange = new UnzonedRange(dayStart, dayEnd)\r\n    let newSegs = []\r\n    let i\r\n    let seg\r\n    let slicedRange\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      slicedRange = seg.footprint.componentFootprint.unzonedRange.intersect(dayRange)\r\n\r\n      if (slicedRange) {\r\n        newSegs.push(\r\n          $.extend({}, seg, {\r\n            footprint: new EventFootprint(\r\n              new ComponentFootprint(\r\n                slicedRange,\r\n                seg.footprint.componentFootprint.isAllDay\r\n              ),\r\n              seg.footprint.eventDef,\r\n              seg.footprint.eventInstance\r\n            ),\r\n            isStart: seg.isStart && slicedRange.isStart,\r\n            isEnd: seg.isEnd && slicedRange.isEnd\r\n          })\r\n        )\r\n      }\r\n    }\r\n\r\n    // force an order because eventsToSegs doesn't guarantee one\r\n    // TODO: research if still needed\r\n    this.eventRenderer.sortEventSegs(newSegs)\r\n\r\n    return newSegs\r\n  }\r\n\r\n\r\n  // Generates the text that should be inside a \"more\" link, given the number of events it represents\r\n  getMoreLinkText(num) {\r\n    let opt = this.opt('eventLimitText')\r\n\r\n    if (typeof opt === 'function') {\r\n      return opt(num)\r\n    } else {\r\n      return '+' + num + ' ' + opt\r\n    }\r\n  }\r\n\r\n\r\n  // Returns segments within a given cell.\r\n  // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\r\n  getCellSegs(row, col, startLevel?) {\r\n    let segMatrix = this.eventRenderer.rowStructs[row].segMatrix\r\n    let level = startLevel || 0\r\n    let segs = []\r\n    let seg\r\n\r\n    while (level < segMatrix.length) {\r\n      seg = segMatrix[level][col]\r\n      if (seg) {\r\n        segs.push(seg)\r\n      }\r\n      level++\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n}\r\n\r\nDayGrid.prototype.eventRendererClass = DayGridEventRenderer\r\nDayGrid.prototype.businessHourRendererClass = BusinessHourRenderer\r\nDayGrid.prototype.helperRendererClass = DayGridHelperRenderer\r\nDayGrid.prototype.fillRendererClass = DayGridFillRenderer\r\n\r\nStandardInteractionsMixin.mixInto(DayGrid)\r\nDayTableMixin.mixInto(DayGrid)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/DayGrid.ts","import * as $ from 'jquery'\r\nimport {\r\n  matchCellWidths,\r\n  uncompensateScroll,\r\n  compensateScroll,\r\n  subtractInnerElHeight,\r\n  distributeHeight,\r\n  undistributeHeight,\r\n  htmlEscape\r\n} from '../util'\r\nimport Scroller from '../common/Scroller'\r\nimport View from '../View'\r\nimport BasicViewDateProfileGenerator from './BasicViewDateProfileGenerator'\r\nimport DayGrid from './DayGrid'\r\n\r\n\r\n/* An abstract class for the \"basic\" views, as well as month view. Renders one or more rows of day cells.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\r\n// It is responsible for managing width/height.\r\n\r\nexport default class BasicView extends View {\r\n\r\n  // initialized after class\r\n  dateProfileGeneratorClass: any\r\n  dayGridClass: any // class the dayGrid will be instantiated from (overridable by subclasses)\r\n\r\n  scroller: any\r\n  dayGrid: any // the main subcomponent that does most of the heavy lifting\r\n\r\n  weekNumberWidth: any // width of all the week-number cells running down the side\r\n\r\n\r\n  constructor(calendar, viewSpec) {\r\n    super(calendar, viewSpec)\r\n\r\n    this.dayGrid = this.instantiateDayGrid()\r\n    this.dayGrid.isRigid = this.hasRigidRows()\r\n\r\n    if (this.opt('weekNumbers')) {\r\n      if (this.opt('weekNumbersWithinDays')) {\r\n        this.dayGrid.cellWeekNumbersVisible = true\r\n        this.dayGrid.colWeekNumbersVisible = false\r\n      } else {\r\n        this.dayGrid.cellWeekNumbersVisible = false\r\n        this.dayGrid.colWeekNumbersVisible = true\r\n      }\r\n    }\r\n\r\n    this.addChild(this.dayGrid)\r\n\r\n    this.scroller = new Scroller({\r\n      overflowX: 'hidden',\r\n      overflowY: 'auto'\r\n    })\r\n  }\r\n\r\n\r\n  // Generates the DayGrid object this view needs. Draws from this.dayGridClass\r\n  instantiateDayGrid() {\r\n    // generate a subclass on the fly with BasicView-specific behavior\r\n    // TODO: cache this subclass\r\n    let subclass: any = makeDayGridSubclass(this.dayGridClass)\r\n\r\n    return new subclass(this)\r\n  }\r\n\r\n\r\n  executeDateRender(dateProfile) {\r\n    this.dayGrid.breakOnWeeks = /year|month|week/.test(dateProfile.currentRangeUnit)\r\n\r\n    super.executeDateRender(dateProfile)\r\n  }\r\n\r\n\r\n  renderSkeleton() {\r\n    // let isMobile = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.userAgent);\r\n    // if (isMobile) {\r\n    //   console.log('test')\r\n    // } else {\r\n    // }\r\n    let dayGridContainerEl\r\n    let dayGridEl\r\n    this.el.addClass('fc-basic-view').html(this.renderSkeletonHtml())\r\n    this.scroller.render()\r\n\r\n    dayGridContainerEl = this.scroller.el.addClass('fc-day-grid-container')\r\n    dayGridEl = $('<div class=\"fc-day-grid\" />').appendTo(dayGridContainerEl)\r\n    this.el.find('.fc-body > tr > td').append(dayGridContainerEl)\r\n    this.dayGrid.headContainerEl = this.el.find('.fc-head-container')\r\n    this.dayGrid.setElement(dayGridEl)\r\n  }\r\n\r\n\r\n  unrenderSkeleton() {\r\n    this.dayGrid.removeElement()\r\n    this.scroller.destroy()\r\n  }\r\n\r\n\r\n  // Builds the HTML skeleton for the view.\r\n  // The day-grid component will render inside of a container defined by this HTML.\r\n  renderSkeletonHtml() {\r\n    let theme = this.calendar.theme\r\n\r\n    return '' +\r\n      '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n        (this.opt('columnHeader') ?\r\n          '<thead class=\"fc-head\">' +\r\n            '<tr>' +\r\n              '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\r\n            '</tr>' +\r\n          '</thead>' :\r\n          ''\r\n          ) +\r\n        '<tbody class=\"fc-body\">' +\r\n          '<tr>' +\r\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\r\n          '</tr>' +\r\n        '</tbody>' +\r\n      '</table>'\r\n  }\r\n\r\n\r\n  // Generates an HTML attribute string for setting the width of the week number column, if it is known\r\n  weekNumberStyleAttr() {\r\n    if (this.weekNumberWidth != null) {\r\n      return 'style=\"width:' + this.weekNumberWidth + 'px\"'\r\n    }\r\n    return ''\r\n  }\r\n\r\n\r\n  // Determines whether each row should have a constant height\r\n  hasRigidRows() {\r\n    let eventLimit = this.opt('eventLimit')\r\n\r\n    return eventLimit && typeof eventLimit !== 'number'\r\n  }\r\n\r\n\r\n  /* Dimensions\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Refreshes the horizontal dimensions of the view\r\n  updateSize(totalHeight, isAuto, isResize) {\r\n    let eventLimit = this.opt('eventLimit')\r\n    let headRowEl = this.dayGrid.headContainerEl.find('.fc-row')\r\n    let scrollerHeight\r\n    let scrollbarWidths\r\n\r\n    // hack to give the view some height prior to dayGrid's columns being rendered\r\n    // TODO: separate setting height from scroller VS dayGrid.\r\n    if (!this.dayGrid.rowEls) {\r\n      if (!isAuto) {\r\n        scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n      return\r\n    }\r\n\r\n    super.updateSize(totalHeight, isAuto, isResize)\r\n\r\n    if (this.dayGrid.colWeekNumbersVisible) {\r\n      // Make sure all week number cells running down the side have the same width.\r\n      // Record the width for cells created later.\r\n      this.weekNumberWidth = matchCellWidths(\r\n        this.el.find('.fc-week-number')\r\n      )\r\n    }\r\n\r\n    // reset all heights to be natural\r\n    this.scroller.clear()\r\n    uncompensateScroll(headRowEl)\r\n\r\n    this.dayGrid.removeSegPopover() // kill the \"more\" popover if displayed\r\n\r\n    // is the event limit a constant level number?\r\n    if (eventLimit && typeof eventLimit === 'number') {\r\n      this.dayGrid.limitRows(eventLimit) // limit the levels first so the height can redistribute after\r\n    }\r\n\r\n    // distribute the height to the rows\r\n    // (totalHeight is a \"recommended\" value if isAuto)\r\n    scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n    this.setGridHeight(scrollerHeight, isAuto)\r\n\r\n    // is the event limit dynamically calculated?\r\n    if (eventLimit && typeof eventLimit !== 'number') {\r\n      this.dayGrid.limitRows(eventLimit) // limit the levels after the grid's row heights have been set\r\n    }\r\n\r\n    if (!isAuto) { // should we force dimensions of the scroll container?\r\n\r\n      this.scroller.setHeight(scrollerHeight)\r\n      scrollbarWidths = this.scroller.getScrollbarWidths()\r\n\r\n      if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\r\n\r\n        compensateScroll(headRowEl, scrollbarWidths)\r\n\r\n        // doing the scrollbar compensation might have created text overflow which created more height. redo\r\n        scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n\r\n      // guarantees the same scrollbar widths\r\n      this.scroller.lockOverflow(scrollbarWidths)\r\n    }\r\n  }\r\n\r\n\r\n  // given a desired total height of the view, returns what the height of the scroller should be\r\n  computeScrollerHeight(totalHeight) {\r\n    return totalHeight -\r\n      subtractInnerElHeight(this.el, this.scroller.el) // everything that's NOT the scroller\r\n  }\r\n\r\n\r\n  // Sets the height of just the DayGrid component in this view\r\n  setGridHeight(height, isAuto) {\r\n    if (isAuto) {\r\n      undistributeHeight(this.dayGrid.rowEls) // let the rows be their natural height with no expanding\r\n    } else {\r\n      distributeHeight(this.dayGrid.rowEls, height, true) // true = compensate for height-hogging rows\r\n    }\r\n  }\r\n\r\n\r\n  /* Scroll\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  computeInitialDateScroll() {\r\n    return { top: 0 }\r\n  }\r\n\r\n\r\n  queryDateScroll() {\r\n    return { top: this.scroller.getScrollTop() }\r\n  }\r\n\r\n\r\n  applyDateScroll(scroll) {\r\n    if (scroll.top !== undefined) {\r\n      this.scroller.setScrollTop(scroll.top)\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nBasicView.prototype.dateProfileGeneratorClass = BasicViewDateProfileGenerator\r\nBasicView.prototype.dayGridClass = DayGrid\r\n\r\n\r\n// customize the rendering behavior of BasicView's dayGrid\r\nfunction makeDayGridSubclass(SuperClass) {\r\n\r\n  return class SubClass extends SuperClass {\r\n\r\n    colWeekNumbersVisible: boolean = false // display week numbers along the side?\r\n\r\n\r\n    // Generates the HTML that will go before the day-of week header cells\r\n    renderHeadIntroHtml() {\r\n      let view = this.view\r\n\r\n      if (this.colWeekNumbersVisible) {\r\n        return '' +\r\n          '<th class=\"fc-week-number ' + view.calendar.theme.getClass('widgetHeader') + '\" ' + view.weekNumberStyleAttr() + '>' +\r\n            '<span>' + // needed for matchCellWidths\r\n              htmlEscape(this.opt('weekNumberTitle')) +\r\n            '</span>' +\r\n          '</th>'\r\n      }\r\n\r\n      return ''\r\n    }\r\n\r\n\r\n    // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\r\n    renderNumberIntroHtml(row) {\r\n      let view = this.view\r\n      let weekStart = this.getCellDate(row, 0)\r\n\r\n      if (this.colWeekNumbersVisible) {\r\n        return '' +\r\n          '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '>' +\r\n            view.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\r\n              { date: weekStart, type: 'week', forceOff: this.colCnt === 1 },\r\n              weekStart.format('w') // inner HTML\r\n            ) +\r\n          '</td>'\r\n      }\r\n\r\n      return ''\r\n    }\r\n\r\n\r\n    // Generates the HTML that goes before the day bg cells for each day-row\r\n    renderBgIntroHtml() {\r\n      let view = this.view\r\n\r\n      if (this.colWeekNumbersVisible) {\r\n        return '<td class=\"fc-week-number ' + view.calendar.theme.getClass('widgetContent') + '\" ' +\r\n          view.weekNumberStyleAttr() + '></td>'\r\n      }\r\n\r\n      return ''\r\n    }\r\n\r\n\r\n    // Generates the HTML that goes before every other type of row generated by DayGrid.\r\n    // Affects helper-skeleton and highlight-skeleton rows.\r\n    renderIntroHtml() {\r\n      let view = this.view\r\n\r\n      if (this.colWeekNumbersVisible) {\r\n        return '<td class=\"fc-week-number\" ' + view.weekNumberStyleAttr() + '></td>'\r\n      }\r\n\r\n      return ''\r\n    }\r\n\r\n\r\n    getIsNumbersVisible() {\r\n      return DayGrid.prototype.getIsNumbersVisible.apply(this, arguments) || this.colWeekNumbersVisible\r\n    }\r\n\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/BasicView.ts","import UnzonedRange from './models/UnzonedRange'\r\nimport ComponentFootprint from './models/ComponentFootprint'\r\nimport EventFootprint from './models/event/EventFootprint'\r\nimport EventDefParser from './models/event/EventDefParser'\r\nimport EventSource from './models/event-source/EventSource'\r\nimport {\r\n  eventInstanceToEventRange,\r\n  eventFootprintToComponentFootprint,\r\n  eventRangeToEventFootprint\r\n} from './models/event/util'\r\n\r\n\r\nexport default class Constraints {\r\n\r\n  eventManager: any\r\n  _calendar: any // discourage\r\n\r\n\r\n  constructor(eventManager, _calendar) {\r\n    this.eventManager = eventManager\r\n    this._calendar = _calendar\r\n  }\r\n\r\n\r\n  opt(name) {\r\n    return this._calendar.opt(name)\r\n  }\r\n\r\n\r\n  /*\r\n  determines if eventInstanceGroup is allowed,\r\n  in relation to other EVENTS and business hours.\r\n  */\r\n  isEventInstanceGroupAllowed(eventInstanceGroup) {\r\n    let eventDef = eventInstanceGroup.getEventDef()\r\n    let eventFootprints = this.eventRangesToEventFootprints(eventInstanceGroup.getAllEventRanges())\r\n    let i\r\n\r\n    let peerEventInstances = this.getPeerEventInstances(eventDef)\r\n    let peerEventRanges = peerEventInstances.map(eventInstanceToEventRange)\r\n    let peerEventFootprints = this.eventRangesToEventFootprints(peerEventRanges)\r\n\r\n    let constraintVal = eventDef.getConstraint()\r\n    let overlapVal = eventDef.getOverlap()\r\n\r\n    let eventAllowFunc = this.opt('eventAllow')\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      if (\r\n        !this.isFootprintAllowed(\r\n          eventFootprints[i].componentFootprint,\r\n          peerEventFootprints,\r\n          constraintVal,\r\n          overlapVal,\r\n          eventFootprints[i].eventInstance\r\n        )\r\n      ) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    if (eventAllowFunc) {\r\n      for (i = 0; i < eventFootprints.length; i++) {\r\n        if (\r\n          eventAllowFunc(\r\n            eventFootprints[i].componentFootprint.toLegacy(this._calendar),\r\n            eventFootprints[i].getEventLegacy()\r\n          ) === false\r\n        ) {\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n\r\n  getPeerEventInstances(eventDef) {\r\n    return this.eventManager.getEventInstancesWithoutId(eventDef.id)\r\n  }\r\n\r\n\r\n  isSelectionFootprintAllowed(componentFootprint) {\r\n    let peerEventInstances = this.eventManager.getEventInstances()\r\n    let peerEventRanges = peerEventInstances.map(eventInstanceToEventRange)\r\n    let peerEventFootprints = this.eventRangesToEventFootprints(peerEventRanges)\r\n\r\n    let selectAllowFunc\r\n\r\n    if (\r\n      this.isFootprintAllowed(\r\n        componentFootprint,\r\n        peerEventFootprints,\r\n        this.opt('selectConstraint'),\r\n        this.opt('selectOverlap')\r\n      )\r\n    ) {\r\n      selectAllowFunc = this.opt('selectAllow')\r\n\r\n      if (selectAllowFunc) {\r\n        return selectAllowFunc(componentFootprint.toLegacy(this._calendar)) !== false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  isFootprintAllowed(\r\n    componentFootprint,\r\n    peerEventFootprints,\r\n    constraintVal,\r\n    overlapVal,\r\n    subjectEventInstance? // optional\r\n  ) {\r\n    let constraintFootprints // ComponentFootprint[]\r\n    let overlapEventFootprints // EventFootprint[]\r\n\r\n    if (constraintVal != null) {\r\n      constraintFootprints = this.constraintValToFootprints(constraintVal, componentFootprint.isAllDay)\r\n\r\n      if (!this.isFootprintWithinConstraints(componentFootprint, constraintFootprints)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    overlapEventFootprints = this.collectOverlapEventFootprints(peerEventFootprints, componentFootprint)\r\n\r\n    if (overlapVal === false) {\r\n      if (overlapEventFootprints.length) {\r\n        return false\r\n      }\r\n    } else if (typeof overlapVal === 'function') {\r\n      if (!isOverlapsAllowedByFunc(overlapEventFootprints, overlapVal, subjectEventInstance)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    if (subjectEventInstance) {\r\n      if (!isOverlapEventInstancesAllowed(overlapEventFootprints, subjectEventInstance)) {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n\r\n  // Constraint\r\n  // ------------------------------------------------------------------------------------------------\r\n\r\n\r\n  isFootprintWithinConstraints(componentFootprint, constraintFootprints) {\r\n    let i\r\n\r\n    for (i = 0; i < constraintFootprints.length; i++) {\r\n      if (this.footprintContainsFootprint(constraintFootprints[i], componentFootprint)) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  constraintValToFootprints(constraintVal, isAllDay) {\r\n    let eventInstances\r\n\r\n    if (constraintVal === 'businessHours') {\r\n      return this.buildCurrentBusinessFootprints(isAllDay)\r\n    } else if (typeof constraintVal === 'object') {\r\n      eventInstances = this.parseEventDefToInstances(constraintVal) // handles recurring events\r\n\r\n      if (!eventInstances) { // invalid input. fallback to parsing footprint directly\r\n        return this.parseFootprints(constraintVal)\r\n      } else {\r\n        return this.eventInstancesToFootprints(eventInstances)\r\n      }\r\n    } else if (constraintVal != null) { // an ID\r\n      eventInstances = this.eventManager.getEventInstancesWithId(constraintVal)\r\n\r\n      return this.eventInstancesToFootprints(eventInstances)\r\n    }\r\n  }\r\n\r\n\r\n  // returns ComponentFootprint[]\r\n  // uses current view's range\r\n  buildCurrentBusinessFootprints(isAllDay) {\r\n    let view = this._calendar.view\r\n    let businessHourGenerator = view.get('businessHourGenerator')\r\n    let unzonedRange = view.dateProfile.activeUnzonedRange\r\n    let eventInstanceGroup = businessHourGenerator.buildEventInstanceGroup(isAllDay, unzonedRange)\r\n\r\n    if (eventInstanceGroup) {\r\n      return this.eventInstancesToFootprints(eventInstanceGroup.eventInstances)\r\n    } else {\r\n      return []\r\n    }\r\n  }\r\n\r\n\r\n  // conversion util\r\n  eventInstancesToFootprints(eventInstances) {\r\n    let eventRanges = eventInstances.map(eventInstanceToEventRange)\r\n    let eventFootprints = this.eventRangesToEventFootprints(eventRanges)\r\n\r\n    return eventFootprints.map(eventFootprintToComponentFootprint)\r\n  }\r\n\r\n\r\n  // Overlap\r\n  // ------------------------------------------------------------------------------------------------\r\n\r\n\r\n  collectOverlapEventFootprints(peerEventFootprints, targetFootprint) {\r\n    let overlapEventFootprints = []\r\n    let i\r\n\r\n    for (i = 0; i < peerEventFootprints.length; i++) {\r\n      if (\r\n        this.footprintsIntersect(\r\n          targetFootprint,\r\n          peerEventFootprints[i].componentFootprint\r\n        )\r\n      ) {\r\n        overlapEventFootprints.push(peerEventFootprints[i])\r\n      }\r\n    }\r\n\r\n    return overlapEventFootprints\r\n  }\r\n\r\n\r\n  // Conversion: eventDefs -> eventInstances -> eventRanges -> eventFootprints -> componentFootprints\r\n  // ------------------------------------------------------------------------------------------------\r\n  // NOTE: this might seem like repetitive code with the Grid class, however, this code is related to\r\n  // constraints whereas the Grid code is related to rendering. Each approach might want to convert\r\n  // eventRanges -> eventFootprints in a different way. Regardless, there are opportunities to make\r\n  // this more DRY.\r\n\r\n\r\n  /*\r\n  Returns false on invalid input.\r\n  */\r\n  parseEventDefToInstances(eventInput) {\r\n    let eventManager = this.eventManager\r\n    let eventDef = EventDefParser.parse(eventInput, new EventSource(this._calendar))\r\n\r\n    if (!eventDef) { // invalid\r\n      return false\r\n    }\r\n\r\n    return eventDef.buildInstances(eventManager.currentPeriod.unzonedRange)\r\n  }\r\n\r\n\r\n  eventRangesToEventFootprints(eventRanges) {\r\n    let i\r\n    let eventFootprints = []\r\n\r\n    for (i = 0; i < eventRanges.length; i++) {\r\n      eventFootprints.push.apply( // footprints\r\n        eventFootprints,\r\n        this.eventRangeToEventFootprints(eventRanges[i])\r\n      )\r\n    }\r\n\r\n    return eventFootprints\r\n  }\r\n\r\n\r\n  eventRangeToEventFootprints(eventRange): EventFootprint[] {\r\n    return [ eventRangeToEventFootprint(eventRange) ]\r\n  }\r\n\r\n\r\n  /*\r\n  Parses footprints directly.\r\n  Very similar to EventDateProfile::parse :(\r\n  */\r\n  parseFootprints(rawInput) {\r\n    let start\r\n    let end\r\n\r\n    if (rawInput.start) {\r\n      start = this._calendar.moment(rawInput.start)\r\n\r\n      if (!start.isValid()) {\r\n        start = null\r\n      }\r\n    }\r\n\r\n    if (rawInput.end) {\r\n      end = this._calendar.moment(rawInput.end)\r\n\r\n      if (!end.isValid()) {\r\n        end = null\r\n      }\r\n    }\r\n\r\n    return [\r\n      new ComponentFootprint(\r\n        new UnzonedRange(start, end),\r\n        (start && !start.hasTime()) || (end && !end.hasTime()) // isAllDay\r\n      )\r\n    ]\r\n  }\r\n\r\n\r\n  // Footprint Utils\r\n  // ----------------------------------------------------------------------------------------\r\n\r\n\r\n  footprintContainsFootprint(outerFootprint, innerFootprint) {\r\n    return outerFootprint.unzonedRange.containsRange(innerFootprint.unzonedRange)\r\n  }\r\n\r\n\r\n  footprintsIntersect(footprint0, footprint1) {\r\n    return footprint0.unzonedRange.intersectsWith(footprint1.unzonedRange)\r\n  }\r\n\r\n}\r\n\r\n\r\n// optional subjectEventInstance\r\nfunction isOverlapsAllowedByFunc(overlapEventFootprints, overlapFunc, subjectEventInstance) {\r\n  let i\r\n\r\n  for (i = 0; i < overlapEventFootprints.length; i++) {\r\n    if (\r\n      !overlapFunc(\r\n        overlapEventFootprints[i].eventInstance.toLegacy(),\r\n        subjectEventInstance ? subjectEventInstance.toLegacy() : null\r\n      )\r\n    ) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n\r\nfunction isOverlapEventInstancesAllowed(overlapEventFootprints, subjectEventInstance) {\r\n  let subjectLegacyInstance = subjectEventInstance.toLegacy()\r\n  let i\r\n  let overlapEventInstance\r\n  let overlapEventDef\r\n  let overlapVal\r\n\r\n  for (i = 0; i < overlapEventFootprints.length; i++) {\r\n    overlapEventInstance = overlapEventFootprints[i].eventInstance\r\n    overlapEventDef = overlapEventInstance.def\r\n\r\n    // don't need to pass in calendar, because don't want to consider global eventOverlap property,\r\n    // because we already considered that earlier in the process.\r\n    overlapVal = overlapEventDef.getOverlap()\r\n\r\n    if (overlapVal === false) {\r\n      return false\r\n    } else if (typeof overlapVal === 'function') {\r\n      if (\r\n        !overlapVal(\r\n          overlapEventInstance.toLegacy(),\r\n          subjectLegacyInstance\r\n        )\r\n      ) {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Constraints.ts","/*\r\nUSAGE:\r\n  import { default as ParsableModelMixin, ParsableModelInterface } from './ParsableModelMixin'\r\nin class:\r\n  applyProps: ParsableModelInterface['applyProps']\r\n  applyManualStandardProps: ParsableModelInterface['applyManualStandardProps']\r\n  applyMiscProps: ParsableModelInterface['applyMiscProps']\r\n  isStandardProp: ParsableModelInterface['isStandardProp']\r\n  static defineStandardProps = ParsableModelMixin.defineStandardProps\r\n  static copyVerbatimStandardProps = ParsableModelMixin.copyVerbatimStandardProps\r\nafter class:\r\n  ParsableModelMixin.mixInto(TheClass)\r\n*/\r\n\r\nimport { copyOwnProps } from '../util'\r\nimport Mixin from './Mixin'\r\n\r\nexport interface ParsableModelInterface {\r\n  applyProps(rawProps)\r\n  applyManualStandardProps(rawProps)\r\n  applyMiscProps(rawProps)\r\n  isStandardProp(propName)\r\n}\r\n\r\nexport default class ParsableModelMixin extends Mixin implements ParsableModelInterface {\r\n\r\n  standardPropMap: any\r\n\r\n\r\n  static defineStandardProps(propDefs) {\r\n    let proto = this.prototype\r\n\r\n    if (!proto.hasOwnProperty('standardPropMap')) {\r\n      proto.standardPropMap = Object.create(proto.standardPropMap)\r\n    }\r\n\r\n    copyOwnProps(propDefs, proto.standardPropMap)\r\n  }\r\n\r\n\r\n  static copyVerbatimStandardProps(src, dest) {\r\n    let map = this.prototype.standardPropMap\r\n    let propName\r\n\r\n    for (propName in map) {\r\n      if (\r\n        src[propName] != null && // in the src object?\r\n        map[propName] === true // false means \"copy verbatim\"\r\n      ) {\r\n        dest[propName] = src[propName]\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /*\r\n  Returns true/false for success.\r\n  Meant to be only called ONCE, at object creation.\r\n  */\r\n  applyProps(rawProps) {\r\n    let standardPropMap = this.standardPropMap\r\n    let manualProps = {}\r\n    let miscProps = {}\r\n    let propName\r\n\r\n    for (propName in rawProps) {\r\n      if (standardPropMap[propName] === true) { // copy verbatim\r\n        this[propName] = rawProps[propName]\r\n      } else if (standardPropMap[propName] === false) {\r\n        manualProps[propName] = rawProps[propName]\r\n      } else {\r\n        miscProps[propName] = rawProps[propName]\r\n      }\r\n    }\r\n\r\n    this.applyMiscProps(miscProps)\r\n\r\n    return this.applyManualStandardProps(manualProps)\r\n  }\r\n\r\n\r\n  /*\r\n  If subclasses override, they must call this supermethod and return the boolean response.\r\n  Meant to be only called ONCE, at object creation.\r\n  */\r\n  applyManualStandardProps(rawProps) {\r\n    return true\r\n  }\r\n\r\n\r\n  /*\r\n  Can be called even after initial object creation.\r\n  */\r\n  applyMiscProps(rawProps) {\r\n    // subclasses can implement\r\n  }\r\n\r\n\r\n  /*\r\n  TODO: why is this a method when defineStandardProps is static\r\n  */\r\n  isStandardProp(propName) {\r\n    return propName in this.standardPropMap\r\n  }\r\n\r\n}\r\n\r\nParsableModelMixin.prototype.standardPropMap = {} // will be cloned by defineStandardProps\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/ParsableModelMixin.ts","\r\nexport default class EventInstance {\r\n\r\n  def: any // EventDef\r\n  dateProfile: any // EventDateProfile\r\n\r\n\r\n  constructor(def, dateProfile) {\r\n    this.def = def\r\n    this.dateProfile = dateProfile\r\n  }\r\n\r\n\r\n  toLegacy() {\r\n    let dateProfile = this.dateProfile\r\n    let obj = this.def.toLegacy()\r\n\r\n    obj.start = dateProfile.start.clone()\r\n    obj.end = dateProfile.end ? dateProfile.end.clone() : null\r\n\r\n    return obj\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventInstance.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport EventDef from './EventDef'\r\nimport EventInstance from './EventInstance'\r\nimport EventDateProfile from './EventDateProfile'\r\n\r\n\r\nexport default class RecurringEventDef extends EventDef {\r\n\r\n  startTime: any // duration\r\n  endTime: any // duration, or null\r\n  dowHash: any // object hash, or null\r\n\r\n\r\n  isAllDay() {\r\n    return !this.startTime && !this.endTime\r\n  }\r\n\r\n\r\n  buildInstances(unzonedRange) {\r\n    let calendar = this.source.calendar\r\n    let unzonedDate = unzonedRange.getStart()\r\n    let unzonedEnd = unzonedRange.getEnd()\r\n    let zonedDayStart\r\n    let instanceStart\r\n    let instanceEnd\r\n    let instances = []\r\n\r\n    while (unzonedDate.isBefore(unzonedEnd)) {\r\n\r\n      // if everyday, or this particular day-of-week\r\n      if (!this.dowHash || this.dowHash[unzonedDate.day()]) {\r\n\r\n        zonedDayStart = calendar.applyTimezone(unzonedDate)\r\n        instanceStart = zonedDayStart.clone()\r\n        instanceEnd = null\r\n\r\n        if (this.startTime) {\r\n          instanceStart.time(this.startTime)\r\n        } else {\r\n          instanceStart.stripTime()\r\n        }\r\n\r\n        if (this.endTime) {\r\n          instanceEnd = zonedDayStart.clone().time(this.endTime)\r\n        }\r\n\r\n        instances.push(\r\n          new EventInstance(\r\n            this, // definition\r\n            new EventDateProfile(instanceStart, instanceEnd, calendar)\r\n          )\r\n        )\r\n      }\r\n\r\n      unzonedDate.add(1, 'days')\r\n    }\r\n\r\n    return instances\r\n  }\r\n\r\n\r\n  setDow(dowNumbers) {\r\n\r\n    if (!this.dowHash) {\r\n      this.dowHash = {}\r\n    }\r\n\r\n    for (let i = 0; i < dowNumbers.length; i++) {\r\n      this.dowHash[dowNumbers[i]] = true\r\n    }\r\n  }\r\n\r\n\r\n  clone() {\r\n    let def = super.clone()\r\n\r\n    if (def.startTime) {\r\n      def.startTime = moment.duration(this.startTime)\r\n    }\r\n\r\n    if (def.endTime) {\r\n      def.endTime = moment.duration(this.endTime)\r\n    }\r\n\r\n    if (this.dowHash) {\r\n      def.dowHash = $.extend({}, this.dowHash)\r\n    }\r\n\r\n    return def\r\n  }\r\n\r\n}\r\n\r\n\r\n/*\r\nHACK to work with TypeScript mixins\r\nNOTE: if super-method fails, should still attempt to apply\r\n*/\r\nRecurringEventDef.prototype.applyProps = function(rawProps) {\r\n  let superSuccess = EventDef.prototype.applyProps.call(this, rawProps)\r\n\r\n  if (rawProps.start) {\r\n    this.startTime = moment.duration(rawProps.start)\r\n  }\r\n\r\n  if (rawProps.end) {\r\n    this.endTime = moment.duration(rawProps.end)\r\n  }\r\n\r\n  if (rawProps.dow) {\r\n    this.setDow(rawProps.dow)\r\n  }\r\n\r\n  return superSuccess\r\n}\r\n\r\n\r\n// Parsing\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\n\r\nRecurringEventDef.defineStandardProps({ // false = manually process\r\n  start: false,\r\n  end: false,\r\n  dow: false\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/RecurringEventDef.ts","\r\nexport default class EventRange {\r\n\r\n  unzonedRange: any\r\n  eventDef: any\r\n  eventInstance: any // optional\r\n\r\n\r\n  constructor(unzonedRange, eventDef, eventInstance?) {\r\n    this.unzonedRange = unzonedRange\r\n    this.eventDef = eventDef\r\n\r\n    if (eventInstance) {\r\n      this.eventInstance = eventInstance\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event/EventRange.ts","import * as $ from 'jquery'\r\nimport { eventDefsToEventInstances } from '../models/event/util'\r\nimport EventInstanceGroup from './event/EventInstanceGroup'\r\nimport RecurringEventDef from './event/RecurringEventDef'\r\nimport EventSource from './event-source/EventSource'\r\n\r\n\r\nlet BUSINESS_HOUR_EVENT_DEFAULTS = {\r\n  start: '09:00',\r\n  end: '17:00',\r\n  dow: [ 1, 2, 3, 4, 5 ], // monday - friday\r\n  rendering: 'inverse-background'\r\n  // classNames are defined in businessHoursSegClasses\r\n}\r\n\r\n\r\nexport default class BusinessHourGenerator {\r\n\r\n  rawComplexDef: any\r\n  calendar: any // for anonymous EventSource\r\n\r\n\r\n  constructor(rawComplexDef, calendar) {\r\n    this.rawComplexDef = rawComplexDef\r\n    this.calendar = calendar\r\n  }\r\n\r\n\r\n  buildEventInstanceGroup(isAllDay, unzonedRange) {\r\n    let eventDefs = this.buildEventDefs(isAllDay)\r\n    let eventInstanceGroup\r\n\r\n    if (eventDefs.length) {\r\n      eventInstanceGroup = new EventInstanceGroup(\r\n        eventDefsToEventInstances(eventDefs, unzonedRange)\r\n      )\r\n\r\n      // so that inverse-background rendering can happen even when no eventRanges in view\r\n      eventInstanceGroup.explicitEventDef = eventDefs[0]\r\n\r\n      return eventInstanceGroup\r\n    }\r\n  }\r\n\r\n\r\n  buildEventDefs(isAllDay) {\r\n    let rawComplexDef = this.rawComplexDef\r\n    let rawDefs = []\r\n    let requireDow = false\r\n    let i\r\n    let defs = []\r\n\r\n    if (rawComplexDef === true) {\r\n      rawDefs = [ {} ] // will get BUSINESS_HOUR_EVENT_DEFAULTS verbatim\r\n    } else if ($.isPlainObject(rawComplexDef)) {\r\n      rawDefs = [ rawComplexDef ]\r\n    } else if ($.isArray(rawComplexDef)) {\r\n      rawDefs = rawComplexDef\r\n      requireDow = true // every sub-definition NEEDS a day-of-week\r\n    }\r\n\r\n    for (i = 0; i < rawDefs.length; i++) {\r\n      if (!requireDow || rawDefs[i].dow) {\r\n        defs.push(\r\n          this.buildEventDef(isAllDay, rawDefs[i])\r\n        )\r\n      }\r\n    }\r\n\r\n    return defs\r\n  }\r\n\r\n\r\n  buildEventDef(isAllDay, rawDef) {\r\n    let fullRawDef = $.extend({}, BUSINESS_HOUR_EVENT_DEFAULTS, rawDef)\r\n\r\n    if (isAllDay) {\r\n      fullRawDef.start = null\r\n      fullRawDef.end = null\r\n    }\r\n\r\n    return RecurringEventDef.parse(\r\n      fullRawDef,\r\n      new EventSource(this.calendar) // dummy source\r\n    )\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/BusinessHourGenerator.ts","import Theme from './Theme'\r\n\r\nexport default class StandardTheme extends Theme {\r\n}\r\n\r\nStandardTheme.prototype.classes = {\r\n  widget: 'fc-unthemed',\r\n  widgetHeader: 'fc-widget-header',\r\n  widgetContent: 'fc-widget-content',\r\n\r\n  buttonGroup: 'fc-button-group',\r\n  button: 'fc-button',\r\n  cornerLeft: 'fc-corner-left',\r\n  cornerRight: 'fc-corner-right',\r\n  stateDefault: 'fc-state-default',\r\n  stateActive: 'fc-state-active',\r\n  stateDisabled: 'fc-state-disabled',\r\n  stateHover: 'fc-state-hover',\r\n  stateDown: 'fc-state-down',\r\n\r\n  popoverHeader: 'fc-widget-header',\r\n  popoverContent: 'fc-widget-content',\r\n\r\n  // day grid\r\n  headerRow: 'fc-widget-header',\r\n  dayRow: 'fc-widget-content',\r\n\r\n  // list view\r\n  listView: 'fc-widget-content'\r\n}\r\n\r\nStandardTheme.prototype.baseIconClass = 'fc-icon'\r\nStandardTheme.prototype.iconClasses = {\r\n  close: 'fc-icon-x',\r\n  prev: 'fc-icon-left-single-arrow',\r\n  next: 'fc-icon-right-single-arrow',\r\n  prevYear: 'fc-icon-left-double-arrow',\r\n  nextYear: 'fc-icon-right-double-arrow'\r\n}\r\n\r\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'\r\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon'\r\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/StandardTheme.ts","import Theme from './Theme'\r\n\r\nexport default class JqueryUiTheme extends Theme {\r\n}\r\n\r\nJqueryUiTheme.prototype.classes = {\r\n  widget: 'ui-widget',\r\n  widgetHeader: 'ui-widget-header',\r\n  widgetContent: 'ui-widget-content',\r\n\r\n  buttonGroup: 'fc-button-group',\r\n  button: 'ui-button',\r\n  cornerLeft: 'ui-corner-left',\r\n  cornerRight: 'ui-corner-right',\r\n  stateDefault: 'ui-state-default',\r\n  stateActive: 'ui-state-active',\r\n  stateDisabled: 'ui-state-disabled',\r\n  stateHover: 'ui-state-hover',\r\n  stateDown: 'ui-state-down',\r\n\r\n  today: 'ui-state-highlight',\r\n\r\n  popoverHeader: 'ui-widget-header',\r\n  popoverContent: 'ui-widget-content',\r\n\r\n  // day grid\r\n  headerRow: 'ui-widget-header',\r\n  dayRow: 'ui-widget-content',\r\n\r\n  // list view\r\n  listView: 'ui-widget-content'\r\n}\r\n\r\nJqueryUiTheme.prototype.baseIconClass = 'ui-icon'\r\nJqueryUiTheme.prototype.iconClasses = {\r\n  close: 'ui-icon-closethick',\r\n  prev: 'ui-icon-circle-triangle-w',\r\n  next: 'ui-icon-circle-triangle-e',\r\n  prevYear: 'ui-icon-seek-prev',\r\n  nextYear: 'ui-icon-seek-next'\r\n}\r\n\r\nJqueryUiTheme.prototype.iconOverrideOption = 'themeButtonIcons'\r\nJqueryUiTheme.prototype.iconOverrideCustomButtonOption = 'themeIcon'\r\nJqueryUiTheme.prototype.iconOverridePrefix = 'ui-icon-'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/JqueryUiTheme.ts","import * as $ from 'jquery'\r\nimport Promise from '../../common/Promise'\r\nimport EventSource from './EventSource'\r\n\r\n\r\nexport default class FuncEventSource extends EventSource {\r\n\r\n  func: any\r\n\r\n\r\n  static parse(rawInput, calendar) {\r\n    let rawProps\r\n\r\n    // normalize raw input\r\n    if ($.isFunction(rawInput.events)) { // extended form\r\n      rawProps = rawInput\r\n    } else if ($.isFunction(rawInput)) { // short form\r\n      rawProps = { events: rawInput }\r\n    }\r\n\r\n    if (rawProps) {\r\n      return EventSource.parse.call(this, rawProps, calendar)\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  fetch(start, end, timezone) {\r\n    this.calendar.pushLoading()\r\n\r\n    return Promise.construct((onResolve) => {\r\n      this.func.call(\r\n        this.calendar,\r\n        start.clone(),\r\n        end.clone(),\r\n        timezone,\r\n        (rawEventDefs) => {\r\n          this.calendar.popLoading()\r\n\r\n          onResolve(this.parseEventDefs(rawEventDefs))\r\n        }\r\n      )\r\n    })\r\n  }\r\n\r\n\r\n  getPrimitive() {\r\n    return this.func\r\n  }\r\n\r\n\r\n  applyManualStandardProps(rawProps) {\r\n    let superSuccess = super.applyManualStandardProps(rawProps)\r\n\r\n    this.func = rawProps.events\r\n\r\n    return superSuccess\r\n  }\r\n\r\n}\r\n\r\nFuncEventSource.defineStandardProps({\r\n  events: false // don't automatically transfer\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/FuncEventSource.ts","import * as $ from 'jquery'\r\nimport { applyAll } from '../../util'\r\nimport Promise from '../../common/Promise'\r\nimport EventSource from './EventSource'\r\n\r\n\r\nexport default class JsonFeedEventSource extends EventSource {\r\n\r\n  static AJAX_DEFAULTS = {\r\n    dataType: 'json',\r\n    cache: false\r\n  }\r\n\r\n  // these props must all be manually set before calling fetch\r\n  url: any\r\n  startParam: any\r\n  endParam: any\r\n  timezoneParam: any\r\n  ajaxSettings: any // does not include url\r\n\r\n\r\n  static parse(rawInput, calendar) {\r\n    let rawProps\r\n\r\n    // normalize raw input\r\n    if (typeof rawInput.url === 'string') { // extended form\r\n      rawProps = rawInput\r\n    } else if (typeof rawInput === 'string') { // short form\r\n      rawProps = { url: rawInput }\r\n    }\r\n\r\n    if (rawProps) {\r\n      return EventSource.parse.call(this, rawProps, calendar)\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  fetch(start, end, timezone) {\r\n    let ajaxSettings = this.ajaxSettings\r\n    let onSuccess = ajaxSettings.success\r\n    let onError = ajaxSettings.error\r\n    let requestParams = this.buildRequestParams(start, end, timezone)\r\n\r\n    // todo: eventually handle the promise's then,\r\n    // don't intercept success/error\r\n    // tho will be a breaking API change\r\n\r\n    this.calendar.pushLoading()\r\n\r\n    return Promise.construct((onResolve, onReject) => {\r\n      $.ajax($.extend(\r\n        {}, // destination\r\n        JsonFeedEventSource.AJAX_DEFAULTS,\r\n        ajaxSettings,\r\n        {\r\n          url: this.url,\r\n          data: requestParams,\r\n          success: (rawEventDefs, status, xhr) => {\r\n            let callbackRes\r\n\r\n            this.calendar.popLoading()\r\n\r\n            if (rawEventDefs) {\r\n              callbackRes = applyAll(onSuccess, this, [ rawEventDefs, status, xhr ]) // redirect `this`\r\n\r\n              if ($.isArray(callbackRes)) {\r\n                rawEventDefs = callbackRes\r\n              }\r\n\r\n              onResolve(this.parseEventDefs(rawEventDefs))\r\n            } else {\r\n              onReject()\r\n            }\r\n          },\r\n          error: (xhr, statusText, errorThrown) => {\r\n            this.calendar.popLoading()\r\n\r\n            applyAll(onError, this, [ xhr, statusText, errorThrown ]) // redirect `this`\r\n            onReject()\r\n          }\r\n        }\r\n      ))\r\n    })\r\n  }\r\n\r\n\r\n  buildRequestParams(start, end, timezone) {\r\n    let calendar = this.calendar\r\n    let ajaxSettings = this.ajaxSettings\r\n    let startParam\r\n    let endParam\r\n    let timezoneParam\r\n    let customRequestParams\r\n    let params = {}\r\n\r\n    startParam = this.startParam\r\n    if (startParam == null) {\r\n      startParam = calendar.opt('startParam')\r\n    }\r\n\r\n    endParam = this.endParam\r\n    if (endParam == null) {\r\n      endParam = calendar.opt('endParam')\r\n    }\r\n\r\n    timezoneParam = this.timezoneParam\r\n    if (timezoneParam == null) {\r\n      timezoneParam = calendar.opt('timezoneParam')\r\n    }\r\n\r\n    // retrieve any outbound GET/POST $.ajax data from the options\r\n    if ($.isFunction(ajaxSettings.data)) {\r\n      // supplied as a function that returns a key/value object\r\n      customRequestParams = ajaxSettings.data()\r\n    } else {\r\n      // probably supplied as a straight key/value object\r\n      customRequestParams = ajaxSettings.data || {}\r\n    }\r\n\r\n    $.extend(params, customRequestParams)\r\n\r\n    params[startParam] = start.format()\r\n    params[endParam] = end.format()\r\n\r\n    if (timezone && timezone !== 'local') {\r\n      params[timezoneParam] = timezone\r\n    }\r\n\r\n    return params\r\n  }\r\n\r\n\r\n  getPrimitive() {\r\n    return this.url\r\n  }\r\n\r\n\r\n  applyMiscProps(rawProps) {\r\n    this.ajaxSettings = rawProps\r\n  }\r\n\r\n}\r\n\r\n\r\nJsonFeedEventSource.defineStandardProps({\r\n  // automatically transfer (true)...\r\n  url: true,\r\n  startParam: true,\r\n  endParam: true,\r\n  timezoneParam: true\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/JsonFeedEventSource.ts","import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\r\n\r\nexport default class TaskQueue {\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n\r\n  q: any = []\r\n  isPaused: boolean = false\r\n  isRunning: boolean = false\r\n\r\n\r\n  queue(...args) {\r\n    this.q.push.apply(this.q, args) // append\r\n    this.tryStart()\r\n  }\r\n\r\n\r\n  pause() {\r\n    this.isPaused = true\r\n  }\r\n\r\n\r\n  resume() {\r\n    this.isPaused = false\r\n    this.tryStart()\r\n  }\r\n\r\n\r\n  getIsIdle() {\r\n    return !this.isRunning && !this.isPaused\r\n  }\r\n\r\n\r\n  tryStart() {\r\n    if (!this.isRunning && this.canRunNext()) {\r\n      this.isRunning = true\r\n      this.trigger('start')\r\n      this.runRemaining()\r\n    }\r\n  }\r\n\r\n\r\n  canRunNext() {\r\n    return !this.isPaused && this.q.length\r\n  }\r\n\r\n\r\n  runRemaining() { // assumes at least one task in queue. does not check canRunNext for first task.\r\n    let task\r\n    let res\r\n\r\n    do {\r\n      task = this.q.shift() // always freshly reference q. might have been reassigned.\r\n      res = this.runTask(task)\r\n\r\n      if (res && res.then) {\r\n        res.then(() => {\r\n          if (this.canRunNext()) {\r\n            this.runRemaining()\r\n          }\r\n        })\r\n        return // prevent marking as stopped\r\n      }\r\n    } while (this.canRunNext())\r\n\r\n    this.trigger('stop') // not really a 'stop' ... more of a 'drained'\r\n    this.isRunning = false\r\n\r\n    // if 'stop' handler added more tasks.... TODO: write test for this\r\n    this.tryStart()\r\n  }\r\n\r\n\r\n  runTask(task) {\r\n    return task() // task *is* the function, but subclasses can change the format of a task\r\n  }\r\n\r\n}\r\n\r\nEmitterMixin.mixInto(TaskQueue)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/TaskQueue.ts","import TaskQueue from './TaskQueue'\r\n\r\n\r\nexport default class RenderQueue extends TaskQueue {\r\n\r\n  waitsByNamespace: any\r\n  waitNamespace: any\r\n  waitId: any\r\n\r\n\r\n  constructor(waitsByNamespace) {\r\n    super()\r\n    this.waitsByNamespace = waitsByNamespace || {}\r\n  }\r\n\r\n\r\n  queue(taskFunc, namespace, type) {\r\n    let task = {\r\n      func: taskFunc,\r\n      namespace: namespace,\r\n      type: type\r\n    }\r\n    let waitMs\r\n\r\n    if (namespace) {\r\n      waitMs = this.waitsByNamespace[namespace]\r\n    }\r\n\r\n    if (this.waitNamespace) {\r\n      if (namespace === this.waitNamespace && waitMs != null) {\r\n        this.delayWait(waitMs)\r\n      } else {\r\n        this.clearWait()\r\n        this.tryStart()\r\n      }\r\n    }\r\n\r\n    if (this.compoundTask(task)) { // appended to queue?\r\n\r\n      if (!this.waitNamespace && waitMs != null) {\r\n        this.startWait(namespace, waitMs)\r\n      } else {\r\n        this.tryStart()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  startWait(namespace, waitMs) {\r\n    this.waitNamespace = namespace\r\n    this.spawnWait(waitMs)\r\n  }\r\n\r\n\r\n  delayWait(waitMs) {\r\n    clearTimeout(this.waitId)\r\n    this.spawnWait(waitMs)\r\n  }\r\n\r\n\r\n  spawnWait(waitMs) {\r\n    this.waitId = setTimeout(() => {\r\n      this.waitNamespace = null\r\n      this.tryStart()\r\n    }, waitMs)\r\n  }\r\n\r\n\r\n  clearWait() {\r\n    if (this.waitNamespace) {\r\n      clearTimeout(this.waitId)\r\n      this.waitId = null\r\n      this.waitNamespace = null\r\n    }\r\n  }\r\n\r\n\r\n  canRunNext() {\r\n    if (!super.canRunNext()) {\r\n      return false\r\n    }\r\n\r\n    // waiting for a certain namespace to stop receiving tasks?\r\n    if (this.waitNamespace) {\r\n\r\n      const { q } = this\r\n\r\n      // if there was a different namespace task in the meantime,\r\n      // that forces all previously-waiting tasks to suddenly execute.\r\n      // TODO: find a way to do this in constant time.\r\n      for (let i = 0; i < q.length; i++) {\r\n        if (q[i].namespace !== this.waitNamespace) {\r\n          return true // allow execution\r\n        }\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n\r\n  runTask(task) {\r\n    task.func()\r\n  }\r\n\r\n\r\n  compoundTask(newTask) {\r\n    let q = this.q\r\n    let shouldAppend = true\r\n    let i\r\n    let task\r\n\r\n    if (newTask.namespace && newTask.type === 'destroy') {\r\n\r\n      // remove all init/add/remove ops with same namespace, regardless of order\r\n      for (i = q.length - 1; i >= 0; i--) {\r\n        task = q[i]\r\n\r\n        switch (task.type) {\r\n          case 'init':\r\n            shouldAppend = false\r\n            // the latest destroy is cancelled out by not doing the init\r\n            /* falls through */\r\n          case 'add':\r\n            /* falls through */\r\n          case 'remove':\r\n            q.splice(i, 1) // remove task\r\n        }\r\n      }\r\n    }\r\n\r\n    if (shouldAppend) {\r\n      q.push(newTask)\r\n    }\r\n\r\n    return shouldAppend\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/RenderQueue.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { attrsToStr, htmlEscape, dayIDs } from '../util'\r\nimport momentExt from '../moment-ext'\r\nimport { formatRange } from '../date-formatting'\r\nimport Component from './Component'\r\nimport { eventRangeToEventFootprint } from '../models/event/util'\r\nimport EventFootprint from '../models/event/EventFootprint'\r\n\r\n\r\nexport default abstract class DateComponent extends Component {\r\n\r\n  static guid: number = 0 // TODO: better system for this?\r\n\r\n  eventRendererClass: any\r\n  helperRendererClass: any\r\n  businessHourRendererClass: any\r\n  fillRendererClass: any\r\n\r\n  uid: any\r\n  childrenByUid: any\r\n  isRTL: boolean = false // frequently accessed options\r\n  nextDayThreshold: any // \"\r\n  dateProfile: any // hack\r\n\r\n  eventRenderer: any\r\n  helperRenderer: any\r\n  businessHourRenderer: any\r\n  fillRenderer: any\r\n\r\n  hitsNeededDepth: number = 0 // necessary because multiple callers might need the same hits\r\n\r\n  hasAllDayBusinessHours: boolean = false // TODO: unify with largeUnit and isTimeScale?\r\n\r\n  isDatesRendered: boolean = false\r\n\r\n\r\n  constructor(_view?, _options?) {\r\n    super()\r\n\r\n    // hack to set options prior to the this.opt calls\r\n    if (_view) {\r\n      this['view'] = _view\r\n    }\r\n    if (_options) {\r\n      this['options'] = _options\r\n    }\r\n\r\n    this.uid = String(DateComponent.guid++)\r\n    this.childrenByUid = {}\r\n\r\n    this.nextDayThreshold = moment.duration(this.opt('nextDayThreshold'))\r\n    this.isRTL = this.opt('isRTL')\r\n\r\n    if (this.fillRendererClass) {\r\n      this.fillRenderer = new this.fillRendererClass(this)\r\n    }\r\n\r\n    if (this.eventRendererClass) { // fillRenderer is optional -----v\r\n      this.eventRenderer = new this.eventRendererClass(this, this.fillRenderer)\r\n    }\r\n\r\n    if (this.helperRendererClass && this.eventRenderer) {\r\n      this.helperRenderer = new this.helperRendererClass(this, this.eventRenderer)\r\n    }\r\n\r\n    if (this.businessHourRendererClass && this.fillRenderer) {\r\n      this.businessHourRenderer = new this.businessHourRendererClass(this, this.fillRenderer)\r\n    }\r\n  }\r\n\r\n\r\n  addChild(child) {\r\n    if (!this.childrenByUid[child.uid]) {\r\n      this.childrenByUid[child.uid] = child\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  removeChild(child) {\r\n    if (this.childrenByUid[child.uid]) {\r\n      delete this.childrenByUid[child.uid]\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  // TODO: only do if isInDom?\r\n  // TODO: make part of Component, along with children/batch-render system?\r\n  updateSize(totalHeight, isAuto, isResize) {\r\n    this.callChildren('updateSize', arguments)\r\n  }\r\n\r\n\r\n  // Options\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  opt(name) {\r\n    return this._getView().opt(name) // default implementation\r\n  }\r\n\r\n\r\n  publiclyTrigger(...args) {\r\n    let calendar = this._getCalendar()\r\n\r\n    return calendar.publiclyTrigger.apply(calendar, args)\r\n  }\r\n\r\n\r\n  hasPublicHandlers(...args) {\r\n    let calendar = this._getCalendar()\r\n\r\n    return calendar.hasPublicHandlers.apply(calendar, args)\r\n  }\r\n\r\n\r\n  // Date\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  executeDateRender(dateProfile) {\r\n    this.dateProfile = dateProfile // for rendering\r\n    this.renderDates(dateProfile)\r\n    this.isDatesRendered = true\r\n    this.callChildren('executeDateRender', arguments)\r\n  }\r\n\r\n\r\n  executeDateUnrender() { // wrapper\r\n    this.callChildren('executeDateUnrender', arguments)\r\n    this.dateProfile = null\r\n    this.unrenderDates()\r\n    this.isDatesRendered = false\r\n  }\r\n\r\n\r\n  // date-cell content only\r\n  renderDates(dateProfile) {\r\n    // subclasses should implement\r\n  }\r\n\r\n\r\n  // date-cell content only\r\n  unrenderDates() {\r\n    // subclasses should override\r\n  }\r\n\r\n\r\n  // Now-Indicator\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Returns a string unit, like 'second' or 'minute' that defined how often the current time indicator\r\n  // should be refreshed. If something falsy is returned, no time indicator is rendered at all.\r\n  getNowIndicatorUnit() {\r\n    // subclasses should implement\r\n  }\r\n\r\n\r\n  // Renders a current time indicator at the given datetime\r\n  renderNowIndicator(date) {\r\n    this.callChildren('renderNowIndicator', arguments)\r\n  }\r\n\r\n\r\n  // Undoes the rendering actions from renderNowIndicator\r\n  unrenderNowIndicator() {\r\n    this.callChildren('unrenderNowIndicator', arguments)\r\n  }\r\n\r\n\r\n  // Business Hours\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  renderBusinessHours(businessHourGenerator) {\r\n    if (this.businessHourRenderer) {\r\n      this.businessHourRenderer.render(businessHourGenerator)\r\n    }\r\n\r\n    this.callChildren('renderBusinessHours', arguments)\r\n  }\r\n\r\n\r\n  // Unrenders previously-rendered business-hours\r\n  unrenderBusinessHours() {\r\n    this.callChildren('unrenderBusinessHours', arguments)\r\n\r\n    if (this.businessHourRenderer) {\r\n      this.businessHourRenderer.unrender()\r\n    }\r\n  }\r\n\r\n\r\n  // Event Displaying\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  executeEventRender(eventsPayload) {\r\n    if (this.eventRenderer) {\r\n      this.eventRenderer.rangeUpdated() // poorly named now\r\n      this.eventRenderer.render(eventsPayload)\r\n    } else if (this['renderEvents']) { // legacy\r\n      this['renderEvents'](convertEventsPayloadToLegacyArray(eventsPayload))\r\n    }\r\n\r\n    this.callChildren('executeEventRender', arguments)\r\n  }\r\n\r\n\r\n  executeEventUnrender() {\r\n    this.callChildren('executeEventUnrender', arguments)\r\n\r\n    if (this.eventRenderer) {\r\n      this.eventRenderer.unrender()\r\n    } else if (this['destroyEvents']) { // legacy\r\n      this['destroyEvents']()\r\n    }\r\n  }\r\n\r\n\r\n  getBusinessHourSegs() { // recursive\r\n    let segs = this.getOwnBusinessHourSegs()\r\n\r\n    this.iterChildren(function(child) {\r\n      segs.push.apply(segs, child.getBusinessHourSegs())\r\n    })\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  getOwnBusinessHourSegs() {\r\n    if (this.businessHourRenderer) {\r\n      return this.businessHourRenderer.getSegs()\r\n    }\r\n\r\n    return []\r\n  }\r\n\r\n\r\n  getEventSegs() { // recursive\r\n    let segs = this.getOwnEventSegs()\r\n\r\n    this.iterChildren(function(child) {\r\n      segs.push.apply(segs, child.getEventSegs())\r\n    })\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  getOwnEventSegs() { // just for itself\r\n    if (this.eventRenderer) {\r\n      return this.eventRenderer.getSegs()\r\n    }\r\n\r\n    return []\r\n  }\r\n\r\n\r\n  // Event Rendering Triggering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  triggerAfterEventsRendered() {\r\n    this.triggerAfterEventSegsRendered(\r\n      this.getEventSegs()\r\n    )\r\n\r\n    this.publiclyTrigger('eventAfterAllRender', {\r\n      context: this,\r\n      args: [ this ]\r\n    })\r\n  }\r\n\r\n\r\n  triggerAfterEventSegsRendered(segs) {\r\n    // an optimization, because getEventLegacy is expensive\r\n    if (this.hasPublicHandlers('eventAfterRender')) {\r\n      segs.forEach((seg) => {\r\n        let legacy\r\n\r\n        if (seg.el) { // necessary?\r\n          legacy = seg.footprint.getEventLegacy()\r\n\r\n          this.publiclyTrigger('eventAfterRender', {\r\n            context: legacy,\r\n            args: [ legacy, seg.el, this ]\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  triggerBeforeEventsDestroyed() {\r\n    this.triggerBeforeEventSegsDestroyed(\r\n      this.getEventSegs()\r\n    )\r\n  }\r\n\r\n\r\n  triggerBeforeEventSegsDestroyed(segs) {\r\n    if (this.hasPublicHandlers('eventDestroy')) {\r\n      segs.forEach((seg) => {\r\n        let legacy\r\n\r\n        if (seg.el) { // necessary?\r\n          legacy = seg.footprint.getEventLegacy()\r\n\r\n          this.publiclyTrigger('eventDestroy', {\r\n            context: legacy,\r\n            args: [ legacy, seg.el, this ]\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // Event Rendering Utils\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Hides all rendered event segments linked to the given event\r\n  // RECURSIVE with subcomponents\r\n  showEventsWithId(eventDefId) {\r\n\r\n    this.getEventSegs().forEach(function(seg) {\r\n      if (\r\n        seg.footprint.eventDef.id === eventDefId &&\r\n        seg.el // necessary?\r\n      ) {\r\n        seg.el.css('visibility', '')\r\n      }\r\n    })\r\n\r\n    this.callChildren('showEventsWithId', arguments)\r\n  }\r\n\r\n\r\n  // Shows all rendered event segments linked to the given event\r\n  // RECURSIVE with subcomponents\r\n  hideEventsWithId(eventDefId) {\r\n\r\n    this.getEventSegs().forEach(function(seg) {\r\n      if (\r\n        seg.footprint.eventDef.id === eventDefId &&\r\n        seg.el // necessary?\r\n      ) {\r\n        seg.el.css('visibility', 'hidden')\r\n      }\r\n    })\r\n\r\n    this.callChildren('hideEventsWithId', arguments)\r\n  }\r\n\r\n\r\n  // Drag-n-Drop Rendering (for both events and external elements)\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Renders a visual indication of a event or external-element drag over the given drop zone.\r\n  // If an external-element, seg will be `null`.\r\n  // Must return elements used for any mock events.\r\n  renderDrag(eventFootprints, seg, isTouch) {\r\n    let renderedHelper = false\r\n\r\n    this.iterChildren(function(child) {\r\n      if (child.renderDrag(eventFootprints, seg, isTouch)) {\r\n        renderedHelper = true\r\n      }\r\n    })\r\n\r\n    return renderedHelper\r\n  }\r\n\r\n\r\n  // Unrenders a visual indication of an event or external-element being dragged.\r\n  unrenderDrag() {\r\n    this.callChildren('unrenderDrag', arguments)\r\n  }\r\n\r\n\r\n  // Event Resizing\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Renders a visual indication of an event being resized.\r\n  renderEventResize(eventFootprints, seg, isTouch) {\r\n    this.callChildren('renderEventResize', arguments)\r\n  }\r\n\r\n\r\n  // Unrenders a visual indication of an event being resized.\r\n  unrenderEventResize() {\r\n    this.callChildren('unrenderEventResize', arguments)\r\n  }\r\n\r\n\r\n  // Selection\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Renders a visual indication of the selection\r\n  // TODO: rename to `renderSelection` after legacy is gone\r\n  renderSelectionFootprint(componentFootprint) {\r\n    this.renderHighlight(componentFootprint)\r\n\r\n    this.callChildren('renderSelectionFootprint', arguments)\r\n  }\r\n\r\n\r\n  // Unrenders a visual indication of selection\r\n  unrenderSelection() {\r\n    this.unrenderHighlight()\r\n\r\n    this.callChildren('unrenderSelection', arguments)\r\n  }\r\n\r\n\r\n  // Highlight\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Renders an emphasis on the given date range. Given a span (unzoned start/end and other misc data)\r\n  renderHighlight(componentFootprint) {\r\n    if (this.fillRenderer) {\r\n      this.fillRenderer.renderFootprint(\r\n        'highlight',\r\n        componentFootprint,\r\n        {\r\n          getClasses() {\r\n            return [ 'fc-highlight' ]\r\n          }\r\n        }\r\n      )\r\n    }\r\n\r\n    this.callChildren('renderHighlight', arguments)\r\n  }\r\n\r\n\r\n  // Unrenders the emphasis on a date range\r\n  unrenderHighlight() {\r\n    if (this.fillRenderer) {\r\n      this.fillRenderer.unrender('highlight')\r\n    }\r\n\r\n    this.callChildren('unrenderHighlight', arguments)\r\n  }\r\n\r\n\r\n  // Hit Areas\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n  // just because all DateComponents support this interface\r\n  // doesn't mean they need to have their own internal coord system. they can defer to sub-components.\r\n\r\n\r\n  hitsNeeded() {\r\n    if (!(this.hitsNeededDepth++)) {\r\n      this.prepareHits()\r\n    }\r\n\r\n    this.callChildren('hitsNeeded', arguments)\r\n  }\r\n\r\n\r\n  hitsNotNeeded() {\r\n    if (this.hitsNeededDepth && !(--this.hitsNeededDepth)) {\r\n      this.releaseHits()\r\n    }\r\n\r\n    this.callChildren('hitsNotNeeded', arguments)\r\n  }\r\n\r\n\r\n  prepareHits() {\r\n    // subclasses can implement\r\n  }\r\n\r\n\r\n  releaseHits() {\r\n    // subclasses can implement\r\n  }\r\n\r\n\r\n  // Given coordinates from the topleft of the document, return data about the date-related area underneath.\r\n  // Can return an object with arbitrary properties (although top/right/left/bottom are encouraged).\r\n  // Must have a `grid` property, a reference to this current grid. TODO: avoid this\r\n  // The returned object will be processed by getHitFootprint and getHitEl.\r\n  queryHit(leftOffset, topOffset) {\r\n    let childrenByUid = this.childrenByUid\r\n    let uid\r\n    let hit\r\n\r\n    for (uid in childrenByUid) {\r\n      hit = childrenByUid[uid].queryHit(leftOffset, topOffset)\r\n\r\n      if (hit) {\r\n        break\r\n      }\r\n    }\r\n\r\n    return hit\r\n  }\r\n\r\n\r\n  getSafeHitFootprint(hit) {\r\n    let footprint = this.getHitFootprint(hit)\r\n\r\n    if (!this.dateProfile.activeUnzonedRange.containsRange(footprint.unzonedRange)) {\r\n      return null\r\n    }\r\n\r\n    return footprint\r\n  }\r\n\r\n\r\n  getHitFootprint(hit): any {\r\n    // what about being abstract!?\r\n  }\r\n\r\n\r\n  // Given position-level information about a date-related area within the grid,\r\n  // should return a jQuery element that best represents it. passed to dayClick callback.\r\n  getHitEl(hit): any {\r\n    // what about being abstract!?\r\n  }\r\n\r\n\r\n  /* Converting eventRange -> eventFootprint\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  eventRangesToEventFootprints(eventRanges) {\r\n    let eventFootprints = []\r\n    let i\r\n\r\n    for (i = 0; i < eventRanges.length; i++) {\r\n      eventFootprints.push.apply( // append\r\n        eventFootprints,\r\n        this.eventRangeToEventFootprints(eventRanges[i])\r\n      )\r\n    }\r\n\r\n    return eventFootprints\r\n  }\r\n\r\n\r\n  eventRangeToEventFootprints(eventRange): EventFootprint[] {\r\n    return [ eventRangeToEventFootprint(eventRange) ]\r\n  }\r\n\r\n\r\n  /* Converting componentFootprint/eventFootprint -> segs\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  eventFootprintsToSegs(eventFootprints) {\r\n    let segs = []\r\n    let i\r\n\r\n    for (i = 0; i < eventFootprints.length; i++) {\r\n      segs.push.apply(segs,\r\n        this.eventFootprintToSegs(eventFootprints[i])\r\n      )\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  // Given an event's span (unzoned start/end and other misc data), and the event itself,\r\n  // slices into segments and attaches event-derived properties to them.\r\n  // eventSpan - { start, end, isStart, isEnd, otherthings... }\r\n  eventFootprintToSegs(eventFootprint) {\r\n    let unzonedRange = eventFootprint.componentFootprint.unzonedRange\r\n    let segs\r\n    let i\r\n    let seg\r\n\r\n    segs = this.componentFootprintToSegs(eventFootprint.componentFootprint)\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n\r\n      if (!unzonedRange.isStart) {\r\n        seg.isStart = false\r\n      }\r\n      if (!unzonedRange.isEnd) {\r\n        seg.isEnd = false\r\n      }\r\n\r\n      seg.footprint = eventFootprint\r\n      // TODO: rename to seg.eventFootprint\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  componentFootprintToSegs(componentFootprint) {\r\n    return []\r\n  }\r\n\r\n\r\n  // Utils\r\n  // ---------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  callChildren(methodName, args) {\r\n    this.iterChildren(function(child) {\r\n      child[methodName].apply(child, args)\r\n    })\r\n  }\r\n\r\n\r\n  iterChildren(func) {\r\n    let childrenByUid = this.childrenByUid\r\n    let uid\r\n\r\n    for (uid in childrenByUid) {\r\n      func(childrenByUid[uid])\r\n    }\r\n  }\r\n\r\n\r\n  _getCalendar() { // TODO: strip out. move to generic parent.\r\n    let t = (this as any)\r\n    return t.calendar || t.view.calendar\r\n  }\r\n\r\n\r\n  _getView() { // TODO: strip out. move to generic parent.\r\n    return (this as any).view\r\n  }\r\n\r\n\r\n  _getDateProfile() {\r\n    return this._getView().get('dateProfile')\r\n  }\r\n\r\n\r\n  // Generates HTML for an anchor to another view into the calendar.\r\n  // Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\r\n  // `gotoOptions` can either be a moment input, or an object with the form:\r\n  // { date, type, forceOff }\r\n  // `type` is a view-type like \"day\" or \"week\". default value is \"day\".\r\n  // `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\r\n  buildGotoAnchorHtml(gotoOptions, attrs, innerHtml) {\r\n    let date\r\n    let type\r\n    let forceOff\r\n    let finalOptions\r\n\r\n    if ($.isPlainObject(gotoOptions)) {\r\n      date = gotoOptions.date\r\n      type = gotoOptions.type\r\n      forceOff = gotoOptions.forceOff\r\n    } else {\r\n      date = gotoOptions // a single moment input\r\n    }\r\n    date = momentExt(date) // if a string, parse it\r\n\r\n    finalOptions = { // for serialization into the link\r\n      date: date.format('YYYY-MM-DD'),\r\n      type: type || 'day'\r\n    }\r\n\r\n    if (typeof attrs === 'string') {\r\n      innerHtml = attrs\r\n      attrs = null\r\n    }\r\n\r\n    attrs = attrs ? ' ' + attrsToStr(attrs) : '' // will have a leading space\r\n    innerHtml = innerHtml || ''\r\n\r\n    if (!forceOff && this.opt('navLinks')) {\r\n      return '<a' + attrs +\r\n        ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\r\n        innerHtml +\r\n        '</a>'\r\n    } else {\r\n      return '<span' + attrs + '>' +\r\n        innerHtml +\r\n        '</span>'\r\n    }\r\n  }\r\n\r\n\r\n  getAllDayHtml() {\r\n    return this.opt('allDayHtml') || htmlEscape(this.opt('allDayText'))\r\n  }\r\n\r\n\r\n  // Computes HTML classNames for a single-day element\r\n  getDayClasses(date, noThemeHighlight?) {\r\n    let view = this._getView()\r\n    let classes = []\r\n    let today\r\n\r\n    if (!this.dateProfile.activeUnzonedRange.containsDate(date)) {\r\n      classes.push('fc-disabled-day') // TODO: jQuery UI theme?\r\n    } else {\r\n      classes.push('fc-' + dayIDs[date.day()])\r\n\r\n      if (view.isDateInOtherMonth(date, this.dateProfile)) { // TODO: use DateComponent subclass somehow\r\n        classes.push('fc-other-month')\r\n      }\r\n\r\n      today = view.calendar.getNow()\r\n\r\n      if (date.isSame(today, 'day')) {\r\n        classes.push('fc-today')\r\n\r\n        if (noThemeHighlight !== true) {\r\n          classes.push(view.calendar.theme.getClass('today'))\r\n        }\r\n      } else if (date < today) {\r\n        classes.push('fc-past')\r\n      } else {\r\n        classes.push('fc-future')\r\n      }\r\n    }\r\n\r\n    return classes\r\n  }\r\n\r\n\r\n  // Utility for formatting a range. Accepts a range object, formatting string, and optional separator.\r\n  // Displays all-day ranges naturally, with an inclusive end. Takes the current isRTL into account.\r\n  // The timezones of the dates within `range` will be respected.\r\n  formatRange(range, isAllDay, formatStr, separator) {\r\n    let end = range.end\r\n\r\n    if (isAllDay) {\r\n      end = end.clone().subtract(1) // convert to inclusive. last ms of previous day\r\n    }\r\n\r\n    return formatRange(range.start, end, formatStr, separator, this.isRTL)\r\n  }\r\n\r\n\r\n  // Compute the number of the give units in the \"current\" range.\r\n  // Will return a floating-point number. Won't round.\r\n  currentRangeAs(unit) {\r\n    return this._getDateProfile().currentUnzonedRange.as(unit)\r\n  }\r\n\r\n\r\n  // Returns the date range of the full days the given range visually appears to occupy.\r\n  // Returns a plain object with start/end, NOT an UnzonedRange!\r\n  computeDayRange(unzonedRange) {\r\n    let calendar = this._getCalendar()\r\n    let startDay = calendar.msToUtcMoment(unzonedRange.startMs, true) // the beginning of the day the range starts\r\n    let end = calendar.msToUtcMoment(unzonedRange.endMs)\r\n    let endTimeMS = +end.time() // # of milliseconds into `endDay`\r\n    let endDay = end.clone().stripTime() // the beginning of the day the range exclusively ends\r\n\r\n    // If the end time is actually inclusively part of the next day and is equal to or\r\n    // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\r\n    // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\r\n    if (endTimeMS && endTimeMS >= this.nextDayThreshold) {\r\n      endDay.add(1, 'days')\r\n    }\r\n\r\n    // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\r\n    if (endDay <= startDay) {\r\n      endDay = startDay.clone().add(1, 'days')\r\n    }\r\n\r\n    return { start: startDay, end: endDay }\r\n  }\r\n\r\n\r\n  // Does the given range visually appear to occupy more than one day?\r\n  isMultiDayRange(unzonedRange) {\r\n    let dayRange = this.computeDayRange(unzonedRange)\r\n\r\n    return dayRange.end.diff(dayRange.start, 'days') > 1\r\n  }\r\n\r\n}\r\n\r\n\r\n// legacy\r\n\r\nfunction convertEventsPayloadToLegacyArray(eventsPayload) {\r\n  let eventDefId\r\n  let eventInstances\r\n  let legacyEvents = []\r\n  let i\r\n\r\n  for (eventDefId in eventsPayload) {\r\n    eventInstances = eventsPayload[eventDefId].eventInstances\r\n\r\n    for (i = 0; i < eventInstances.length; i++) {\r\n      legacyEvents.push(\r\n        eventInstances[i].toLegacy()\r\n      )\r\n    }\r\n  }\r\n\r\n  return legacyEvents\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/DateComponent.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { capitaliseFirstLetter, debounce } from './util'\r\nimport { globalDefaults, englishDefaults, rtlDefaults } from './options'\r\nimport Iterator from './common/Iterator'\r\nimport GlobalEmitter from './common/GlobalEmitter'\r\nimport { default as EmitterMixin, EmitterInterface } from './common/EmitterMixin'\r\nimport { default as ListenerMixin, ListenerInterface } from './common/ListenerMixin'\r\nimport Toolbar from './Toolbar'\r\nimport OptionsManager from './OptionsManager'\r\nimport ViewSpecManager from './ViewSpecManager'\r\nimport View from './View'\r\nimport Theme from './theme/Theme'\r\nimport Constraints from './Constraints'\r\nimport { getMomentLocaleData } from './locale'\r\nimport momentExt from './moment-ext'\r\nimport UnzonedRange from './models/UnzonedRange'\r\nimport ComponentFootprint from './models/ComponentFootprint'\r\nimport EventDateProfile from './models/event/EventDateProfile'\r\nimport EventManager from './models/EventManager'\r\nimport BusinessHourGenerator from './models/BusinessHourGenerator'\r\nimport EventSourceParser from './models/event-source/EventSourceParser'\r\nimport EventDefParser from './models/event/EventDefParser'\r\nimport SingleEventDef from './models/event/SingleEventDef'\r\nimport EventDefMutation from './models/event/EventDefMutation'\r\nimport EventSource from './models/event-source/EventSource'\r\nimport { getThemeSystemClass } from './theme/ThemeRegistry'\r\nimport { RangeInput, MomentInput, OptionsInput, EventObjectInput, EventSourceInput } from './types/input-types'\r\nwindow[\"Fullcalendar\"]\r\n\r\nexport default class Calendar {\r\n\r\n  // not for internal use. use options module directly instead.\r\n  static defaults: any = globalDefaults\r\n  static englishDefaults: any = englishDefaults\r\n  static rtlDefaults: any = rtlDefaults\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  view: View // current View object\r\n  viewsByType: { [viewName: string]: View } // holds all instantiated view instances, current or not\r\n  currentDate: moment.Moment // unzoned moment. private (public API should use getDate instead)\r\n  theme: Theme\r\n  eventManager: EventManager\r\n  constraints: Constraints\r\n  optionsManager: OptionsManager\r\n  viewSpecManager: ViewSpecManager\r\n  businessHourGenerator: BusinessHourGenerator\r\n  loadingLevel: number = 0 // number of simultaneous loading tasks\r\n\r\n  defaultAllDayEventDuration: moment.Duration\r\n  defaultTimedEventDuration: moment.Duration\r\n  localeData: object\r\n\r\n  el: JQuery\r\n  contentEl: JQuery\r\n  suggestedViewHeight: number\r\n  ignoreUpdateViewSize: number = 0\r\n  freezeContentHeightDepth: number = 0\r\n  windowResizeProxy: any\r\n\r\n  header: Toolbar\r\n  footer: Toolbar\r\n  toolbarsManager: Iterator\r\n\r\n\r\n  constructor(el: JQuery, overrides: OptionsInput) {\r\n\r\n    // declare the current calendar instance relies on GlobalEmitter. needed for garbage collection.\r\n    // unneeded() is called in destroy.\r\n    GlobalEmitter.needed()\r\n\r\n    this.el = el\r\n    this.viewsByType = {}\r\n\r\n    this.optionsManager = new OptionsManager(this, overrides)\r\n    this.viewSpecManager = new ViewSpecManager(this.optionsManager, this)\r\n    this.initMomentInternals() // needs to happen after options hash initialized\r\n    this.initCurrentDate()\r\n    this.initEventManager()\r\n    this.constraints = new Constraints(this.eventManager, this)\r\n\r\n    this.constructed()\r\n  }\r\n\r\n\r\n  constructed() {\r\n    // useful for monkeypatching. used?\r\n  }\r\n\r\n\r\n  getView(): View {\r\n    return this.view\r\n  }\r\n\r\n\r\n  publiclyTrigger(name: string, triggerInfo) {\r\n    let optHandler = this.opt(name)\r\n    let context\r\n    let args\r\n\r\n    if ($.isPlainObject(triggerInfo)) {\r\n      context = triggerInfo.context\r\n      args = triggerInfo.args\r\n    } else if ($.isArray(triggerInfo)) {\r\n      args = triggerInfo\r\n    }\r\n\r\n    if (context == null) {\r\n      context = this.el[0] // fallback context\r\n    }\r\n\r\n    if (!args) {\r\n      args = []\r\n    }\r\n\r\n    this.triggerWith(name, context, args) // Emitter's method\r\n\r\n    if (optHandler) {\r\n      return optHandler.apply(context, args)\r\n    }\r\n  }\r\n\r\n\r\n  hasPublicHandlers(name: string): boolean {\r\n    return this.hasHandlers(name) ||\r\n      this.opt(name) // handler specified in options\r\n  }\r\n\r\n\r\n  // Options Public API\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // public getter/setter\r\n  option(name: string | object, value?) {\r\n    let newOptionHash\r\n\r\n    if (typeof name === 'string') {\r\n      if (value === undefined) { // getter\r\n        return this.optionsManager.get(name)\r\n      } else { // setter for individual option\r\n        newOptionHash = {}\r\n        newOptionHash[name] = value\r\n        this.optionsManager.add(newOptionHash)\r\n      }\r\n    } else if (typeof name === 'object') { // compound setter with object input\r\n      this.optionsManager.add(name)\r\n    }\r\n  }\r\n\r\n\r\n  // private getter\r\n  opt(name: string) {\r\n    return this.optionsManager.get(name)\r\n  }\r\n\r\n\r\n  // View\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Given a view name for a custom view or a standard view, creates a ready-to-go View object\r\n  instantiateView(viewType: string): View {\r\n    let spec = this.viewSpecManager.getViewSpec(viewType)\r\n\r\n    if (!spec) {\r\n      throw new Error(`View type \"${viewType}\" is not valid`)\r\n    }\r\n\r\n    return new spec['class'](this, spec)\r\n  }\r\n\r\n\r\n  // Returns a boolean about whether the view is okay to instantiate at some point\r\n  isValidViewType(viewType: string): boolean {\r\n    return Boolean(this.viewSpecManager.getViewSpec(viewType))\r\n  }\r\n\r\n\r\n  changeView(viewName: string, dateOrRange: RangeInput | MomentInput) {\r\n    if (dateOrRange) {\r\n      if ((dateOrRange as RangeInput).start && (dateOrRange as RangeInput).end) { // a range\r\n        this.optionsManager.recordOverrides({ // will not rerender\r\n          visibleRange: dateOrRange\r\n        })\r\n      } else { // a date\r\n        this.currentDate = this.moment(dateOrRange).stripZone() // just like gotoDate\r\n      }\r\n    }\r\n\r\n    this.renderView(viewName)\r\n  }\r\n\r\n\r\n  // Forces navigation to a view for the given date.\r\n  // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\r\n  zoomTo(newDate: moment.Moment, viewType?: string) {\r\n    let spec\r\n\r\n    viewType = viewType || 'day' // day is default zoom\r\n    spec = this.viewSpecManager.getViewSpec(viewType) ||\r\n      this.viewSpecManager.getUnitViewSpec(viewType)\r\n\r\n    this.currentDate = newDate.clone()\r\n    this.renderView(spec ? spec.type : null)\r\n  }\r\n\r\n\r\n  // Current Date\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  initCurrentDate() {\r\n    let defaultDateInput = this.opt('defaultDate')\r\n\r\n    // compute the initial ambig-timezone date\r\n    if (defaultDateInput != null) {\r\n      this.currentDate = this.moment(defaultDateInput).stripZone()\r\n    } else {\r\n      this.currentDate = this.getNow() // getNow already returns unzoned\r\n    }\r\n  }\r\n\r\n\r\n  prev() {\r\n    let view = this.view\r\n    let prevInfo = view.dateProfileGenerator.buildPrev(view.get('dateProfile'))\r\n\r\n    if (prevInfo.isValid) {\r\n      this.currentDate = prevInfo.date\r\n      this.renderView()\r\n    }\r\n  }\r\n\r\n\r\n  next() {\r\n    let view = this.view\r\n    let nextInfo = view.dateProfileGenerator.buildNext(view.get('dateProfile'))\r\n\r\n    if (nextInfo.isValid) {\r\n      this.currentDate = nextInfo.date\r\n      this.renderView()\r\n    }\r\n  }\r\n\r\n\r\n  prevYear() {\r\n    this.currentDate.add(-1, 'years')\r\n    this.renderView()\r\n  }\r\n\r\n\r\n  nextYear() {\r\n    this.currentDate.add(1, 'years')\r\n    this.renderView()\r\n  }\r\n\r\n\r\n  today() {\r\n    this.currentDate = this.getNow() // should deny like prev/next?\r\n    this.renderView()\r\n  }\r\n\r\n\r\n  gotoDate(zonedDateInput) {\r\n    this.currentDate = this.moment(zonedDateInput).stripZone()\r\n    this.renderView()\r\n  }\r\n\r\n\r\n  incrementDate(delta) {\r\n    this.currentDate.add(moment.duration(delta))\r\n    this.renderView()\r\n  }\r\n\r\n\r\n  // for external API\r\n  getDate(): moment.Moment {\r\n    return this.applyTimezone(this.currentDate) // infuse the calendar's timezone\r\n  }\r\n\r\n\r\n  // Loading Triggering\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // Should be called when any type of async data fetching begins\r\n  pushLoading() {\r\n    if (!(this.loadingLevel++)) {\r\n      this.publiclyTrigger('loading', [true, this.view])\r\n    }\r\n  }\r\n\r\n\r\n  // Should be called when any type of async data fetching completes\r\n  popLoading() {\r\n    if (!(--this.loadingLevel)) {\r\n      this.publiclyTrigger('loading', [false, this.view])\r\n    }\r\n  }\r\n\r\n\r\n  // High-level Rendering\r\n  // -----------------------------------------------------------------------------------\r\n\r\n\r\n  render() {\r\n    if (!this.contentEl) {\r\n      this.initialRender()\r\n    } else if (this.elementVisible()) {\r\n      // mainly for the public API\r\n      this.calcSize()\r\n      this.updateViewSize()\r\n    }\r\n  }\r\n\r\n\r\n  initialRender() {\r\n    let el = this.el\r\n\r\n    el.addClass('fc')\r\n\r\n    // event delegation for nav links\r\n    el.on('click.fc', 'a[data-goto]', (ev) => {\r\n      let anchorEl = $(ev.currentTarget)\r\n      let gotoOptions = anchorEl.data('goto') // will automatically parse JSON\r\n      let date = this.moment(gotoOptions.date)\r\n      let viewType = gotoOptions.type\r\n\r\n      // property like \"navLinkDayClick\". might be a string or a function\r\n      let customAction = this.view.opt('navLink' + capitaliseFirstLetter(viewType) + 'Click')\r\n\r\n      if (typeof customAction === 'function') {\r\n        customAction(date, ev)\r\n      } else {\r\n        if (typeof customAction === 'string') {\r\n          viewType = customAction\r\n        }\r\n        this.zoomTo(date, viewType)\r\n      }\r\n    })\r\n\r\n    // called immediately, and upon option change\r\n    this.optionsManager.watch('settingTheme', ['?theme', '?themeSystem'], (opts) => {\r\n      let themeClass = getThemeSystemClass(opts.themeSystem || opts.theme)\r\n      let theme = new themeClass(this.optionsManager)\r\n      let widgetClass = theme.getClass('widget')\r\n\r\n      this.theme = theme\r\n\r\n      if (widgetClass) {\r\n        el.addClass(widgetClass)\r\n      }\r\n    }, () => {\r\n      let widgetClass = this.theme.getClass('widget')\r\n\r\n      this.theme = null\r\n\r\n      if (widgetClass) {\r\n        el.removeClass(widgetClass)\r\n      }\r\n    })\r\n\r\n    this.optionsManager.watch('settingBusinessHourGenerator', ['?businessHours'], (deps) => {\r\n      this.businessHourGenerator = new BusinessHourGenerator(deps.businessHours, this)\r\n\r\n      if (this.view) {\r\n        this.view.set('businessHourGenerator', this.businessHourGenerator)\r\n      }\r\n    }, () => {\r\n      this.businessHourGenerator = null\r\n    })\r\n\r\n    // called immediately, and upon option change.\r\n    // HACK: locale often affects isRTL, so we explicitly listen to that too.\r\n    this.optionsManager.watch('applyingDirClasses', ['?isRTL', '?locale'], (opts) => {\r\n      el.toggleClass('fc-ltr', !opts.isRTL)\r\n      el.toggleClass('fc-rtl', opts.isRTL)\r\n    })\r\n\r\n    this.contentEl = $(\"<div class='fc-view-container'/>\").prependTo(el)\r\n\r\n    this.initToolbars()\r\n    this.renderHeader()\r\n    this.renderFooter()\r\n    this.renderView(this.opt('defaultView'))\r\n\r\n    if (this.opt('handleWindowResize')) {\r\n      $(window).resize(\r\n        this.windowResizeProxy = debounce( // prevents rapid calls\r\n          this.windowResize.bind(this),\r\n          this.opt('windowResizeDelay')\r\n        )\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  destroy() {\r\n    if (this.view) {\r\n      this.clearView()\r\n    }\r\n\r\n    this.toolbarsManager.proxyCall('removeElement')\r\n    this.contentEl.remove()\r\n    this.el.removeClass('fc fc-ltr fc-rtl')\r\n\r\n    // removes theme-related root className\r\n    this.optionsManager.unwatch('settingTheme')\r\n    this.optionsManager.unwatch('settingBusinessHourGenerator')\r\n\r\n    this.el.off('.fc') // unbind nav link handlers\r\n\r\n    if (this.windowResizeProxy) {\r\n      $(window).unbind('resize', this.windowResizeProxy)\r\n      this.windowResizeProxy = null\r\n    }\r\n\r\n    GlobalEmitter.unneeded()\r\n  }\r\n\r\n\r\n  elementVisible(): boolean {\r\n    return this.el.is(':visible')\r\n  }\r\n\r\n\r\n  // Render Queue\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  bindViewHandlers(view) {\r\n\r\n    view.watch('titleForCalendar', ['title'], (deps) => { // TODO: better system\r\n      if (view === this.view) { // hack\r\n        this.setToolbarsTitle(deps.title)\r\n      }\r\n    })\r\n\r\n    view.watch('dateProfileForCalendar', ['dateProfile'], (deps) => {\r\n      if (view === this.view) { // hack\r\n        this.currentDate = deps.dateProfile.date // might have been constrained by view dates\r\n        this.updateToolbarButtons(deps.dateProfile)\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  unbindViewHandlers(view) {\r\n    view.unwatch('titleForCalendar')\r\n    view.unwatch('dateProfileForCalendar')\r\n  }\r\n\r\n\r\n  // View Rendering\r\n  // -----------------------------------------------------------------------------------\r\n\r\n\r\n  // Renders a view because of a date change, view-type change, or for the first time.\r\n  // If not given a viewType, keep the current view but render different dates.\r\n  // Accepts an optional scroll state to restore to.\r\n  renderView(viewType?: string, subViewType?: string) {\r\n    let oldView = this.view\r\n    let newView\r\n\r\n    this.freezeContentHeight()\r\n\r\n    if (oldView && viewType && oldView.type !== viewType) {\r\n      this.clearView()\r\n    }\r\n\r\n    // if viewType changed, or the view was never created, create a fresh view\r\n    if (!this.view && viewType) {\r\n      newView = this.view =\r\n        this.viewsByType[viewType] ||\r\n        (this.viewsByType[viewType] = this.instantiateView(viewType))\r\n\r\n      this.bindViewHandlers(newView)\r\n\r\n      newView.startBatchRender() // so that setElement+setDate rendering are joined\r\n      // let buttonOptionListWeek = \"<button class='optionListWeek' value='week'>Week</button> <button class='optionListWeek' value='day'>Day</button>\"\r\n      // $(this.contentEl).find('.optionListWeek').remove()\r\n      // if (viewType === 'listWeek') {\r\n      //   if (subViewType) {\r\n      //     this.view['subType'] = subViewType\r\n      //   } else {\r\n      //     this.view['subType'] = 'week'\r\n      //   }\r\n      //   $(this.contentEl).append(buttonOptionListWeek)\r\n      //   $(this.contentEl).find('.optionListWeek').click((el: any) => {\r\n      //     $(el).addClass('fc-state-active')\r\n      //     if (el.target.value === 'week') {\r\n      //       this.clearView()\r\n      //       this.renderView('listWeek', 'week')\r\n      //     } else if (el.target.value === 'day') {\r\n      //       this.clearView()\r\n      //       this.renderView('listWeek', 'day')\r\n      //     }\r\n      //   })\r\n      // }\r\n      newView.setElement(\r\n        $(\"<div class='fc-view fc-\" + viewType + \"-view' />\").appendTo(this.contentEl)\r\n      )\r\n\r\n      this.toolbarsManager.proxyCall('activateButton', viewType)\r\n    }\r\n    if (this.view) {\r\n\r\n      // prevent unnecessary change firing\r\n      if (this.view.get('businessHourGenerator') !== this.businessHourGenerator) {\r\n        this.view.set('businessHourGenerator', this.businessHourGenerator)\r\n      }\r\n\r\n      this.view.setDate(this.currentDate)\r\n\r\n      if (newView) {\r\n        newView.stopBatchRender()\r\n      }\r\n    }\r\n\r\n    this.thawContentHeight()\r\n  }\r\n\r\n\r\n  // Unrenders the current view and reflects this change in the Header.\r\n  // Unregsiters the `view`, but does not remove from viewByType hash.\r\n  clearView() {\r\n    let currentView = this.view\r\n\r\n    this.toolbarsManager.proxyCall('deactivateButton', currentView.type)\r\n\r\n    this.unbindViewHandlers(currentView)\r\n\r\n    currentView.removeElement()\r\n    currentView.unsetDate() // so bindViewHandlers doesn't fire with old values next time\r\n\r\n    this.view = null\r\n  }\r\n\r\n\r\n  // Destroys the view, including the view object. Then, re-instantiates it and renders it.\r\n  // Maintains the same scroll state.\r\n  // TODO: maintain any other user-manipulated state.\r\n  reinitView() {\r\n    let oldView = this.view\r\n    let scroll = oldView.queryScroll() // wouldn't be so complicated if Calendar owned the scroll\r\n    this.freezeContentHeight()\r\n\r\n    this.clearView()\r\n    this.calcSize()\r\n    this.renderView(oldView.type) // needs the type to freshly render\r\n\r\n    this.view.applyScroll(scroll)\r\n    this.thawContentHeight()\r\n  }\r\n\r\n\r\n  // Resizing\r\n  // -----------------------------------------------------------------------------------\r\n\r\n\r\n  getSuggestedViewHeight(): number {\r\n    if (this.suggestedViewHeight == null) {\r\n      this.calcSize()\r\n    }\r\n    return this.suggestedViewHeight\r\n  }\r\n\r\n\r\n  isHeightAuto(): boolean {\r\n    return this.opt('contentHeight') === 'auto' || this.opt('height') === 'auto'\r\n  }\r\n\r\n\r\n  updateViewSize(isResize: boolean = false) {\r\n    let view = this.view\r\n    let scroll\r\n\r\n    if (!this.ignoreUpdateViewSize && view) {\r\n\r\n      if (isResize) {\r\n        this.calcSize()\r\n        scroll = view.queryScroll()\r\n      }\r\n\r\n      this.ignoreUpdateViewSize++\r\n\r\n      view.updateSize(\r\n        this.getSuggestedViewHeight(),\r\n        this.isHeightAuto(),\r\n        isResize\r\n      )\r\n\r\n      this.ignoreUpdateViewSize--\r\n\r\n      if (isResize) {\r\n        view.applyScroll(scroll)\r\n      }\r\n\r\n      return true // signal success\r\n    }\r\n  }\r\n\r\n\r\n  calcSize() {\r\n    if (this.elementVisible()) {\r\n      this._calcSize()\r\n    }\r\n  }\r\n\r\n\r\n  _calcSize() { // assumes elementVisible\r\n    let contentHeightInput = this.opt('contentHeight')\r\n    let heightInput = this.opt('height')\r\n\r\n    if (typeof contentHeightInput === 'number') { // exists and not 'auto'\r\n      this.suggestedViewHeight = contentHeightInput\r\n    } else if (typeof contentHeightInput === 'function') { // exists and is a function\r\n      this.suggestedViewHeight = contentHeightInput()\r\n    } else if (typeof heightInput === 'number') { // exists and not 'auto'\r\n      this.suggestedViewHeight = heightInput - this.queryToolbarsHeight()\r\n    } else if (typeof heightInput === 'function') { // exists and is a function\r\n      this.suggestedViewHeight = heightInput() - this.queryToolbarsHeight()\r\n    } else if (heightInput === 'parent') { // set to height of parent element\r\n      this.suggestedViewHeight = this.el.parent().height() - this.queryToolbarsHeight()\r\n    } else {\r\n      this.suggestedViewHeight = Math.round(\r\n        this.contentEl.width() /\r\n        Math.max(this.opt('aspectRatio'), .5)\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  windowResize(ev: JQueryEventObject) {\r\n    if (\r\n      // the purpose: so we don't process jqui \"resize\" events that have bubbled up\r\n      // cast to any because .target, which is Element, can't be compared to window for some reason.\r\n      (ev as any).target === window &&\r\n      this.view &&\r\n      this.view.isDatesRendered\r\n    ) {\r\n      if (this.updateViewSize(true)) { // isResize=true, returns true on success\r\n        this.publiclyTrigger('windowResize', [this.view])\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* Height \"Freezing\"\r\n  -----------------------------------------------------------------------------*/\r\n\r\n\r\n  freezeContentHeight() {\r\n    if (!(this.freezeContentHeightDepth++)) {\r\n      this.forceFreezeContentHeight()\r\n    }\r\n  }\r\n\r\n\r\n  forceFreezeContentHeight() {\r\n    this.contentEl.css({\r\n      width: '100%',\r\n      height: this.contentEl.height(),\r\n      overflow: 'hidden'\r\n    })\r\n  }\r\n\r\n\r\n  thawContentHeight() {\r\n    this.freezeContentHeightDepth--\r\n\r\n    // always bring back to natural height\r\n    this.contentEl.css({\r\n      width: '',\r\n      height: '',\r\n      overflow: ''\r\n    })\r\n\r\n    // but if there are future thaws, re-freeze\r\n    if (this.freezeContentHeightDepth) {\r\n      this.forceFreezeContentHeight()\r\n    }\r\n  }\r\n\r\n\r\n  // Toolbar\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  initToolbars() {\r\n    this.header = new Toolbar(this, this.computeHeaderOptions())\r\n    this.footer = new Toolbar(this, this.computeFooterOptions())\r\n    this.toolbarsManager = new Iterator([this.header, this.footer])\r\n  }\r\n\r\n\r\n  computeHeaderOptions() {\r\n    return {\r\n      extraClasses: 'fc-header-toolbar',\r\n      layout: this.opt('header')\r\n    }\r\n  }\r\n\r\n\r\n  computeFooterOptions() {\r\n    return {\r\n      extraClasses: 'fc-footer-toolbar',\r\n      layout: this.opt('footer')\r\n    }\r\n  }\r\n\r\n\r\n  // can be called repeatedly and Header will rerender\r\n  renderHeader() {\r\n    let header = this.header\r\n\r\n    header.setToolbarOptions(this.computeHeaderOptions())\r\n    header.render()\r\n\r\n    if (header.el) {\r\n      this.el.prepend(header.el)\r\n    }\r\n  }\r\n\r\n\r\n  // can be called repeatedly and Footer will rerender\r\n  renderFooter() {\r\n    let footer = this.footer\r\n\r\n    footer.setToolbarOptions(this.computeFooterOptions())\r\n    footer.render()\r\n\r\n    if (footer.el) {\r\n      this.el.append(footer.el)\r\n    }\r\n  }\r\n\r\n\r\n  setToolbarsTitle(title: string) {\r\n    this.toolbarsManager.proxyCall('updateTitle', title)\r\n  }\r\n\r\n\r\n  updateToolbarButtons(dateProfile) {\r\n    let now = this.getNow()\r\n    let view = this.view\r\n    let todayInfo = view.dateProfileGenerator.build(now)\r\n    let prevInfo = view.dateProfileGenerator.buildPrev(view.get('dateProfile'))\r\n    let nextInfo = view.dateProfileGenerator.buildNext(view.get('dateProfile'))\r\n\r\n    this.toolbarsManager.proxyCall(\r\n      (todayInfo.isValid && !dateProfile.currentUnzonedRange.containsDate(now)) ?\r\n        'enableButton' :\r\n        'disableButton',\r\n      'today'\r\n    )\r\n\r\n    this.toolbarsManager.proxyCall(\r\n      prevInfo.isValid ?\r\n        'enableButton' :\r\n        'disableButton',\r\n      'prev'\r\n    )\r\n\r\n    this.toolbarsManager.proxyCall(\r\n      nextInfo.isValid ?\r\n        'enableButton' :\r\n        'disableButton',\r\n      'next'\r\n    )\r\n  }\r\n\r\n\r\n  queryToolbarsHeight() {\r\n    return this.toolbarsManager.items.reduce(function (accumulator, toolbar) {\r\n      let toolbarHeight = toolbar.el ? toolbar.el.outerHeight(true) : 0 // includes margin\r\n      return accumulator + toolbarHeight\r\n    }, 0)\r\n  }\r\n\r\n\r\n  // Selection\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  // this public method receives start/end dates in any format, with any timezone\r\n  select(zonedStartInput: MomentInput, zonedEndInput?: MomentInput) {\r\n    this.view.select(\r\n      this.buildSelectFootprint.apply(this, arguments)\r\n    )\r\n  }\r\n\r\n\r\n  unselect() { // safe to be called before renderView\r\n    if (this.view) {\r\n      this.view.unselect()\r\n    }\r\n  }\r\n\r\n\r\n  // Given arguments to the select method in the API, returns a span (unzoned start/end and other info)\r\n  buildSelectFootprint(zonedStartInput: MomentInput, zonedEndInput?: MomentInput): ComponentFootprint {\r\n    let start = this.moment(zonedStartInput).stripZone()\r\n    let end\r\n\r\n    if (zonedEndInput) {\r\n      end = this.moment(zonedEndInput).stripZone()\r\n    } else if (start.hasTime()) {\r\n      end = start.clone().add(this.defaultTimedEventDuration)\r\n    } else {\r\n      end = start.clone().add(this.defaultAllDayEventDuration)\r\n    }\r\n\r\n    return new ComponentFootprint(\r\n      new UnzonedRange(start, end),\r\n      !start.hasTime()\r\n    )\r\n  }\r\n\r\n\r\n  // Date Utils\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  initMomentInternals() {\r\n\r\n    this.defaultAllDayEventDuration = moment.duration(this.opt('defaultAllDayEventDuration'))\r\n    this.defaultTimedEventDuration = moment.duration(this.opt('defaultTimedEventDuration'))\r\n\r\n    // Called immediately, and when any of the options change.\r\n    // Happens before any internal objects rebuild or rerender, because this is very core.\r\n    this.optionsManager.watch('buildingMomentLocale', [\r\n      '?locale', '?monthNames', '?monthNamesShort', '?dayNames', '?dayNamesShort',\r\n      '?firstDay', '?weekNumberCalculation'\r\n    ], (opts) => {\r\n      let weekNumberCalculation = opts.weekNumberCalculation\r\n      let firstDay = opts.firstDay\r\n      let _week\r\n\r\n      // normalize\r\n      if (weekNumberCalculation === 'iso') {\r\n        weekNumberCalculation = 'ISO' // normalize\r\n      }\r\n\r\n      let localeData = Object.create( // make a cheap copy\r\n        getMomentLocaleData(opts.locale) // will fall back to en\r\n      )\r\n\r\n      if (opts.monthNames) {\r\n        localeData._months = opts.monthNames\r\n      }\r\n      if (opts.monthNamesShort) {\r\n        localeData._monthsShort = opts.monthNamesShort\r\n      }\r\n      if (opts.dayNames) {\r\n        localeData._weekdays = opts.dayNames\r\n      }\r\n      if (opts.dayNamesShort) {\r\n        localeData._weekdaysShort = opts.dayNamesShort\r\n      }\r\n\r\n      if (firstDay == null && weekNumberCalculation === 'ISO') {\r\n        firstDay = 1\r\n      }\r\n      if (firstDay != null) {\r\n        _week = Object.create(localeData._week) // _week: { dow: # }\r\n        _week.dow = firstDay\r\n        localeData._week = _week\r\n      }\r\n\r\n      if ( // whitelist certain kinds of input\r\n        weekNumberCalculation === 'ISO' ||\r\n        weekNumberCalculation === 'local' ||\r\n        typeof weekNumberCalculation === 'function'\r\n      ) {\r\n        localeData._fullCalendar_weekCalc = weekNumberCalculation // moment-ext will know what to do with it\r\n      }\r\n\r\n      this.localeData = localeData\r\n\r\n      // If the internal current date object already exists, move to new locale.\r\n      // We do NOT need to do this technique for event dates, because this happens when converting to \"segments\".\r\n      if (this.currentDate) {\r\n        this.localizeMoment(this.currentDate) // sets to localeData\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // Builds a moment using the settings of the current calendar: timezone and locale.\r\n  // Accepts anything the vanilla moment() constructor accepts.\r\n  moment(...args): moment.Moment {\r\n    let mom\r\n\r\n    if (this.opt('timezone') === 'local') {\r\n      mom = momentExt.apply(null, args)\r\n\r\n      // Force the moment to be local, because momentExt doesn't guarantee it.\r\n      if (mom.hasTime()) { // don't give ambiguously-timed moments a local zone\r\n        mom.local()\r\n      }\r\n    } else if (this.opt('timezone') === 'UTC') {\r\n      mom = momentExt.utc.apply(null, args) // process as UTC\r\n    } else {\r\n      mom = momentExt.parseZone.apply(null, args) // let the input decide the zone\r\n    }\r\n\r\n    this.localizeMoment(mom) // TODO\r\n\r\n    return mom\r\n  }\r\n\r\n\r\n  msToMoment(ms: number, forceAllDay: boolean): moment.Moment {\r\n    let mom = momentExt.utc(ms) // TODO: optimize by using Date.UTC\r\n\r\n    if (forceAllDay) {\r\n      mom.stripTime()\r\n    } else {\r\n      mom = this.applyTimezone(mom) // may or may not apply locale\r\n    }\r\n\r\n    this.localizeMoment(mom)\r\n\r\n    return mom\r\n  }\r\n\r\n\r\n  msToUtcMoment(ms: number, forceAllDay: boolean): moment.Moment {\r\n    let mom = momentExt.utc(ms) // TODO: optimize by using Date.UTC\r\n\r\n    if (forceAllDay) {\r\n      mom.stripTime()\r\n    }\r\n\r\n    this.localizeMoment(mom)\r\n\r\n    return mom\r\n  }\r\n\r\n\r\n  // Updates the given moment's locale settings to the current calendar locale settings.\r\n  localizeMoment(mom) {\r\n    mom._locale = this.localeData\r\n  }\r\n\r\n\r\n  // Returns a boolean about whether or not the calendar knows how to calculate\r\n  // the timezone offset of arbitrary dates in the current timezone.\r\n  getIsAmbigTimezone(): boolean {\r\n    return this.opt('timezone') !== 'local' && this.opt('timezone') !== 'UTC'\r\n  }\r\n\r\n\r\n  // Returns a copy of the given date in the current timezone. Has no effect on dates without times.\r\n  applyTimezone(date: moment.Moment): moment.Moment {\r\n    if (!date.hasTime()) {\r\n      return date.clone()\r\n    }\r\n\r\n    let zonedDate = this.moment(date.toArray())\r\n    let timeAdjust = date.time().asMilliseconds() - zonedDate.time().asMilliseconds()\r\n    let adjustedZonedDate\r\n\r\n    // Safari sometimes has problems with this coersion when near DST. Adjust if necessary. (bug #2396)\r\n    if (timeAdjust) { // is the time result different than expected?\r\n      adjustedZonedDate = zonedDate.clone().add(timeAdjust) // add milliseconds\r\n      if (date.time().asMilliseconds() - adjustedZonedDate.time().asMilliseconds() === 0) { // does it match perfectly now?\r\n        zonedDate = adjustedZonedDate\r\n      }\r\n    }\r\n\r\n    return zonedDate\r\n  }\r\n\r\n\r\n  /*\r\n  Assumes the footprint is non-open-ended.\r\n  */\r\n  footprintToDateProfile(componentFootprint, ignoreEnd = false) {\r\n    let start = momentExt.utc(componentFootprint.unzonedRange.startMs)\r\n    let end\r\n\r\n    if (!ignoreEnd) {\r\n      end = momentExt.utc(componentFootprint.unzonedRange.endMs)\r\n    }\r\n\r\n    if (componentFootprint.isAllDay) {\r\n      start.stripTime()\r\n\r\n      if (end) {\r\n        end.stripTime()\r\n      }\r\n    } else {\r\n      start = this.applyTimezone(start)\r\n\r\n      if (end) {\r\n        end = this.applyTimezone(end)\r\n      }\r\n    }\r\n\r\n    return new EventDateProfile(start, end, this)\r\n  }\r\n\r\n\r\n  // Returns a moment for the current date, as defined by the client's computer or from the `now` option.\r\n  // Will return an moment with an ambiguous timezone.\r\n  getNow(): moment.Moment {\r\n    let now = this.opt('now')\r\n    if (typeof now === 'function') {\r\n      now = now()\r\n    }\r\n    return this.moment(now).stripZone()\r\n  }\r\n\r\n\r\n  // Produces a human-readable string for the given duration.\r\n  // Side-effect: changes the locale of the given duration.\r\n  humanizeDuration(duration: moment.Duration): string {\r\n    return duration.locale(this.opt('locale')).humanize()\r\n  }\r\n\r\n\r\n  // will return `null` if invalid range\r\n  parseUnzonedRange(rangeInput: RangeInput): UnzonedRange {\r\n    let start = null\r\n    let end = null\r\n\r\n    if (rangeInput.start) {\r\n      start = this.moment(rangeInput.start).stripZone()\r\n    }\r\n\r\n    if (rangeInput.end) {\r\n      end = this.moment(rangeInput.end).stripZone()\r\n    }\r\n\r\n    if (!start && !end) {\r\n      return null\r\n    }\r\n\r\n    if (start && end && end.isBefore(start)) {\r\n      return null\r\n    }\r\n\r\n    return new UnzonedRange(start, end)\r\n  }\r\n\r\n\r\n  // Event-Date Utilities\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  initEventManager() {\r\n    let eventManager = new EventManager(this)\r\n\r\n    let rawSources = this.opt('eventSources') || []\r\n    let singleRawSource = this.opt('events')\r\n    // if (this.optionsManager.overrides.locale === 'th') {\r\n    //   singleRawSource.forEach((element) => {\r\n    //     if (element.start) {\r\n    //       element.start = moment(element.start).set('year', moment(element.start).get('year') + 543).toString()\r\n    //     }\r\n    //     if (element.end) {\r\n    //       element.end = moment(element.end).set('year', moment(element.end).get('year') + 543).toString()\r\n    //     }\r\n    //   })\r\n    // }\r\n\r\n\r\n    if (window['isMobile']) {\r\n      singleRawSource.forEach(element => {\r\n        if (element.start !== element.end && element.end) {\r\n          let startDay = moment(JSON.parse(JSON.stringify(element.start)))\r\n          let endDay = moment(JSON.parse(JSON.stringify(element.end)))\r\n          let diffDay = endDay.diff(startDay, 'days')\r\n          element.backupEnd = moment(JSON.parse(JSON.stringify(element.end)))\r\n          element.end = null\r\n          for (let i = 1; i < diffDay + 1; i++) {\r\n            let newElement = JSON.parse(JSON.stringify(element))\r\n            newElement.start = moment(newElement.start).set('date', moment(newElement.start).get('date') + i).format('YYYY-MM-DD')\r\n            newElement.backupEnd = moment(JSON.parse(JSON.stringify(element.backupEnd)))\r\n            newElement.end = null\r\n            singleRawSource.push(newElement)\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    console.log(singleRawSource)\r\n    this.eventManager = eventManager\r\n\r\n    if (singleRawSource) {\r\n      rawSources.unshift(singleRawSource)\r\n    }\r\n\r\n    eventManager.on('release', (eventsPayload) => {\r\n      this.trigger('eventsReset', eventsPayload)\r\n    })\r\n\r\n    eventManager.freeze()\r\n\r\n    rawSources.forEach((rawSource) => {\r\n\r\n      let source = EventSourceParser.parse(rawSource, this)\r\n\r\n      if (source) {\r\n        eventManager.addSource(source)\r\n      }\r\n    })\r\n    eventManager.thaw()\r\n  }\r\n\r\n\r\n  requestEvents(start: moment.Moment, end: moment.Moment) {\r\n    return this.eventManager.requestEvents(\r\n      start,\r\n      end,\r\n      this.opt('timezone'),\r\n      !this.opt('lazyFetching')\r\n    )\r\n  }\r\n\r\n\r\n  // Get an event's normalized end date. If not present, calculate it from the defaults.\r\n  getEventEnd(event): moment.Moment {\r\n    if (event.end) {\r\n      return event.end.clone()\r\n    } else {\r\n      return this.getDefaultEventEnd(event.allDay, event.start)\r\n    }\r\n  }\r\n\r\n\r\n  // Given an event's allDay status and start date, return what its fallback end date should be.\r\n  // TODO: rename to computeDefaultEventEnd\r\n  getDefaultEventEnd(allDay: boolean, zonedStart: moment.Moment) {\r\n    let end = zonedStart.clone()\r\n\r\n    if (allDay) {\r\n      end.stripTime().add(this.defaultAllDayEventDuration)\r\n    } else {\r\n      end.add(this.defaultTimedEventDuration)\r\n    }\r\n\r\n    if (this.getIsAmbigTimezone()) {\r\n      end.stripZone() // we don't know what the tzo should be\r\n    }\r\n\r\n    return end\r\n  }\r\n\r\n\r\n  // Public Events API\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  rerenderEvents() { // API method. destroys old events if previously rendered.\r\n    this.view.flash('displayingEvents')\r\n  }\r\n\r\n\r\n  refetchEvents() {\r\n    this.eventManager.refetchAllSources()\r\n  }\r\n\r\n\r\n  renderEvents(eventInputs: EventObjectInput[], isSticky?: boolean) {\r\n    this.eventManager.freeze()\r\n\r\n    for (let i = 0; i < eventInputs.length; i++) {\r\n      this.renderEvent(eventInputs[i], isSticky)\r\n    }\r\n\r\n    this.eventManager.thaw()\r\n  }\r\n\r\n\r\n  renderEvent(eventInput: EventObjectInput, isSticky: boolean = false) {\r\n    let eventManager = this.eventManager\r\n    let eventDef = EventDefParser.parse(\r\n      eventInput,\r\n      eventInput.source || eventManager.stickySource\r\n    )\r\n\r\n    if (eventDef) {\r\n      eventManager.addEventDef(eventDef, isSticky)\r\n    }\r\n  }\r\n\r\n\r\n  // legacyQuery operates on legacy event instance objects\r\n  removeEvents(legacyQuery) {\r\n    let eventManager = this.eventManager\r\n    let legacyInstances = []\r\n    let idMap = {}\r\n    let eventDef\r\n    let i\r\n\r\n    if (legacyQuery == null) { // shortcut for removing all\r\n      eventManager.removeAllEventDefs() // persist=true\r\n    } else {\r\n      eventManager.getEventInstances().forEach(function (eventInstance) {\r\n        legacyInstances.push(eventInstance.toLegacy())\r\n      })\r\n\r\n      legacyInstances = filterLegacyEventInstances(legacyInstances, legacyQuery)\r\n\r\n      // compute unique IDs\r\n      for (i = 0; i < legacyInstances.length; i++) {\r\n        eventDef = this.eventManager.getEventDefByUid(legacyInstances[i]._id)\r\n        idMap[eventDef.id] = true\r\n      }\r\n\r\n      eventManager.freeze()\r\n\r\n      for (i in idMap) { // reuse `i` as an \"id\"\r\n        eventManager.removeEventDefsById(i) // persist=true\r\n      }\r\n\r\n      eventManager.thaw()\r\n    }\r\n  }\r\n\r\n\r\n  // legacyQuery operates on legacy event instance objects\r\n  clientEvents(legacyQuery) {\r\n    let legacyEventInstances = []\r\n\r\n    this.eventManager.getEventInstances().forEach(function (eventInstance) {\r\n      legacyEventInstances.push(eventInstance.toLegacy())\r\n    })\r\n\r\n    return filterLegacyEventInstances(legacyEventInstances, legacyQuery)\r\n  }\r\n\r\n\r\n  updateEvents(eventPropsArray: EventObjectInput[]) {\r\n    this.eventManager.freeze()\r\n\r\n    for (let i = 0; i < eventPropsArray.length; i++) {\r\n      this.updateEvent(eventPropsArray[i])\r\n    }\r\n\r\n    this.eventManager.thaw()\r\n  }\r\n\r\n\r\n  updateEvent(eventProps: EventObjectInput) {\r\n    let eventDef = this.eventManager.getEventDefByUid(eventProps._id)\r\n    let eventInstance\r\n    let eventDefMutation\r\n\r\n    if (eventDef instanceof SingleEventDef) {\r\n      eventInstance = eventDef.buildInstance()\r\n\r\n      eventDefMutation = EventDefMutation.createFromRawProps(\r\n        eventInstance,\r\n        eventProps, // raw props\r\n        null // largeUnit -- who uses it?\r\n      )\r\n\r\n      this.eventManager.mutateEventsWithId(eventDef.id, eventDefMutation) // will release\r\n    }\r\n  }\r\n\r\n\r\n  // Public Event Sources API\r\n  // ------------------------------------------------------------------------------------\r\n\r\n\r\n  getEventSources(): EventSource {\r\n    return this.eventManager.otherSources.slice() // clone\r\n  }\r\n\r\n\r\n  getEventSourceById(id): EventSource {\r\n    return this.eventManager.getSourceById(\r\n      EventSource.normalizeId(id)\r\n    )\r\n  }\r\n\r\n\r\n  addEventSource(sourceInput: EventSourceInput) {\r\n    let source = EventSourceParser.parse(sourceInput, this)\r\n\r\n    if (source) {\r\n      this.eventManager.addSource(source)\r\n    }\r\n  }\r\n\r\n\r\n  removeEventSources(sourceMultiQuery) {\r\n    let eventManager = this.eventManager\r\n    let sources\r\n    let i\r\n\r\n    if (sourceMultiQuery == null) {\r\n      this.eventManager.removeAllSources()\r\n    } else {\r\n      sources = eventManager.multiQuerySources(sourceMultiQuery)\r\n\r\n      eventManager.freeze()\r\n\r\n      for (i = 0; i < sources.length; i++) {\r\n        eventManager.removeSource(sources[i])\r\n      }\r\n\r\n      eventManager.thaw()\r\n    }\r\n  }\r\n\r\n\r\n  removeEventSource(sourceQuery) {\r\n    let eventManager = this.eventManager\r\n    let sources = eventManager.querySources(sourceQuery)\r\n    let i\r\n\r\n    eventManager.freeze()\r\n\r\n    for (i = 0; i < sources.length; i++) {\r\n      eventManager.removeSource(sources[i])\r\n    }\r\n\r\n    eventManager.thaw()\r\n  }\r\n\r\n\r\n  refetchEventSources(sourceMultiQuery) {\r\n    let eventManager = this.eventManager\r\n    let sources = eventManager.multiQuerySources(sourceMultiQuery)\r\n    let i\r\n\r\n    eventManager.freeze()\r\n\r\n    for (i = 0; i < sources.length; i++) {\r\n      eventManager.refetchSource(sources[i])\r\n    }\r\n\r\n    eventManager.thaw()\r\n  }\r\n\r\n\r\n}\r\n\r\nEmitterMixin.mixInto(Calendar)\r\nListenerMixin.mixInto(Calendar)\r\n\r\n\r\nfunction filterLegacyEventInstances(legacyEventInstances, legacyQuery) {\r\n  if (legacyQuery == null) {\r\n    return legacyEventInstances\r\n  } else if ($.isFunction(legacyQuery)) {\r\n    return legacyEventInstances.filter(legacyQuery)\r\n  } else { // an event ID\r\n    legacyQuery += '' // normalize to string\r\n\r\n    return legacyEventInstances.filter(function (legacyEventInstance) {\r\n      // soft comparison because id not be normalized to string\r\n      // tslint:disable-next-line\r\n      return legacyEventInstance.id == legacyQuery ||\r\n        legacyEventInstance._id === legacyQuery // can specify internal id, but must exactly match\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Calendar.ts","import * as moment from 'moment'\r\nimport { computeGreatestUnit, computeDurationGreatestUnit } from './util'\r\nimport UnzonedRange from './models/UnzonedRange'\r\n\r\n\r\nexport default class DateProfileGenerator {\r\n\r\n  _view: any // discourage\r\n\r\n\r\n  constructor(_view) {\r\n    this._view = _view\r\n  }\r\n\r\n\r\n  opt(name) {\r\n    return this._view.opt(name)\r\n  }\r\n\r\n\r\n  trimHiddenDays(unzonedRange) {\r\n    return this._view.trimHiddenDays(unzonedRange)\r\n  }\r\n\r\n\r\n  msToUtcMoment(ms, forceAllDay) {\r\n    return this._view.calendar.msToUtcMoment(ms, forceAllDay)\r\n  }\r\n\r\n\r\n  /* Date Range Computation\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\r\n  buildPrev(currentDateProfile) {\r\n    let prevDate = currentDateProfile.date.clone()\r\n      .startOf(currentDateProfile.currentRangeUnit)\r\n      .subtract(currentDateProfile.dateIncrement)\r\n\r\n    return this.build(prevDate, -1)\r\n  }\r\n\r\n\r\n  // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\r\n  buildNext(currentDateProfile) {\r\n    let nextDate = currentDateProfile.date.clone()\r\n      .startOf(currentDateProfile.currentRangeUnit)\r\n      .add(currentDateProfile.dateIncrement)\r\n\r\n    return this.build(nextDate, 1)\r\n  }\r\n\r\n\r\n  // Builds a structure holding dates/ranges for rendering around the given date.\r\n  // Optional direction param indicates whether the date is being incremented/decremented\r\n  // from its previous value. decremented = -1, incremented = 1 (default).\r\n  build(date, direction, forceToValid= false) {\r\n    let isDateAllDay = !date.hasTime()\r\n    let validUnzonedRange\r\n    let minTime = null\r\n    let maxTime = null\r\n    let currentInfo\r\n    let isRangeAllDay\r\n    let renderUnzonedRange\r\n    let activeUnzonedRange\r\n    let isValid\r\n\r\n    validUnzonedRange = this.buildValidRange()\r\n    validUnzonedRange = this.trimHiddenDays(validUnzonedRange)\r\n\r\n    if (forceToValid) {\r\n      date = this.msToUtcMoment(\r\n        validUnzonedRange.constrainDate(date), // returns MS\r\n        isDateAllDay\r\n      )\r\n    }\r\n    currentInfo = this.buildCurrentRangeInfo(date, direction)\r\n    isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit)\r\n    renderUnzonedRange = this.buildRenderRange(\r\n      this.trimHiddenDays(currentInfo.unzonedRange),\r\n      currentInfo.unit,\r\n      isRangeAllDay\r\n    )\r\n    renderUnzonedRange = this.trimHiddenDays(renderUnzonedRange)\r\n    activeUnzonedRange = renderUnzonedRange.clone()\r\n\r\n    if (!this.opt('showNonCurrentDates')) {\r\n      activeUnzonedRange = activeUnzonedRange.intersect(currentInfo.unzonedRange)\r\n    }\r\n\r\n    minTime = moment.duration(this.opt('minTime'))\r\n    maxTime = moment.duration(this.opt('maxTime'))\r\n    activeUnzonedRange = this.adjustActiveRange(activeUnzonedRange, minTime, maxTime)\r\n    activeUnzonedRange = activeUnzonedRange.intersect(validUnzonedRange) // might return null\r\n\r\n    if (activeUnzonedRange) {\r\n      date = this.msToUtcMoment(\r\n        activeUnzonedRange.constrainDate(date), // returns MS\r\n        isDateAllDay\r\n      )\r\n    }\r\n\r\n    // it's invalid if the originally requested date is not contained,\r\n    // or if the range is completely outside of the valid range.\r\n    isValid = currentInfo.unzonedRange.intersectsWith(validUnzonedRange)\r\n\r\n    return {\r\n      // constraint for where prev/next operations can go and where events can be dragged/resized to.\r\n      // an object with optional start and end properties.\r\n      validUnzonedRange: validUnzonedRange,\r\n\r\n      // range the view is formally responsible for.\r\n      // for example, a month view might have 1st-31st, excluding padded dates\r\n      currentUnzonedRange: currentInfo.unzonedRange,\r\n\r\n      // name of largest unit being displayed, like \"month\" or \"week\"\r\n      currentRangeUnit: currentInfo.unit,\r\n\r\n      isRangeAllDay: isRangeAllDay,\r\n\r\n      // dates that display events and accept drag-n-drop\r\n      // will be `null` if no dates accept events\r\n      activeUnzonedRange: activeUnzonedRange,\r\n\r\n      // date range with a rendered skeleton\r\n      // includes not-active days that need some sort of DOM\r\n      renderUnzonedRange: renderUnzonedRange,\r\n\r\n      // Duration object that denotes the first visible time of any given day\r\n      minTime: minTime,\r\n\r\n      // Duration object that denotes the exclusive visible end time of any given day\r\n      maxTime: maxTime,\r\n\r\n      isValid: isValid,\r\n\r\n      date: date,\r\n\r\n      // how far the current date will move for a prev/next operation\r\n      dateIncrement: this.buildDateIncrement(currentInfo.duration)\r\n        // pass a fallback (might be null) ^\r\n    }\r\n  }\r\n\r\n\r\n  // Builds an object with optional start/end properties.\r\n  // Indicates the minimum/maximum dates to display.\r\n  // not responsible for trimming hidden days.\r\n  buildValidRange() {\r\n    return this._view.getUnzonedRangeOption('validRange', this._view.calendar.getNow()) ||\r\n      new UnzonedRange() // completely open-ended\r\n  }\r\n\r\n\r\n  // Builds a structure with info about the \"current\" range, the range that is\r\n  // highlighted as being the current month for example.\r\n  // See build() for a description of `direction`.\r\n  // Guaranteed to have `range` and `unit` properties. `duration` is optional.\r\n  // TODO: accept a MS-time instead of a moment `date`?\r\n  buildCurrentRangeInfo(date, direction) {\r\n    let viewSpec = this._view.viewSpec\r\n    let duration = null\r\n    let unit = null\r\n    let unzonedRange = null\r\n    let dayCount\r\n\r\n    if (viewSpec.duration) {\r\n      duration = viewSpec.duration\r\n      unit = viewSpec.durationUnit\r\n      unzonedRange = this.buildRangeFromDuration(date, direction, duration, unit)\r\n    } else if ((dayCount = this.opt('dayCount'))) {\r\n      unit = 'day'\r\n      unzonedRange = this.buildRangeFromDayCount(date, direction, dayCount)\r\n    } else if ((unzonedRange = this.buildCustomVisibleRange(date))) {\r\n      unit = computeGreatestUnit(unzonedRange.getStart(), unzonedRange.getEnd())\r\n    } else {\r\n      duration = this.getFallbackDuration()\r\n      unit = computeGreatestUnit(duration)\r\n      unzonedRange = this.buildRangeFromDuration(date, direction, duration, unit)\r\n    }\r\n\r\n    return { duration: duration, unit: unit, unzonedRange: unzonedRange }\r\n  }\r\n\r\n\r\n  getFallbackDuration() {\r\n    return moment.duration({ days: 1 })\r\n  }\r\n\r\n\r\n  // Returns a new activeUnzonedRange to have time values (un-ambiguate)\r\n  // minTime or maxTime causes the range to expand.\r\n  adjustActiveRange(unzonedRange, minTime, maxTime) {\r\n    let start = unzonedRange.getStart()\r\n    let end = unzonedRange.getEnd()\r\n\r\n    if (this._view.usesMinMaxTime) {\r\n\r\n      if (minTime < 0) {\r\n        start.time(0).add(minTime)\r\n      }\r\n\r\n      if (maxTime > 24 * 60 * 60 * 1000) { // beyond 24 hours?\r\n        end.time(maxTime - (24 * 60 * 60 * 1000))\r\n      }\r\n    }\r\n\r\n    return new UnzonedRange(start, end)\r\n  }\r\n\r\n\r\n  // Builds the \"current\" range when it is specified as an explicit duration.\r\n  // `unit` is the already-computed computeGreatestUnit value of duration.\r\n  // TODO: accept a MS-time instead of a moment `date`?\r\n  buildRangeFromDuration(date, direction, duration, unit) {\r\n    let alignment = this.opt('dateAlignment')\r\n    let dateIncrementInput\r\n    let dateIncrementDuration\r\n    let start\r\n    let end\r\n    let res\r\n\r\n    // compute what the alignment should be\r\n    if (!alignment) {\r\n      dateIncrementInput = this.opt('dateIncrement')\r\n\r\n      if (dateIncrementInput) {\r\n        dateIncrementDuration = moment.duration(dateIncrementInput)\r\n\r\n        // use the smaller of the two units\r\n        if (dateIncrementDuration < duration) {\r\n          alignment = computeDurationGreatestUnit(dateIncrementDuration, dateIncrementInput)\r\n        } else {\r\n          alignment = unit\r\n        }\r\n      } else {\r\n        alignment = unit\r\n      }\r\n    }\r\n\r\n    // if the view displays a single day or smaller\r\n    if (duration.as('days') <= 1) {\r\n      if (this._view.isHiddenDay(start)) {\r\n        start = this._view.skipHiddenDays(start, direction)\r\n        start.startOf('day')\r\n      }\r\n    }\r\n\r\n    function computeRes() {\r\n      start = date.clone().startOf(alignment)\r\n      end = start.clone().add(duration)\r\n      res = new UnzonedRange(start, end)\r\n    }\r\n\r\n    computeRes()\r\n\r\n    // if range is completely enveloped by hidden days, go past the hidden days\r\n    if (!this.trimHiddenDays(res)) {\r\n      date = this._view.skipHiddenDays(date, direction)\r\n      computeRes()\r\n    }\r\n\r\n    return res\r\n  }\r\n\r\n\r\n  // Builds the \"current\" range when a dayCount is specified.\r\n  // TODO: accept a MS-time instead of a moment `date`?\r\n  buildRangeFromDayCount(date, direction, dayCount) {\r\n    let customAlignment = this.opt('dateAlignment')\r\n    let runningCount = 0\r\n    let start = date.clone()\r\n    let end\r\n\r\n    if (customAlignment) {\r\n      start.startOf(customAlignment)\r\n    }\r\n\r\n    start.startOf('day')\r\n    start = this._view.skipHiddenDays(start, direction)\r\n\r\n    end = start.clone()\r\n    do {\r\n      end.add(1, 'day')\r\n      if (!this._view.isHiddenDay(end)) {\r\n        runningCount++\r\n      }\r\n    } while (runningCount < dayCount)\r\n\r\n    return new UnzonedRange(start, end)\r\n  }\r\n\r\n\r\n  // Builds a normalized range object for the \"visible\" range,\r\n  // which is a way to define the currentUnzonedRange and activeUnzonedRange at the same time.\r\n  // TODO: accept a MS-time instead of a moment `date`?\r\n  buildCustomVisibleRange(date) {\r\n    let visibleUnzonedRange = this._view.getUnzonedRangeOption(\r\n      'visibleRange',\r\n      this._view.calendar.applyTimezone(date) // correct zone. also generates new obj that avoids mutations\r\n    )\r\n\r\n    if (visibleUnzonedRange && (visibleUnzonedRange.startMs == null || visibleUnzonedRange.endMs == null)) {\r\n      return null\r\n    }\r\n\r\n    return visibleUnzonedRange\r\n  }\r\n\r\n\r\n  // Computes the range that will represent the element/cells for *rendering*,\r\n  // but which may have voided days/times.\r\n  // not responsible for trimming hidden days.\r\n  buildRenderRange(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\r\n    return currentUnzonedRange.clone()\r\n  }\r\n\r\n\r\n  // Compute the duration value that should be added/substracted to the current date\r\n  // when a prev/next operation happens.\r\n  buildDateIncrement(fallback) {\r\n    let dateIncrementInput = this.opt('dateIncrement')\r\n    let customAlignment\r\n\r\n    if (dateIncrementInput) {\r\n      return moment.duration(dateIncrementInput)\r\n    } else if ((customAlignment = this.opt('dateAlignment'))) {\r\n      return moment.duration(1, customAlignment)\r\n    } else if (fallback) {\r\n      return fallback\r\n    } else {\r\n      return moment.duration({ days: 1 })\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/DateProfileGenerator.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport * as exportHooks from '../../exports'\r\nimport { disableCursor, enableCursor } from '../../util'\r\nimport momentExt from '../../moment-ext'\r\nimport { default as ListenerMixin, ListenerInterface } from '../../common/ListenerMixin'\r\nimport HitDragListener from '../../common/HitDragListener'\r\nimport SingleEventDef from '../../models/event/SingleEventDef'\r\nimport EventInstanceGroup from '../../models/event/EventInstanceGroup'\r\nimport EventSource from '../../models/event-source/EventSource'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class ExternalDropping extends Interaction {\r\n\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  dragListener: any\r\n  isDragging: boolean = false // jqui-dragging an external element? boolean\r\n\r\n\r\n  /*\r\n  component impements:\r\n    - eventRangesToEventFootprints\r\n    - isEventInstanceGroupAllowed\r\n    - isExternalInstanceGroupAllowed\r\n    - renderDrag\r\n    - unrenderDrag\r\n  */\r\n\r\n\r\n  end() {\r\n    if (this.dragListener) {\r\n      this.dragListener.endInteraction()\r\n    }\r\n  }\r\n\r\n\r\n  bindToDocument() {\r\n    this.listenTo($(document), {\r\n      dragstart: this.handleDragStart, // jqui\r\n      sortstart: this.handleDragStart // jqui\r\n    })\r\n  }\r\n\r\n\r\n  unbindFromDocument() {\r\n    this.stopListeningTo($(document))\r\n  }\r\n\r\n\r\n  // Called when a jQuery UI drag is initiated anywhere in the DOM\r\n  handleDragStart(ev, ui) {\r\n    let el\r\n    let accept\r\n\r\n    if (this.opt('droppable')) { // only listen if this setting is on\r\n      el = $((ui ? ui.item : null) || ev.target)\r\n\r\n      // Test that the dragged element passes the dropAccept selector or filter function.\r\n      // FYI, the default is \"*\" (matches all)\r\n      accept = this.opt('dropAccept')\r\n      if ($.isFunction(accept) ? accept.call(el[0], el) : el.is(accept)) {\r\n        if (!this.isDragging) { // prevent double-listening if fired twice\r\n          this.listenToExternalDrag(el, ev, ui)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Called when a jQuery UI drag starts and it needs to be monitored for dropping\r\n  listenToExternalDrag(el, ev, ui) {\r\n    let component = this.component\r\n    let view = this.view\r\n    let meta = getDraggedElMeta(el) // extra data about event drop, including possible event to create\r\n    let singleEventDef // a null value signals an unsuccessful drag\r\n\r\n    // listener that tracks mouse movement over date-associated pixel regions\r\n    let dragListener = this.dragListener = new HitDragListener(component, {\r\n      interactionStart: () => {\r\n        this.isDragging = true\r\n      },\r\n      hitOver: (hit) => {\r\n        let isAllowed = true\r\n        let hitFootprint = hit.component.getSafeHitFootprint(hit) // hit might not belong to this grid\r\n        let mutatedEventInstanceGroup\r\n\r\n        if (hitFootprint) {\r\n          singleEventDef = this.computeExternalDrop(hitFootprint, meta)\r\n\r\n          if (singleEventDef) {\r\n            mutatedEventInstanceGroup = new EventInstanceGroup(\r\n              singleEventDef.buildInstances()\r\n            )\r\n            isAllowed = meta.eventProps ? // isEvent?\r\n              component.isEventInstanceGroupAllowed(mutatedEventInstanceGroup) :\r\n              component.isExternalInstanceGroupAllowed(mutatedEventInstanceGroup)\r\n          } else {\r\n            isAllowed = false\r\n          }\r\n        } else {\r\n          isAllowed = false\r\n        }\r\n\r\n        if (!isAllowed) {\r\n          singleEventDef = null\r\n          disableCursor()\r\n        }\r\n\r\n        if (singleEventDef) {\r\n          component.renderDrag( // called without a seg parameter\r\n            component.eventRangesToEventFootprints(\r\n              mutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, view.calendar)\r\n            )\r\n          )\r\n        }\r\n      },\r\n      hitOut: () => {\r\n        singleEventDef = null // signal unsuccessful\r\n      },\r\n      hitDone: () => { // Called after a hitOut OR before a dragEnd\r\n        enableCursor()\r\n        component.unrenderDrag()\r\n      },\r\n      interactionEnd: (ev) => {\r\n\r\n        if (singleEventDef) { // element was dropped on a valid hit\r\n          view.reportExternalDrop(\r\n            singleEventDef,\r\n            Boolean(meta.eventProps), // isEvent\r\n            Boolean(meta.stick), // isSticky\r\n            el, ev, ui\r\n          )\r\n        }\r\n\r\n        this.isDragging = false\r\n        this.dragListener = null\r\n      }\r\n    })\r\n\r\n    dragListener.startDrag(ev) // start listening immediately\r\n  }\r\n\r\n\r\n  // Given a hit to be dropped upon, and misc data associated with the jqui drag (guaranteed to be a plain object),\r\n  // returns the zoned start/end dates for the event that would result from the hypothetical drop. end might be null.\r\n  // Returning a null value signals an invalid drop hit.\r\n  // DOES NOT consider overlap/constraint.\r\n  // Assumes both footprints are non-open-ended.\r\n  computeExternalDrop(componentFootprint, meta) {\r\n    let calendar = this.view.calendar\r\n    let start = momentExt.utc(componentFootprint.unzonedRange.startMs).stripZone()\r\n    let end\r\n    let eventDef\r\n\r\n    if (componentFootprint.isAllDay) {\r\n      // if dropped on an all-day span, and element's metadata specified a time, set it\r\n      if (meta.startTime) {\r\n        start.time(meta.startTime)\r\n      } else {\r\n        start.stripTime()\r\n      }\r\n    }\r\n\r\n    if (meta.duration) {\r\n      end = start.clone().add(meta.duration)\r\n    }\r\n\r\n    start = calendar.applyTimezone(start)\r\n\r\n    if (end) {\r\n      end = calendar.applyTimezone(end)\r\n    }\r\n\r\n    eventDef = SingleEventDef.parse(\r\n      $.extend({}, meta.eventProps, {\r\n        start: start,\r\n        end: end\r\n      }),\r\n      new EventSource(calendar)\r\n    )\r\n\r\n    return eventDef\r\n  }\r\n\r\n}\r\n\r\nListenerMixin.mixInto(ExternalDropping);\r\n\r\n\r\n/* External-Dragging-Element Data\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\n// Require all HTML5 data-* attributes used by FullCalendar to have this prefix.\r\n// A value of '' will query attributes like data-event. A value of 'fc' will query attributes like data-fc-event.\r\n(exportHooks as any).dataAttrPrefix = ''\r\n\r\n// Given a jQuery element that might represent a dragged FullCalendar event, returns an intermediate data structure\r\n// to be used for Event Object creation.\r\n// A defined `.eventProps`, even when empty, indicates that an event should be created.\r\nfunction getDraggedElMeta(el) {\r\n  let prefix = (exportHooks as any).dataAttrPrefix\r\n  let eventProps // properties for creating the event, not related to date/time\r\n  let startTime // a Duration\r\n  let duration\r\n  let stick\r\n\r\n  if (prefix) { prefix += '-' }\r\n  eventProps = el.data(prefix + 'event') || null\r\n\r\n  if (eventProps) {\r\n    if (typeof eventProps === 'object') {\r\n      eventProps = $.extend({}, eventProps) // make a copy\r\n    } else { // something like 1 or true. still signal event creation\r\n      eventProps = {}\r\n    }\r\n\r\n    // pluck special-cased date/time properties\r\n    startTime = eventProps.start\r\n    if (startTime == null) { startTime = eventProps.time } // accept 'time' as well\r\n    duration = eventProps.duration\r\n    stick = eventProps.stick\r\n    delete eventProps.start\r\n    delete eventProps.time\r\n    delete eventProps.duration\r\n    delete eventProps.stick\r\n  }\r\n\r\n  // fallback to standalone attribute values for each of the date/time properties\r\n  if (startTime == null) { startTime = el.data(prefix + 'start') }\r\n  if (startTime == null) { startTime = el.data(prefix + 'time') } // accept 'time' as well\r\n  if (duration == null) { duration = el.data(prefix + 'duration') }\r\n  if (stick == null) { stick = el.data(prefix + 'stick') }\r\n\r\n  // massage into correct data types\r\n  startTime = startTime != null ? moment.duration(startTime) : null\r\n  duration = duration != null ? moment.duration(duration) : null\r\n  stick = Boolean(stick)\r\n\r\n  return { eventProps: eventProps, startTime: startTime, duration: duration, stick: stick }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/ExternalDropping.ts","import * as $ from 'jquery'\r\nimport { disableCursor, enableCursor } from '../../util'\r\nimport EventDefMutation from '../../models/event/EventDefMutation'\r\nimport EventDefDateMutation from '../../models/event/EventDefDateMutation'\r\nimport HitDragListener from '../../common/HitDragListener'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class EventResizing extends Interaction {\r\n\r\n  eventPointing: any\r\n  dragListener: any\r\n  isResizing: boolean = false\r\n\r\n\r\n  /*\r\n  component impements:\r\n    - bindSegHandlerToEl\r\n    - publiclyTrigger\r\n    - diffDates\r\n    - eventRangesToEventFootprints\r\n    - isEventInstanceGroupAllowed\r\n    - getSafeHitFootprint\r\n  */\r\n\r\n\r\n  constructor(component, eventPointing) {\r\n    super(component)\r\n    this.eventPointing = eventPointing\r\n  }\r\n\r\n\r\n  end() {\r\n    if (this.dragListener) {\r\n      this.dragListener.endInteraction()\r\n    }\r\n  }\r\n\r\n\r\n  bindToEl(el) {\r\n    let component = this.component\r\n\r\n    component.bindSegHandlerToEl(el, 'mousedown', this.handleMouseDown.bind(this))\r\n    component.bindSegHandlerToEl(el, 'touchstart', this.handleTouchStart.bind(this))\r\n  }\r\n\r\n\r\n  handleMouseDown(seg, ev) {\r\n    if (this.component.canStartResize(seg, ev)) {\r\n      this.buildDragListener(seg, $(ev.target).is('.fc-start-resizer'))\r\n        .startInteraction(ev, { distance: 5 })\r\n    }\r\n  }\r\n\r\n\r\n  handleTouchStart(seg, ev) {\r\n    if (this.component.canStartResize(seg, ev)) {\r\n      this.buildDragListener(seg, $(ev.target).is('.fc-start-resizer'))\r\n        .startInteraction(ev)\r\n    }\r\n  }\r\n\r\n\r\n  // Creates a listener that tracks the user as they resize an event segment.\r\n  // Generic enough to work with any type of Grid.\r\n  buildDragListener(seg, isStart) {\r\n    let component = this.component\r\n    let view = this.view\r\n    let calendar = view.calendar\r\n    let eventManager = calendar.eventManager\r\n    let el = seg.el\r\n    let eventDef = seg.footprint.eventDef\r\n    let eventInstance = seg.footprint.eventInstance\r\n    let isDragging\r\n    let resizeMutation // zoned event date properties. falsy if invalid resize\r\n\r\n    // Tracks mouse movement over the *grid's* coordinate map\r\n    let dragListener = this.dragListener = new HitDragListener(component, {\r\n      scroll: this.opt('dragScroll'),\r\n      subjectEl: el,\r\n      interactionStart: () => {\r\n        isDragging = false\r\n      },\r\n      dragStart: (ev) => {\r\n        isDragging = true\r\n\r\n        // ensure a mouseout on the manipulated event has been reported\r\n        this.eventPointing.handleMouseout(seg, ev)\r\n\r\n        this.segResizeStart(seg, ev)\r\n      },\r\n      hitOver: (hit, isOrig, origHit) => {\r\n        let isAllowed = true\r\n        let origHitFootprint = component.getSafeHitFootprint(origHit)\r\n        let hitFootprint = component.getSafeHitFootprint(hit)\r\n        let mutatedEventInstanceGroup\r\n\r\n        if (origHitFootprint && hitFootprint) {\r\n          resizeMutation = isStart ?\r\n            this.computeEventStartResizeMutation(origHitFootprint, hitFootprint, seg.footprint) :\r\n            this.computeEventEndResizeMutation(origHitFootprint, hitFootprint, seg.footprint)\r\n\r\n          if (resizeMutation) {\r\n            mutatedEventInstanceGroup = eventManager.buildMutatedEventInstanceGroup(\r\n              eventDef.id,\r\n              resizeMutation\r\n            )\r\n            isAllowed = component.isEventInstanceGroupAllowed(mutatedEventInstanceGroup)\r\n          } else {\r\n            isAllowed = false\r\n          }\r\n        } else {\r\n          isAllowed = false\r\n        }\r\n\r\n        if (!isAllowed) {\r\n          resizeMutation = null\r\n          disableCursor()\r\n        } else if (resizeMutation.isEmpty()) {\r\n          // no change. (FYI, event dates might have zones)\r\n          resizeMutation = null\r\n        }\r\n\r\n        if (resizeMutation) {\r\n          view.hideEventsWithId(seg.footprint.eventDef.id)\r\n          view.renderEventResize(\r\n            component.eventRangesToEventFootprints(\r\n              mutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, calendar)\r\n            ),\r\n            seg\r\n          )\r\n        }\r\n      },\r\n      hitOut: () => { // called before mouse moves to a different hit OR moved out of all hits\r\n        resizeMutation = null\r\n      },\r\n      hitDone: () => { // resets the rendering to show the original event\r\n        view.unrenderEventResize(seg)\r\n        view.showEventsWithId(seg.footprint.eventDef.id)\r\n        enableCursor()\r\n      },\r\n      interactionEnd: (ev) => {\r\n        if (isDragging) {\r\n          this.segResizeStop(seg, ev)\r\n        }\r\n\r\n        if (resizeMutation) { // valid date to resize to?\r\n          // no need to re-show original, will rerender all anyways. esp important if eventRenderWait\r\n          view.reportEventResize(eventInstance, resizeMutation, el, ev)\r\n        }\r\n\r\n        this.dragListener = null\r\n      }\r\n    })\r\n\r\n    return dragListener\r\n  }\r\n\r\n\r\n  // Called before event segment resizing starts\r\n  segResizeStart(seg, ev) {\r\n    this.isResizing = true\r\n    this.component.publiclyTrigger('eventResizeStart', {\r\n      context: seg.el[0],\r\n      args: [\r\n        seg.footprint.getEventLegacy(),\r\n        ev,\r\n        {}, // jqui dummy\r\n        this.view\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  // Called after event segment resizing stops\r\n  segResizeStop(seg, ev) {\r\n    this.isResizing = false\r\n    this.component.publiclyTrigger('eventResizeStop', {\r\n      context: seg.el[0],\r\n      args: [\r\n        seg.footprint.getEventLegacy(),\r\n        ev,\r\n        {}, // jqui dummy\r\n        this.view\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  // Returns new date-information for an event segment being resized from its start\r\n  computeEventStartResizeMutation(startFootprint, endFootprint, origEventFootprint) {\r\n    let origRange = origEventFootprint.componentFootprint.unzonedRange\r\n    let startDelta = this.component.diffDates(\r\n      endFootprint.unzonedRange.getStart(),\r\n      startFootprint.unzonedRange.getStart()\r\n    )\r\n    let dateMutation\r\n    let eventDefMutation\r\n\r\n    if (origRange.getStart().add(startDelta) < origRange.getEnd()) {\r\n\r\n      dateMutation = new EventDefDateMutation()\r\n      dateMutation.setStartDelta(startDelta)\r\n\r\n      eventDefMutation = new EventDefMutation()\r\n      eventDefMutation.setDateMutation(dateMutation)\r\n\r\n      return eventDefMutation\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n\r\n  // Returns new date-information for an event segment being resized from its end\r\n  computeEventEndResizeMutation(startFootprint, endFootprint, origEventFootprint) {\r\n    let origRange = origEventFootprint.componentFootprint.unzonedRange\r\n    let endDelta = this.component.diffDates(\r\n      endFootprint.unzonedRange.getEnd(),\r\n      startFootprint.unzonedRange.getEnd()\r\n    )\r\n    let dateMutation\r\n    let eventDefMutation\r\n\r\n    if (origRange.getEnd().add(endDelta) > origRange.getStart()) {\r\n\r\n      dateMutation = new EventDefDateMutation()\r\n      dateMutation.setEndDelta(endDelta)\r\n\r\n      eventDefMutation = new EventDefMutation()\r\n      eventDefMutation.setDateMutation(dateMutation)\r\n\r\n      return eventDefMutation\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/EventResizing.ts","import { enableCursor, disableCursor } from '../../util'\r\nimport EventDefMutation from '../../models/event/EventDefMutation'\r\nimport EventDefDateMutation from '../../models/event/EventDefDateMutation'\r\nimport DragListener from '../../common/DragListener'\r\nimport HitDragListener from '../../common/HitDragListener'\r\nimport MouseFollower from '../../common/MouseFollower'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class EventDragging extends Interaction {\r\n\r\n  eventPointing: any\r\n  dragListener: any\r\n  isDragging: boolean = false\r\n\r\n\r\n  /*\r\n  component implements:\r\n    - bindSegHandlerToEl\r\n    - publiclyTrigger\r\n    - diffDates\r\n    - eventRangesToEventFootprints\r\n    - isEventInstanceGroupAllowed\r\n  */\r\n  constructor(component, eventPointing) {\r\n    super(component)\r\n    this.eventPointing = eventPointing\r\n  }\r\n\r\n\r\n  end() {\r\n    if (this.dragListener) {\r\n      this.dragListener.endInteraction()\r\n    }\r\n  }\r\n\r\n\r\n  getSelectionDelay() {\r\n    let delay = this.opt('eventLongPressDelay')\r\n\r\n    if (delay == null) {\r\n      delay = this.opt('longPressDelay') // fallback\r\n    }\r\n\r\n    return delay\r\n  }\r\n\r\n\r\n  bindToEl(el) {\r\n    let component = this.component\r\n\r\n    component.bindSegHandlerToEl(el, 'mousedown', this.handleMousedown.bind(this))\r\n    component.bindSegHandlerToEl(el, 'touchstart', this.handleTouchStart.bind(this))\r\n  }\r\n\r\n\r\n  handleMousedown(seg, ev) {\r\n    if (\r\n      !this.component.shouldIgnoreMouse() &&\r\n      this.component.canStartDrag(seg, ev)\r\n    ) {\r\n      this.buildDragListener(seg).startInteraction(ev, { distance: 5 })\r\n    }\r\n  }\r\n\r\n\r\n  handleTouchStart(seg, ev) {\r\n    let component = this.component\r\n    let settings = {\r\n      delay: this.view.isEventDefSelected(seg.footprint.eventDef) ? // already selected?\r\n        0 : this.getSelectionDelay()\r\n    }\r\n\r\n    if (component.canStartDrag(seg, ev)) {\r\n      this.buildDragListener(seg).startInteraction(ev, settings)\r\n    } else if (component.canStartSelection(seg, ev)) {\r\n      this.buildSelectListener(seg).startInteraction(ev, settings)\r\n    }\r\n  }\r\n\r\n\r\n  // seg isn't draggable, but let's use a generic DragListener\r\n  // simply for the delay, so it can be selected.\r\n  // Has side effect of setting/unsetting `dragListener`\r\n  buildSelectListener(seg) {\r\n    let view = this.view\r\n    let eventDef = seg.footprint.eventDef\r\n    let eventInstance = seg.footprint.eventInstance // null for inverse-background events\r\n\r\n    if (this.dragListener) {\r\n      return this.dragListener\r\n    }\r\n\r\n    let dragListener = this.dragListener = new DragListener({\r\n      dragStart: (ev) => {\r\n        if (\r\n          dragListener.isTouch &&\r\n          !view.isEventDefSelected(eventDef) &&\r\n          eventInstance\r\n        ) {\r\n          // if not previously selected, will fire after a delay. then, select the event\r\n          view.selectEventInstance(eventInstance)\r\n        }\r\n      },\r\n      interactionEnd: (ev) => {\r\n        this.dragListener = null\r\n      }\r\n    })\r\n\r\n    return dragListener\r\n  }\r\n\r\n\r\n  // Builds a listener that will track user-dragging on an event segment.\r\n  // Generic enough to work with any type of Grid.\r\n  // Has side effect of setting/unsetting `dragListener`\r\n  buildDragListener(seg) {\r\n    let component = this.component\r\n    let view = this.view\r\n    let calendar = view.calendar\r\n    let eventManager = calendar.eventManager\r\n    let el = seg.el\r\n    let eventDef = seg.footprint.eventDef\r\n    let eventInstance = seg.footprint.eventInstance // null for inverse-background events\r\n    let isDragging\r\n    let mouseFollower // A clone of the original element that will move with the mouse\r\n    let eventDefMutation\r\n\r\n    if (this.dragListener) {\r\n      return this.dragListener\r\n    }\r\n\r\n    // Tracks mouse movement over the *view's* coordinate map. Allows dragging and dropping between subcomponents\r\n    // of the view.\r\n    let dragListener = this.dragListener = new HitDragListener(view, {\r\n      scroll: this.opt('dragScroll'),\r\n      subjectEl: el,\r\n      subjectCenter: true,\r\n      interactionStart: (ev) => {\r\n        seg.component = component // for renderDrag\r\n        isDragging = false\r\n        mouseFollower = new MouseFollower(seg.el, {\r\n          additionalClass: 'fc-dragging',\r\n          parentEl: view.el,\r\n          opacity: dragListener.isTouch ? null : this.opt('dragOpacity'),\r\n          revertDuration: this.opt('dragRevertDuration'),\r\n          zIndex: 2 // one above the .fc-view\r\n        })\r\n        mouseFollower.hide() // don't show until we know this is a real drag\r\n        mouseFollower.start(ev)\r\n      },\r\n      dragStart: (ev) => {\r\n        if (\r\n          dragListener.isTouch &&\r\n          !view.isEventDefSelected(eventDef) &&\r\n          eventInstance\r\n        ) {\r\n          // if not previously selected, will fire after a delay. then, select the event\r\n          view.selectEventInstance(eventInstance)\r\n        }\r\n        isDragging = true\r\n\r\n        // ensure a mouseout on the manipulated event has been reported\r\n        this.eventPointing.handleMouseout(seg, ev)\r\n\r\n        this.segDragStart(seg, ev)\r\n        view.hideEventsWithId(seg.footprint.eventDef.id)\r\n      },\r\n      hitOver: (hit, isOrig, origHit) => {\r\n        let isAllowed = true\r\n        let origFootprint\r\n        let footprint\r\n        let mutatedEventInstanceGroup\r\n\r\n        // starting hit could be forced (DayGrid.limit)\r\n        if (seg.hit) {\r\n          origHit = seg.hit\r\n        }\r\n\r\n        // hit might not belong to this grid, so query origin grid\r\n        origFootprint = origHit.component.getSafeHitFootprint(origHit)\r\n        footprint = hit.component.getSafeHitFootprint(hit)\r\n\r\n        if (origFootprint && footprint) {\r\n          eventDefMutation = this.computeEventDropMutation(origFootprint, footprint, eventDef)\r\n\r\n          if (eventDefMutation) {\r\n            mutatedEventInstanceGroup = eventManager.buildMutatedEventInstanceGroup(\r\n              eventDef.id,\r\n              eventDefMutation\r\n            )\r\n            isAllowed = component.isEventInstanceGroupAllowed(mutatedEventInstanceGroup)\r\n          } else {\r\n            isAllowed = false\r\n          }\r\n        } else {\r\n          isAllowed = false\r\n        }\r\n\r\n        if (!isAllowed) {\r\n          eventDefMutation = null\r\n          disableCursor()\r\n        }\r\n\r\n        // if a valid drop location, have the subclass render a visual indication\r\n        if (\r\n          eventDefMutation &&\r\n          view.renderDrag( // truthy if rendered something\r\n            component.eventRangesToEventFootprints(\r\n              mutatedEventInstanceGroup.sliceRenderRanges(component.dateProfile.renderUnzonedRange, calendar)\r\n            ),\r\n            seg,\r\n            dragListener.isTouch\r\n          )\r\n        ) {\r\n          mouseFollower.hide() // if the subclass is already using a mock event \"helper\", hide our own\r\n        } else {\r\n          mouseFollower.show() // otherwise, have the helper follow the mouse (no snapping)\r\n        }\r\n\r\n        if (isOrig) {\r\n          // needs to have moved hits to be a valid drop\r\n          eventDefMutation = null\r\n        }\r\n      },\r\n      hitOut: () => { // called before mouse moves to a different hit OR moved out of all hits\r\n        view.unrenderDrag(seg) // unrender whatever was done in renderDrag\r\n        mouseFollower.show() // show in case we are moving out of all hits\r\n        eventDefMutation = null\r\n      },\r\n      hitDone: () => { // Called after a hitOut OR before a dragEnd\r\n        enableCursor()\r\n      },\r\n      interactionEnd: (ev) => {\r\n        delete seg.component // prevent side effects\r\n\r\n        // do revert animation if hasn't changed. calls a callback when finished (whether animation or not)\r\n        mouseFollower.stop(!eventDefMutation, () => {\r\n          if (isDragging) {\r\n            view.unrenderDrag(seg)\r\n            this.segDragStop(seg, ev)\r\n          }\r\n\r\n          view.showEventsWithId(seg.footprint.eventDef.id)\r\n\r\n          if (eventDefMutation) {\r\n            // no need to re-show original, will rerender all anyways. esp important if eventRenderWait\r\n            view.reportEventDrop(eventInstance, eventDefMutation, el, ev)\r\n          }\r\n        })\r\n\r\n        this.dragListener = null\r\n      }\r\n    })\r\n\r\n    return dragListener\r\n  }\r\n\r\n\r\n  // Called before event segment dragging starts\r\n  segDragStart(seg, ev) {\r\n    this.isDragging = true\r\n    this.component.publiclyTrigger('eventDragStart', {\r\n      context: seg.el[0],\r\n      args: [\r\n        seg.footprint.getEventLegacy(),\r\n        ev,\r\n        {}, // jqui dummy\r\n        this.view\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  // Called after event segment dragging stops\r\n  segDragStop(seg, ev) {\r\n    this.isDragging = false\r\n    this.component.publiclyTrigger('eventDragStop', {\r\n      context: seg.el[0],\r\n      args: [\r\n        seg.footprint.getEventLegacy(),\r\n        ev,\r\n        {}, // jqui dummy\r\n        this.view\r\n      ]\r\n    })\r\n  }\r\n\r\n\r\n  // DOES NOT consider overlap/constraint\r\n  computeEventDropMutation(startFootprint, endFootprint, eventDef) {\r\n    let eventDefMutation = new EventDefMutation()\r\n\r\n    eventDefMutation.setDateMutation(\r\n      this.computeEventDateMutation(startFootprint, endFootprint)\r\n    )\r\n\r\n    return eventDefMutation\r\n  }\r\n\r\n\r\n  computeEventDateMutation(startFootprint, endFootprint) {\r\n    let date0 = startFootprint.unzonedRange.getStart()\r\n    let date1 = endFootprint.unzonedRange.getStart()\r\n    let clearEnd = false\r\n    let forceTimed = false\r\n    let forceAllDay = false\r\n    let dateDelta\r\n    let dateMutation\r\n\r\n    if (startFootprint.isAllDay !== endFootprint.isAllDay) {\r\n      clearEnd = true\r\n\r\n      if (endFootprint.isAllDay) {\r\n        forceAllDay = true\r\n        date0.stripTime()\r\n      } else {\r\n        forceTimed = true\r\n      }\r\n    }\r\n\r\n    dateDelta = this.component.diffDates(date1, date0)\r\n\r\n    dateMutation = new EventDefDateMutation()\r\n    dateMutation.clearEnd = clearEnd\r\n    dateMutation.forceTimed = forceTimed\r\n    dateMutation.forceAllDay = forceAllDay\r\n    dateMutation.setDateDelta(dateDelta)\r\n\r\n    return dateMutation\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/EventDragging.ts","import { enableCursor, disableCursor, preventSelection, compareNumbers } from '../../util'\r\nimport HitDragListener from '../../common/HitDragListener'\r\nimport ComponentFootprint from '../../models/ComponentFootprint'\r\nimport UnzonedRange from '../../models/UnzonedRange'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class DateSelecting extends Interaction {\r\n\r\n  dragListener: any\r\n\r\n\r\n  /*\r\n  component must implement:\r\n    - bindDateHandlerToEl\r\n    - getSafeHitFootprint\r\n    - renderHighlight\r\n    - unrenderHighlight\r\n  */\r\n  constructor(component) {\r\n    super(component)\r\n    this.dragListener = this.buildDragListener()\r\n  }\r\n\r\n\r\n  end() {\r\n    this.dragListener.endInteraction()\r\n  }\r\n\r\n\r\n  getDelay() {\r\n    let delay = this.opt('selectLongPressDelay')\r\n\r\n    if (delay == null) {\r\n      delay = this.opt('longPressDelay') // fallback\r\n    }\r\n\r\n    return delay\r\n  }\r\n\r\n\r\n  bindToEl(el) {\r\n    let component = this.component\r\n    let dragListener = this.dragListener\r\n\r\n    component.bindDateHandlerToEl(el, 'mousedown', (ev) => {\r\n      if (this.opt('selectable') && !component.shouldIgnoreMouse()) {\r\n        dragListener.startInteraction(ev, {\r\n          distance: this.opt('selectMinDistance')\r\n        })\r\n      }\r\n    })\r\n\r\n    component.bindDateHandlerToEl(el, 'touchstart', (ev) => {\r\n      if (this.opt('selectable') && !component.shouldIgnoreTouch()) {\r\n        dragListener.startInteraction(ev, {\r\n          delay: this.getDelay()\r\n        })\r\n      }\r\n    })\r\n\r\n    preventSelection(el)\r\n  }\r\n\r\n\r\n  // Creates a listener that tracks the user's drag across day elements, for day selecting.\r\n  buildDragListener() {\r\n    let component = this.component\r\n    let selectionFootprint // null if invalid selection\r\n\r\n    let dragListener = new HitDragListener(component, {\r\n      scroll: this.opt('dragScroll'),\r\n      interactionStart: () => {\r\n        selectionFootprint = null\r\n      },\r\n      dragStart: (ev) => {\r\n        this.view.unselect(ev) // since we could be rendering a new selection, we want to clear any old one\r\n      },\r\n      hitOver: (hit, isOrig, origHit) => {\r\n        let origHitFootprint\r\n        let hitFootprint\r\n\r\n        if (origHit) { // click needs to have started on a hit\r\n\r\n          origHitFootprint = component.getSafeHitFootprint(origHit)\r\n          hitFootprint = component.getSafeHitFootprint(hit)\r\n\r\n          if (origHitFootprint && hitFootprint) {\r\n            selectionFootprint = this.computeSelection(origHitFootprint, hitFootprint)\r\n          } else {\r\n            selectionFootprint = null\r\n          }\r\n\r\n          if (selectionFootprint) {\r\n            component.renderSelectionFootprint(selectionFootprint)\r\n          } else if (selectionFootprint === false) {\r\n            disableCursor()\r\n          }\r\n        }\r\n      },\r\n      hitOut: () => { // called before mouse moves to a different hit OR moved out of all hits\r\n        selectionFootprint = null\r\n        component.unrenderSelection()\r\n      },\r\n      hitDone: () => { // called after a hitOut OR before a dragEnd\r\n        enableCursor()\r\n      },\r\n      interactionEnd: (ev, isCancelled) => {\r\n        if (!isCancelled && selectionFootprint) {\r\n          // the selection will already have been rendered. just report it\r\n          this.view.reportSelection(selectionFootprint, ev)\r\n        }\r\n      }\r\n    })\r\n\r\n    return dragListener\r\n  }\r\n\r\n\r\n  // Given the first and last date-spans of a selection, returns another date-span object.\r\n  // Subclasses can override and provide additional data in the span object. Will be passed to renderSelectionFootprint().\r\n  // Will return false if the selection is invalid and this should be indicated to the user.\r\n  // Will return null/undefined if a selection invalid but no error should be reported.\r\n  computeSelection(footprint0, footprint1) {\r\n    let wholeFootprint = this.computeSelectionFootprint(footprint0, footprint1)\r\n\r\n    if (wholeFootprint && !this.isSelectionFootprintAllowed(wholeFootprint)) {\r\n      return false\r\n    }\r\n\r\n    return wholeFootprint\r\n  }\r\n\r\n\r\n  // Given two spans, must return the combination of the two.\r\n  // TODO: do this separation of concerns (combining VS validation) for event dnd/resize too.\r\n  // Assumes both footprints are non-open-ended.\r\n  computeSelectionFootprint(footprint0, footprint1) {\r\n    let ms = [\r\n      footprint0.unzonedRange.startMs,\r\n      footprint0.unzonedRange.endMs,\r\n      footprint1.unzonedRange.startMs,\r\n      footprint1.unzonedRange.endMs\r\n    ]\r\n\r\n    ms.sort(compareNumbers)\r\n\r\n    return new ComponentFootprint(\r\n      new UnzonedRange(ms[0], ms[3]),\r\n      footprint0.isAllDay\r\n    )\r\n  }\r\n\r\n\r\n  isSelectionFootprintAllowed(componentFootprint) {\r\n    return this.component.dateProfile.validUnzonedRange.containsRange(componentFootprint.unzonedRange) &&\r\n      this.view.calendar.constraints.isSelectionFootprintAllowed(componentFootprint)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/DateSelecting.ts","import * as moment from 'moment'\r\nimport * as $ from 'jquery'\r\nimport {\r\n  matchCellWidths,\r\n  uncompensateScroll,\r\n  compensateScroll,\r\n  subtractInnerElHeight,\r\n  htmlEscape,\r\n  copyOwnProps\r\n} from '../util'\r\nimport Scroller from '../common/Scroller'\r\nimport View from '../View'\r\nimport TimeGrid from './TimeGrid'\r\nimport DayGrid from '../basic/DayGrid'\r\n\r\nconst AGENDA_ALL_DAY_EVENT_LIMIT = 5\r\n\r\nlet agendaTimeGridMethods\r\nlet agendaDayGridMethods\r\n\r\n\r\n/* An abstract class for all agenda-related views. Displays one more columns with time slots running vertically.\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\r\n// Responsible for managing width/height.\r\n\r\nexport default class AgendaView extends View {\r\n\r\n  // initialized after class\r\n  timeGridClass: any // class used to instantiate the timeGrid. subclasses can override\r\n  dayGridClass: any // class used to instantiate the dayGrid. subclasses can override\r\n\r\n  timeGrid: any // the main time-grid subcomponent of this view\r\n  dayGrid: any // the \"all-day\" subcomponent. if all-day is turned off, this will be null\r\n\r\n  scroller: any\r\n  axisWidth: any // the width of the time axis running down the side\r\n  usesMinMaxTime: boolean = true // indicates that minTime/maxTime affects rendering\r\n\r\n\r\n  constructor(calendar, viewSpec) {\r\n    super(calendar, viewSpec)\r\n\r\n    this.timeGrid = this.instantiateTimeGrid()\r\n    this.addChild(this.timeGrid)\r\n\r\n    // if (this.opt('allDaySlot')) { // should we display the \"all-day\" area?\r\n    //   this.dayGrid = this.instantiateDayGrid() // the all-day subcomponent of this view\r\n    //   this.addChild(this.dayGrid)\r\n    // }\r\n\r\n    this.scroller = new Scroller({\r\n      overflowX: 'hidden',\r\n      overflowY: 'auto'\r\n    })\r\n  }\r\n\r\n\r\n  // Instantiates the TimeGrid object this view needs. Draws from this.timeGridClass\r\n  instantiateTimeGrid() {\r\n    let timeGrid = new this.timeGridClass(this)\r\n    copyOwnProps(agendaTimeGridMethods, timeGrid)\r\n    return timeGrid\r\n  }\r\n\r\n\r\n  // Instantiates the DayGrid object this view might need. Draws from this.dayGridClass\r\n  instantiateDayGrid() {\r\n    let dayGrid = new this.dayGridClass(this)\r\n    copyOwnProps(agendaDayGridMethods, dayGrid)\r\n    return dayGrid\r\n  }\r\n\r\n\r\n  /* Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderSkeleton() {\r\n    let timeGridWrapEl\r\n    let timeGridEl\r\n\r\n    this.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml())\r\n\r\n    this.scroller.render()\r\n\r\n    timeGridWrapEl = this.scroller.el.addClass('fc-time-grid-container')\r\n    timeGridEl = $('<div class=\"fc-time-grid\" />').appendTo(timeGridWrapEl)\r\n\r\n    this.el.find('.fc-body > tr > td').append(timeGridWrapEl)\r\n\r\n    this.timeGrid.headContainerEl = this.el.find('.fc-head-container')\r\n    this.timeGrid.setElement(timeGridEl)\r\n\r\n    if (this.dayGrid) {\r\n      this.dayGrid.setElement(this.el.find('.fc-day-grid'))\r\n\r\n      // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\r\n      this.dayGrid.bottomCoordPadding = this.dayGrid.el.next('hr').outerHeight()\r\n    }\r\n  }\r\n\r\n\r\n  unrenderSkeleton() {\r\n    this.timeGrid.removeElement()\r\n\r\n    if (this.dayGrid) {\r\n      this.dayGrid.removeElement()\r\n    }\r\n\r\n    this.scroller.destroy()\r\n  }\r\n\r\n\r\n  // Builds the HTML skeleton for the view.\r\n  // The day-grid and time-grid components will render inside containers defined by this HTML.\r\n  renderSkeletonHtml() {\r\n    let theme = this.calendar.theme\r\n\r\n    return '' +\r\n      '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n        (this.opt('columnHeader') ?\r\n          '<thead class=\"fc-head\">' +\r\n            '<tr>' +\r\n              '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\r\n            '</tr>' +\r\n          '</thead>' :\r\n          ''\r\n          ) +\r\n        '<tbody class=\"fc-body\">' +\r\n          '<tr>' +\r\n            '<td class=\"' + theme.getClass('widgetContent') + '\">' +\r\n              (this.dayGrid ?\r\n                '<div class=\"fc-day-grid\"/>' +\r\n                '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\"/>' :\r\n                ''\r\n                ) +\r\n            '</td>' +\r\n          '</tr>' +\r\n        '</tbody>' +\r\n      '</table>'\r\n  }\r\n\r\n\r\n  // Generates an HTML attribute string for setting the width of the axis, if it is known\r\n  axisStyleAttr() {\r\n    if (this.axisWidth != null) {\r\n      return 'style=\"width:' + this.axisWidth + 'px\"'\r\n    }\r\n    return ''\r\n  }\r\n\r\n\r\n  /* Now Indicator\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  getNowIndicatorUnit() {\r\n    return this.timeGrid.getNowIndicatorUnit()\r\n  }\r\n\r\n\r\n  /* Dimensions\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Adjusts the vertical dimensions of the view to the specified values\r\n  updateSize(totalHeight, isAuto, isResize) {\r\n    let eventLimit\r\n    let scrollerHeight\r\n    let scrollbarWidths\r\n\r\n    super.updateSize(totalHeight, isAuto, isResize)\r\n\r\n    // make all axis cells line up, and record the width so newly created axis cells will have it\r\n    this.axisWidth = matchCellWidths(this.el.find('.fc-axis'))\r\n\r\n    // hack to give the view some height prior to timeGrid's columns being rendered\r\n    // TODO: separate setting height from scroller VS timeGrid.\r\n    if (!this.timeGrid.colEls) {\r\n      if (!isAuto) {\r\n        scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n      return\r\n    }\r\n\r\n    // set of fake row elements that must compensate when scroller has scrollbars\r\n    let noScrollRowEls = this.el.find('.fc-row:not(.fc-scroller *)')\r\n\r\n    // reset all dimensions back to the original state\r\n    this.timeGrid.bottomRuleEl.hide() // .show() will be called later if this <hr> is necessary\r\n    this.scroller.clear() // sets height to 'auto' and clears overflow\r\n    uncompensateScroll(noScrollRowEls)\r\n\r\n    // limit number of events in the all-day area\r\n    if (this.dayGrid) {\r\n      this.dayGrid.removeSegPopover() // kill the \"more\" popover if displayed\r\n\r\n      eventLimit = this.opt('eventLimit')\r\n      if (eventLimit && typeof eventLimit !== 'number') {\r\n        eventLimit = AGENDA_ALL_DAY_EVENT_LIMIT // make sure \"auto\" goes to a real number\r\n      }\r\n      if (eventLimit) {\r\n        this.dayGrid.limitRows(eventLimit)\r\n      }\r\n    }\r\n\r\n    if (!isAuto) { // should we force dimensions of the scroll container?\r\n\r\n      scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n      this.scroller.setHeight(scrollerHeight)\r\n      scrollbarWidths = this.scroller.getScrollbarWidths()\r\n\r\n      if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\r\n\r\n        // make the all-day and header rows lines up\r\n        compensateScroll(noScrollRowEls, scrollbarWidths)\r\n\r\n        // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\r\n        // and reapply the desired height to the scroller.\r\n        scrollerHeight = this.computeScrollerHeight(totalHeight)\r\n        this.scroller.setHeight(scrollerHeight)\r\n      }\r\n\r\n      // guarantees the same scrollbar widths\r\n      this.scroller.lockOverflow(scrollbarWidths)\r\n\r\n      // if there's any space below the slats, show the horizontal rule.\r\n      // this won't cause any new overflow, because lockOverflow already called.\r\n      if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\r\n        this.timeGrid.bottomRuleEl.show()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // given a desired total height of the view, returns what the height of the scroller should be\r\n  computeScrollerHeight(totalHeight) {\r\n    return totalHeight -\r\n      subtractInnerElHeight(this.el, this.scroller.el) // everything that's NOT the scroller\r\n  }\r\n\r\n\r\n  /* Scroll\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Computes the initial pre-configured scroll state prior to allowing the user to change it\r\n  computeInitialDateScroll() {\r\n    let scrollTime = moment.duration(this.opt('scrollTime'))\r\n    let top = this.timeGrid.computeTimeTop(scrollTime)\r\n\r\n    // zoom can give weird floating-point values. rather scroll a little bit further\r\n    top = Math.ceil(top)\r\n\r\n    if (top) {\r\n      top++ // to overcome top border that slots beyond the first have. looks better\r\n    }\r\n\r\n    return { top: top }\r\n  }\r\n\r\n\r\n  queryDateScroll() {\r\n    return { top: this.scroller.getScrollTop() }\r\n  }\r\n\r\n\r\n  applyDateScroll(scroll) {\r\n    if (scroll.top !== undefined) {\r\n      this.scroller.setScrollTop(scroll.top)\r\n    }\r\n  }\r\n\r\n\r\n  /* Hit Areas\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n  // forward all hit-related method calls to the grids (dayGrid might not be defined)\r\n\r\n\r\n  getHitFootprint(hit) {\r\n    // TODO: hit.component is set as a hack to identify where the hit came from\r\n    return hit.component.getHitFootprint(hit)\r\n  }\r\n\r\n\r\n  getHitEl(hit) {\r\n    // TODO: hit.component is set as a hack to identify where the hit came from\r\n    return hit.component.getHitEl(hit)\r\n  }\r\n\r\n\r\n  /* Event Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  executeEventRender(eventsPayload) {\r\n    let dayEventsPayload = {}\r\n    let timedEventsPayload = {}\r\n    let id\r\n    let eventInstanceGroup\r\n\r\n    // separate the events into all-day and timed\r\n    for (id in eventsPayload) {\r\n      eventInstanceGroup = eventsPayload[id]\r\n\r\n      if (eventInstanceGroup.getEventDef().isAllDay()) {\r\n        dayEventsPayload[id] = eventInstanceGroup\r\n      } else {\r\n        timedEventsPayload[id] = eventInstanceGroup\r\n      }\r\n    }\r\n\r\n    this.timeGrid.executeEventRender(timedEventsPayload)\r\n\r\n    if (this.dayGrid) {\r\n      this.dayGrid.executeEventRender(dayEventsPayload)\r\n    }\r\n  }\r\n\r\n\r\n  /* Dragging/Resizing Routing\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // A returned value of `true` signals that a mock \"helper\" event has been rendered.\r\n  renderDrag(eventFootprints, seg, isTouch) {\r\n    let groups = groupEventFootprintsByAllDay(eventFootprints)\r\n    let renderedHelper = false\r\n\r\n    renderedHelper = this.timeGrid.renderDrag(groups.timed, seg, isTouch)\r\n\r\n    if (this.dayGrid) {\r\n      renderedHelper = this.dayGrid.renderDrag(groups.allDay, seg, isTouch) || renderedHelper\r\n    }\r\n\r\n    return renderedHelper\r\n  }\r\n\r\n\r\n  renderEventResize(eventFootprints, seg, isTouch) {\r\n    let groups = groupEventFootprintsByAllDay(eventFootprints)\r\n\r\n    this.timeGrid.renderEventResize(groups.timed, seg, isTouch)\r\n\r\n    if (this.dayGrid) {\r\n      this.dayGrid.renderEventResize(groups.allDay, seg, isTouch)\r\n    }\r\n  }\r\n\r\n\r\n  /* Selection\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of a selection\r\n  renderSelectionFootprint(componentFootprint) {\r\n    if (!componentFootprint.isAllDay) {\r\n      this.timeGrid.renderSelectionFootprint(componentFootprint)\r\n    } else if (this.dayGrid) {\r\n      this.dayGrid.renderSelectionFootprint(componentFootprint)\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nAgendaView.prototype.timeGridClass = TimeGrid\r\nAgendaView.prototype.dayGridClass = DayGrid\r\n\r\n\r\n// Will customize the rendering behavior of the AgendaView's timeGrid\r\nagendaTimeGridMethods = {\r\n\r\n  // Generates the HTML that will go before the day-of week header cells\r\n  renderHeadIntroHtml() {\r\n    let view = this.view\r\n    let calendar = view.calendar\r\n    let weekStart = calendar.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs, true)\r\n    let weekText\r\n\r\n    if (this.opt('weekNumbers')) {\r\n      weekText = weekStart.format(this.opt('smallWeekFormat'))\r\n\r\n      return '' +\r\n        '<th class=\"fc-axis fc-week-number ' + calendar.theme.getClass('widgetHeader') + '\" ' + view.axisStyleAttr() + '>' +\r\n          view.buildGotoAnchorHtml( // aside from link, important for matchCellWidths\r\n            { date: weekStart, type: 'week', forceOff: this.colCnt > 1 },\r\n            htmlEscape(weekText) // inner HTML\r\n          ) +\r\n        '</th>'\r\n    } else {\r\n      return '<th class=\"fc-axis ' + calendar.theme.getClass('widgetHeader') + '\" ' + view.axisStyleAttr() + '></th>'\r\n    }\r\n  },\r\n\r\n\r\n  // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\r\n  renderBgIntroHtml() {\r\n    let view = this.view\r\n\r\n    return '<td class=\"fc-axis ' + view.calendar.theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '></td>'\r\n  },\r\n\r\n\r\n  // Generates the HTML that goes before all other types of cells.\r\n  // Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\r\n  renderIntroHtml() {\r\n    let view = this.view\r\n\r\n    return '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>'\r\n  }\r\n\r\n}\r\n\r\n\r\n// Will customize the rendering behavior of the AgendaView's dayGrid\r\nagendaDayGridMethods = {\r\n\r\n  // Generates the HTML that goes before the all-day cells\r\n  renderBgIntroHtml() {\r\n    let view = this.view\r\n\r\n    return '' +\r\n      '<td class=\"fc-axis ' + view.calendar.theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '>' +\r\n        '<span>' + // needed for matchCellWidths\r\n          view.getAllDayHtml() +\r\n        '</span>' +\r\n      '</td>'\r\n  },\r\n\r\n\r\n  // Generates the HTML that goes before all other types of cells.\r\n  // Affects content-skeleton, helper-skeleton, highlight-skeleton for both the time-grid and day-grid.\r\n  renderIntroHtml() {\r\n    let view = this.view\r\n\r\n    return '<td class=\"fc-axis\" ' + view.axisStyleAttr() + '></td>'\r\n  }\r\n\r\n}\r\n\r\n\r\nfunction groupEventFootprintsByAllDay(eventFootprints) {\r\n  let allDay = []\r\n  let timed = []\r\n  let i\r\n\r\n  for (i = 0; i < eventFootprints.length; i++) {\r\n    if (eventFootprints[i].componentFootprint.isAllDay) {\r\n      allDay.push(eventFootprints[i])\r\n    } else {\r\n      timed.push(eventFootprints[i])\r\n    }\r\n  }\r\n\r\n  return { allDay: allDay, timed: timed }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/AgendaView.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { isInt, divideDurationByDuration, htmlEscape } from '../util'\r\nimport InteractiveDateComponent from '../component/InteractiveDateComponent'\r\nimport BusinessHourRenderer from '../component/renderers/BusinessHourRenderer'\r\nimport StandardInteractionsMixin from '../component/interactions/StandardInteractionsMixin'\r\nimport { default as DayTableMixin, DayTableInterface } from '../component/DayTableMixin'\r\nimport CoordCache from '../common/CoordCache'\r\nimport UnzonedRange from '../models/UnzonedRange'\r\nimport ComponentFootprint from '../models/ComponentFootprint'\r\nimport TimeGridEventRenderer from './TimeGridEventRenderer'\r\nimport TimeGridHelperRenderer from './TimeGridHelperRenderer'\r\nimport TimeGridFillRenderer from './TimeGridFillRenderer'\r\n\r\n/* A component that renders one or more columns of vertical time slots\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n// We mixin DayTable, even though there is only a single row of days\r\n\r\n// potential nice values for the slot-duration and interval-duration\r\n// from largest to smallest\r\nlet AGENDA_STOCK_SUB_DURATIONS = [\r\n  { hours: 1 },\r\n  { minutes: 30 },\r\n  { minutes: 15 },\r\n  { seconds: 30 },\r\n  { seconds: 15 }\r\n]\r\n\r\nexport default class TimeGrid extends InteractiveDateComponent {\r\n\r\n  dayDates: DayTableInterface['dayDates']\r\n  daysPerRow: DayTableInterface['daysPerRow']\r\n  colCnt: DayTableInterface['colCnt']\r\n  updateDayTable: DayTableInterface['updateDayTable']\r\n  renderHeadHtml: DayTableInterface['renderHeadHtml']\r\n  renderBgTrHtml: DayTableInterface['renderBgTrHtml']\r\n  bookendCells: DayTableInterface['bookendCells']\r\n  getCellDate: DayTableInterface['getCellDate']\r\n\r\n  view: any // TODO: make more general and/or remove\r\n  helperRenderer: any\r\n\r\n  dayRanges: any // UnzonedRange[], of start-end of each day\r\n  slotDuration: any // duration of a \"slot\", a distinct time segment on given day, visualized by lines\r\n  snapDuration: any // granularity of time for dragging and selecting\r\n  snapsPerSlot: any\r\n  labelFormat: any // formatting string for times running along vertical axis\r\n  labelInterval: any // duration of how often a label should be displayed for a slot\r\n\r\n  headContainerEl: any // div that hold's the date header\r\n  colEls: any // cells elements in the day-row background\r\n  slatContainerEl: any // div that wraps all the slat rows\r\n  slatEls: any // elements running horizontally across all columns\r\n  nowIndicatorEls: any\r\n\r\n  colCoordCache: any\r\n  slatCoordCache: any\r\n\r\n  bottomRuleEl: any // hidden by default\r\n  contentSkeletonEl: any\r\n  colContainerEls: any // containers for each column\r\n\r\n  // inner-containers for each column where different types of segs live\r\n  fgContainerEls: any\r\n  bgContainerEls: any\r\n  helperContainerEls: any\r\n  highlightContainerEls: any\r\n  businessContainerEls: any\r\n\r\n  // arrays of different types of displayed segments\r\n  helperSegs: any\r\n  highlightSegs: any\r\n  businessSegs: any\r\n\r\n\r\n  constructor(view) {\r\n    super(view)\r\n    this.processOptions()\r\n  }\r\n\r\n\r\n  // Slices up the given span (unzoned start/end with other misc data) into an array of segments\r\n  componentFootprintToSegs(componentFootprint) {\r\n    let segs = this.sliceRangeByTimes(componentFootprint.unzonedRange)\r\n    let i\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      if (this.isRTL) {\r\n        segs[i].col = this.daysPerRow - 1 - segs[i].dayIndex\r\n      } else {\r\n        segs[i].col = segs[i].dayIndex\r\n      }\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  /* Date Handling\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  sliceRangeByTimes(unzonedRange) {\r\n    let segs = []\r\n    let segRange\r\n    let dayIndex\r\n\r\n    for (dayIndex = 0; dayIndex < this.daysPerRow; dayIndex++) {\r\n\r\n      segRange = unzonedRange.intersect(this.dayRanges[dayIndex])\r\n\r\n      if (segRange) {\r\n        segs.push({\r\n          startMs: segRange.startMs,\r\n          endMs: segRange.endMs,\r\n          isStart: segRange.isStart,\r\n          isEnd: segRange.isEnd,\r\n          dayIndex: dayIndex\r\n        })\r\n      }\r\n    }\r\n\r\n    return segs\r\n  }\r\n\r\n\r\n  /* Options\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Parses various options into properties of this object\r\n  processOptions() {\r\n    let slotDuration = this.opt('slotDuration')\r\n    let snapDuration = this.opt('snapDuration')\r\n    let input\r\n\r\n    slotDuration = moment.duration(slotDuration)\r\n    snapDuration = snapDuration ? moment.duration(snapDuration) : slotDuration\r\n\r\n    this.slotDuration = slotDuration\r\n    this.snapDuration = snapDuration\r\n    this.snapsPerSlot = slotDuration / snapDuration // TODO: ensure an integer multiple?\r\n\r\n    // might be an array value (for TimelineView).\r\n    // if so, getting the most granular entry (the last one probably).\r\n    input = this.opt('slotLabelFormat')\r\n    if ($.isArray(input)) {\r\n      input = input[input.length - 1]\r\n    }\r\n\r\n    this.labelFormat = input ||\r\n      this.opt('smallTimeFormat') // the computed default\r\n\r\n    input = this.opt('slotLabelInterval')\r\n    this.labelInterval = input ?\r\n      moment.duration(input) :\r\n      this.computeLabelInterval(slotDuration)\r\n  }\r\n\r\n\r\n  // Computes an automatic value for slotLabelInterval\r\n  computeLabelInterval(slotDuration) {\r\n    let i\r\n    let labelInterval\r\n    let slotsPerLabel\r\n\r\n    // find the smallest stock label interval that results in more than one slots-per-label\r\n    for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\r\n      labelInterval = moment.duration(AGENDA_STOCK_SUB_DURATIONS[i])\r\n      slotsPerLabel = divideDurationByDuration(labelInterval, slotDuration)\r\n      if (isInt(slotsPerLabel) && slotsPerLabel > 1) {\r\n        return labelInterval\r\n      }\r\n    }\r\n\r\n    return moment.duration(slotDuration) // fall back. clone\r\n  }\r\n\r\n\r\n  /* Date Rendering\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  renderDates(dateProfile) {\r\n    this.dateProfile = dateProfile\r\n    this.updateDayTable()\r\n    this.renderSlats()\r\n    this.renderColumns()\r\n  }\r\n\r\n\r\n  unrenderDates() {\r\n    // this.unrenderSlats(); // don't need this because repeated .html() calls clear\r\n    this.unrenderColumns()\r\n  }\r\n\r\n\r\n  renderSkeleton() {\r\n    let theme = this.view.calendar.theme\r\n\r\n    this.el.html(\r\n      '<div class=\"fc-bg\"></div>' +\r\n      '<div class=\"fc-slats\"></div>' +\r\n      '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" style=\"display:none\" />'\r\n    )\r\n\r\n    this.bottomRuleEl = this.el.find('hr')\r\n  }\r\n\r\n\r\n  renderSlats() {\r\n    let theme = this.view.calendar.theme\r\n\r\n    this.slatContainerEl = this.el.find('> .fc-slats')\r\n      .html( // avoids needing ::unrenderSlats()\r\n        '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n          this.renderSlatRowHtml() +\r\n        '</table>'\r\n      )\r\n\r\n    this.slatEls = this.slatContainerEl.find('tr')\r\n\r\n    this.slatCoordCache = new CoordCache({\r\n      els: this.slatEls,\r\n      isVertical: true\r\n    })\r\n  }\r\n\r\n\r\n  // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\r\n  renderSlatRowHtml() {\r\n    let view = this.view\r\n    let calendar = view.calendar\r\n    let theme = calendar.theme\r\n    let isRTL = this.isRTL\r\n    let dateProfile = this.dateProfile\r\n    let html = ''\r\n    let slotTime = moment.duration(+dateProfile.minTime) // wish there was .clone() for durations\r\n    let slotIterator = moment.duration(0)\r\n    let slotDate // will be on the view's first day, but we only care about its time\r\n    let isLabeled\r\n    let axisHtml\r\n\r\n    // Calculate the time for each slot\r\n    while (slotTime < dateProfile.maxTime) {\r\n      slotDate = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.startMs).time(slotTime)\r\n      isLabeled = isInt(divideDurationByDuration(slotIterator, this.labelInterval))\r\n\r\n      axisHtml =\r\n        '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\" ' + view.axisStyleAttr() + '>' +\r\n          (isLabeled ?\r\n            '<span>' + // for matchCellWidths\r\n              htmlEscape(slotDate.format(this.labelFormat)) +\r\n            '</span>' :\r\n            ''\r\n            ) +\r\n        '</td>'\r\n\r\n      html +=\r\n        '<tr data-time=\"' + slotDate.format('HH:mm:ss') + '\"' +\r\n          (isLabeled ? '' : ' class=\"fc-minor\"') +\r\n          '>' +\r\n          (!isRTL ? axisHtml : '') +\r\n          '<td class=\"' + theme.getClass('widgetContent') + '\"/>' +\r\n          (isRTL ? axisHtml : '') +\r\n        '</tr>'\r\n\r\n      slotTime.add(this.slotDuration)\r\n      slotIterator.add(this.slotDuration)\r\n    }\r\n\r\n    return html\r\n  }\r\n\r\n\r\n  renderColumns() {\r\n    let dateProfile = this.dateProfile\r\n    let theme = this.view.calendar.theme\r\n\r\n    this.dayRanges = this.dayDates.map(function(dayDate) {\r\n      return new UnzonedRange(\r\n        dayDate.clone().add(dateProfile.minTime),\r\n        dayDate.clone().add(dateProfile.maxTime)\r\n      )\r\n    })\r\n\r\n    if (this.headContainerEl) {\r\n      this.headContainerEl.html(this.renderHeadHtml())\r\n    }\r\n\r\n    this.el.find('> .fc-bg').html(\r\n      '<table class=\"' + theme.getClass('tableGrid') + '\">' +\r\n        this.renderBgTrHtml(0) + // row=0\r\n      '</table>'\r\n    )\r\n\r\n    this.colEls = this.el.find('.fc-day, .fc-disabled-day')\r\n\r\n    this.colCoordCache = new CoordCache({\r\n      els: this.colEls,\r\n      isHorizontal: true\r\n    })\r\n\r\n    this.renderContentSkeleton()\r\n  }\r\n\r\n\r\n  unrenderColumns() {\r\n    this.unrenderContentSkeleton()\r\n  }\r\n\r\n\r\n  /* Content Skeleton\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders the DOM that the view's content will live in\r\n  renderContentSkeleton() {\r\n    let cellHtml = ''\r\n    let i\r\n    let skeletonEl\r\n\r\n    for (i = 0; i < this.colCnt; i++) {\r\n      cellHtml +=\r\n        '<td>' +\r\n          '<div class=\"fc-content-col\">' +\r\n            '<div class=\"fc-event-container fc-helper-container\"></div>' +\r\n            '<div class=\"fc-event-container\"></div>' +\r\n            '<div class=\"fc-highlight-container\"></div>' +\r\n            '<div class=\"fc-bgevent-container\"></div>' +\r\n            '<div class=\"fc-business-container\"></div>' +\r\n          '</div>' +\r\n        '</td>'\r\n    }\r\n\r\n    skeletonEl = this.contentSkeletonEl = $(\r\n      '<div class=\"fc-content-skeleton\">' +\r\n        '<table>' +\r\n          '<tr>' + cellHtml + '</tr>' +\r\n        '</table>' +\r\n      '</div>'\r\n    )\r\n\r\n    this.colContainerEls = skeletonEl.find('.fc-content-col')\r\n    this.helperContainerEls = skeletonEl.find('.fc-helper-container')\r\n    this.fgContainerEls = skeletonEl.find('.fc-event-container:not(.fc-helper-container)')\r\n    this.bgContainerEls = skeletonEl.find('.fc-bgevent-container')\r\n    this.highlightContainerEls = skeletonEl.find('.fc-highlight-container')\r\n    this.businessContainerEls = skeletonEl.find('.fc-business-container')\r\n\r\n    this.bookendCells(skeletonEl.find('tr')) // TODO: do this on string level\r\n    this.el.append(skeletonEl)\r\n  }\r\n\r\n\r\n  unrenderContentSkeleton() {\r\n    if (this.contentSkeletonEl) { // defensive :(\r\n      this.contentSkeletonEl.remove()\r\n      this.contentSkeletonEl = null\r\n      this.colContainerEls = null\r\n      this.helperContainerEls = null\r\n      this.fgContainerEls = null\r\n      this.bgContainerEls = null\r\n      this.highlightContainerEls = null\r\n      this.businessContainerEls = null\r\n    }\r\n  }\r\n\r\n\r\n  // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\r\n  groupSegsByCol(segs) {\r\n    let segsByCol = []\r\n    let i\r\n\r\n    for (i = 0; i < this.colCnt; i++) {\r\n      segsByCol.push([])\r\n    }\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      segsByCol[segs[i].col].push(segs[i])\r\n    }\r\n\r\n    return segsByCol\r\n  }\r\n\r\n\r\n  // Given segments grouped by column, insert the segments' elements into a parallel array of container\r\n  // elements, each living within a column.\r\n  attachSegsByCol(segsByCol, containerEls) {\r\n    let col\r\n    let segs\r\n    let i\r\n\r\n    for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\r\n      segs = segsByCol[col]\r\n\r\n      for (i = 0; i < segs.length; i++) {\r\n        containerEls.eq(col).append(segs[i].el)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  /* Now Indicator\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  getNowIndicatorUnit() {\r\n    return 'minute' // will refresh on the minute\r\n  }\r\n\r\n\r\n  renderNowIndicator(date) {\r\n\r\n    // HACK: if date columns not ready for some reason (scheduler)\r\n    if (!this.colContainerEls) {\r\n      return\r\n    }\r\n\r\n    // seg system might be overkill, but it handles scenario where line needs to be rendered\r\n    //  more than once because of columns with the same date (resources columns for example)\r\n    let segs = this.componentFootprintToSegs(\r\n      new ComponentFootprint(\r\n        new UnzonedRange(date, date.valueOf() + 1), // protect against null range\r\n        false // all-day\r\n      )\r\n    )\r\n    let top = this.computeDateTop(date, date)\r\n    let nodes = []\r\n    let i\r\n\r\n    // render lines within the columns\r\n    for (i = 0; i < segs.length; i++) {\r\n      nodes.push($('<div class=\"fc-now-indicator fc-now-indicator-line\"></div>')\r\n        .css('top', top)\r\n        .appendTo(this.colContainerEls.eq(segs[i].col))[0])\r\n    }\r\n\r\n    // render an arrow over the axis\r\n    if (segs.length > 0) { // is the current time in view?\r\n      nodes.push($('<div class=\"fc-now-indicator fc-now-indicator-arrow\"></div>')\r\n        .css('top', top)\r\n        .appendTo(this.el.find('.fc-content-skeleton'))[0])\r\n    }\r\n\r\n    this.nowIndicatorEls = $(nodes)\r\n  }\r\n\r\n\r\n  unrenderNowIndicator() {\r\n    if (this.nowIndicatorEls) {\r\n      this.nowIndicatorEls.remove()\r\n      this.nowIndicatorEls = null\r\n    }\r\n  }\r\n\r\n\r\n  /* Coordinates\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  updateSize(totalHeight, isAuto, isResize) {\r\n    super.updateSize(totalHeight, isAuto, isResize)\r\n\r\n    this.slatCoordCache.build()\r\n\r\n    if (isResize) {\r\n      this.updateSegVerticals(\r\n        [].concat(this.eventRenderer.getSegs(), this.businessSegs || [])\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  getTotalSlatHeight() {\r\n    return this.slatContainerEl.outerHeight()\r\n  }\r\n\r\n\r\n  // Computes the top coordinate, relative to the bounds of the grid, of the given date.\r\n  // `ms` can be a millisecond UTC time OR a UTC moment.\r\n  // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\r\n  computeDateTop(ms, startOfDayDate) {\r\n    return this.computeTimeTop(\r\n      moment.duration(\r\n        ms - startOfDayDate.clone().stripTime()\r\n      )\r\n    )\r\n  }\r\n\r\n\r\n  // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\r\n  computeTimeTop(time) {\r\n    let len = this.slatEls.length\r\n    let dateProfile = this.dateProfile\r\n    let slatCoverage = (time - dateProfile.minTime) / this.slotDuration // floating-point value of # of slots covered\r\n    let slatIndex\r\n    let slatRemainder\r\n\r\n    // compute a floating-point number for how many slats should be progressed through.\r\n    // from 0 to number of slats (inclusive)\r\n    // constrained because minTime/maxTime might be customized.\r\n    slatCoverage = Math.max(0, slatCoverage)\r\n    slatCoverage = Math.min(len, slatCoverage)\r\n\r\n    // an integer index of the furthest whole slat\r\n    // from 0 to number slats (*exclusive*, so len-1)\r\n    slatIndex = Math.floor(slatCoverage)\r\n    slatIndex = Math.min(slatIndex, len - 1)\r\n\r\n    // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\r\n    // could be 1.0 if slatCoverage is covering *all* the slots\r\n    slatRemainder = slatCoverage - slatIndex\r\n\r\n    return this.slatCoordCache.getTopPosition(slatIndex) +\r\n      this.slatCoordCache.getHeight(slatIndex) * slatRemainder\r\n  }\r\n\r\n\r\n  // Refreshes the CSS top/bottom coordinates for each segment element.\r\n  // Works when called after initial render, after a window resize/zoom for example.\r\n  updateSegVerticals(segs) {\r\n    this.computeSegVerticals(segs)\r\n    this.assignSegVerticals(segs)\r\n  }\r\n\r\n\r\n  // For each segment in an array, computes and assigns its top and bottom properties\r\n  computeSegVerticals(segs) {\r\n    let eventMinHeight = this.opt('agendaEventMinHeight')\r\n    let i\r\n    let seg\r\n    let dayDate\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      dayDate = this.dayDates[seg.dayIndex]\r\n\r\n      seg.top = this.computeDateTop(seg.startMs, dayDate)\r\n      seg.bottom = Math.max(\r\n        seg.top + eventMinHeight,\r\n        this.computeDateTop(seg.endMs, dayDate)\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  // Given segments that already have their top/bottom properties computed, applies those values to\r\n  // the segments' elements.\r\n  assignSegVerticals(segs) {\r\n    let i\r\n    let seg\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      seg.el.css(this.generateSegVerticalCss(seg))\r\n    }\r\n  }\r\n\r\n\r\n  // Generates an object with CSS properties for the top/bottom coordinates of a segment element\r\n  generateSegVerticalCss(seg) {\r\n    return {\r\n      top: seg.top,\r\n      bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\r\n    }\r\n  }\r\n\r\n\r\n  /* Hit System\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  prepareHits() {\r\n    this.colCoordCache.build()\r\n    this.slatCoordCache.build()\r\n  }\r\n\r\n\r\n  releaseHits() {\r\n    this.colCoordCache.clear()\r\n    // NOTE: don't clear slatCoordCache because we rely on it for computeTimeTop\r\n  }\r\n\r\n\r\n  queryHit(leftOffset, topOffset): any {\r\n    let snapsPerSlot = this.snapsPerSlot\r\n    let colCoordCache = this.colCoordCache\r\n    let slatCoordCache = this.slatCoordCache\r\n\r\n    if (colCoordCache.isLeftInBounds(leftOffset) && slatCoordCache.isTopInBounds(topOffset)) {\r\n      let colIndex = colCoordCache.getHorizontalIndex(leftOffset)\r\n      let slatIndex = slatCoordCache.getVerticalIndex(topOffset)\r\n\r\n      if (colIndex != null && slatIndex != null) {\r\n        let slatTop = slatCoordCache.getTopOffset(slatIndex)\r\n        let slatHeight = slatCoordCache.getHeight(slatIndex)\r\n        let partial = (topOffset - slatTop) / slatHeight // floating point number between 0 and 1\r\n        let localSnapIndex = Math.floor(partial * snapsPerSlot) // the snap # relative to start of slat\r\n        let snapIndex = slatIndex * snapsPerSlot + localSnapIndex\r\n        let snapTop = slatTop + (localSnapIndex / snapsPerSlot) * slatHeight\r\n        let snapBottom = slatTop + ((localSnapIndex + 1) / snapsPerSlot) * slatHeight\r\n\r\n        return {\r\n          col: colIndex,\r\n          snap: snapIndex,\r\n          component: this, // needed unfortunately :(\r\n          left: colCoordCache.getLeftOffset(colIndex),\r\n          right: colCoordCache.getRightOffset(colIndex),\r\n          top: snapTop,\r\n          bottom: snapBottom\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  getHitFootprint(hit) {\r\n    let start = this.getCellDate(0, hit.col) // row=0\r\n    let time = this.computeSnapTime(hit.snap) // pass in the snap-index\r\n    let end\r\n\r\n    start.time(time)\r\n    end = start.clone().add(this.snapDuration)\r\n\r\n    return new ComponentFootprint(\r\n      new UnzonedRange(start, end),\r\n      false // all-day?\r\n    )\r\n  }\r\n\r\n\r\n  // Given a row number of the grid, representing a \"snap\", returns a time (Duration) from its start-of-day\r\n  computeSnapTime(snapIndex) {\r\n    return moment.duration(this.dateProfile.minTime + this.snapDuration * snapIndex)\r\n  }\r\n\r\n\r\n  getHitEl(hit) {\r\n    return this.colEls.eq(hit.col)\r\n  }\r\n\r\n\r\n  /* Event Drag Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of an event being dragged over the specified date(s).\r\n  // A returned value of `true` signals that a mock \"helper\" event has been rendered.\r\n  renderDrag(eventFootprints, seg, isTouch) {\r\n    let i\r\n\r\n    if (seg) { // if there is event information for this drag, render a helper event\r\n\r\n      if (eventFootprints.length) {\r\n        this.helperRenderer.renderEventDraggingFootprints(eventFootprints, seg, isTouch)\r\n\r\n        // signal that a helper has been rendered\r\n        return true\r\n      }\r\n    } else { // otherwise, just render a highlight\r\n\r\n      for (i = 0; i < eventFootprints.length; i++) {\r\n        this.renderHighlight(eventFootprints[i].componentFootprint)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Unrenders any visual indication of an event being dragged\r\n  unrenderDrag() {\r\n    this.unrenderHighlight()\r\n    this.helperRenderer.unrender()\r\n  }\r\n\r\n\r\n  /* Event Resize Visualization\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of an event being resized\r\n  renderEventResize(eventFootprints, seg, isTouch) {\r\n    this.helperRenderer.renderEventResizingFootprints(eventFootprints, seg, isTouch)\r\n  }\r\n\r\n\r\n  // Unrenders any visual indication of an event being resized\r\n  unrenderEventResize() {\r\n    this.helperRenderer.unrender()\r\n  }\r\n\r\n\r\n  /* Selection\r\n  ------------------------------------------------------------------------------------------------------------------*/\r\n\r\n\r\n  // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\r\n  renderSelectionFootprint(componentFootprint) {\r\n    if (this.opt('selectHelper')) { // this setting signals that a mock helper event should be rendered\r\n      this.helperRenderer.renderComponentFootprint(componentFootprint)\r\n    } else {\r\n      this.renderHighlight(componentFootprint)\r\n    }\r\n  }\r\n\r\n\r\n  // Unrenders any visual indication of a selection\r\n  unrenderSelection() {\r\n    this.helperRenderer.unrender()\r\n    this.unrenderHighlight()\r\n  }\r\n\r\n}\r\n\r\nTimeGrid.prototype.eventRendererClass = TimeGridEventRenderer\r\nTimeGrid.prototype.businessHourRendererClass = BusinessHourRenderer\r\nTimeGrid.prototype.helperRendererClass = TimeGridHelperRenderer\r\nTimeGrid.prototype.fillRendererClass = TimeGridFillRenderer\r\n\r\nStandardInteractionsMixin.mixInto(TimeGrid)\r\nDayTableMixin.mixInto(TimeGrid)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/TimeGrid.ts","import UnzonedRange from '../models/UnzonedRange'\r\nimport DateProfileGenerator from '../DateProfileGenerator'\r\n\r\n\r\nexport default class BasicViewDateProfileGenerator extends DateProfileGenerator {\r\n\r\n  // Computes the date range that will be rendered.\r\n  buildRenderRange(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\r\n    let renderUnzonedRange = super.buildRenderRange(currentUnzonedRange, currentRangeUnit, isRangeAllDay) // an UnzonedRange\r\n    let start = this.msToUtcMoment(renderUnzonedRange.startMs, isRangeAllDay)\r\n    let end = this.msToUtcMoment(renderUnzonedRange.endMs, isRangeAllDay)\r\n\r\n    // year and month views should be aligned with weeks. this is already done for week\r\n    if (/^(year|month)$/.test(currentRangeUnit)) {\r\n      start.startOf('week')\r\n\r\n      // make end-of-week if not already\r\n      if (end.weekday()) {\r\n        end.add(1, 'week').startOf('week') // exclusively move backwards\r\n      }\r\n    }\r\n\r\n    return new UnzonedRange(start, end)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/BasicViewDateProfileGenerator.ts","import * as moment from 'moment'\r\nimport { distributeHeight } from '../util'\r\nimport BasicView from './BasicView'\r\nimport MonthViewDateProfileGenerator from './MonthViewDateProfileGenerator'\r\n\r\n\r\n/* A month view with day cells running in rows (one-per-week) and columns\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class MonthView extends BasicView {\r\n\r\n  // Overrides the default BasicView behavior to have special multi-week auto-height logic\r\n  setGridHeight(height, isAuto) {\r\n\r\n    // if auto, make the height of each row the height that it would be if there were 6 weeks\r\n    if (isAuto) {\r\n      height *= this.dayGrid.rowCnt / 6\r\n    }\r\n\r\n    distributeHeight(this.dayGrid.rowEls, height, !isAuto) // if auto, don't compensate for height-hogging rows\r\n  }\r\n\r\n\r\n  isDateInOtherMonth(date, dateProfile) {\r\n    return date.month() !== moment.utc(dateProfile.currentUnzonedRange.startMs).month() // TODO: optimize\r\n  }\r\n\r\n}\r\n\r\nMonthView.prototype.dateProfileGeneratorClass = MonthViewDateProfileGenerator\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/MonthView.ts","import * as $ from 'jquery'\nimport { htmlEscape, subtractInnerElHeight } from '../util'\nimport UnzonedRange from '../models/UnzonedRange'\nimport View from '../View'\nimport Scroller from '../common/Scroller'\nimport ListEventRenderer from './ListEventRenderer'\nimport ListEventPointing from './ListEventPointing'\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\".\n*/\nexport default class ListView extends View {\n\n  // initialized after the class\n  eventRendererClass: any\n  eventPointingClass: any\n\n  segSelector: any = '.fc-list-item' // which elements accept event actions\n\n  scroller: any\n  contentEl: any\n\n  dayDates: any // localized ambig-time moment array\n  dayRanges: any // UnzonedRange[], of start-end of each day\n\n\n  constructor(calendar, viewSpec) {\n    super(calendar, viewSpec)\n\n    this.scroller = new Scroller({\n      overflowX: 'hidden',\n      overflowY: 'auto'\n    })\n  }\n\n\n  renderSkeleton() {\n    this.el.addClass(\n      'fc-list-view ' +\n      this.calendar.theme.getClass('listView')\n    )\n\n    this.scroller.render()\n    this.scroller.el.appendTo(this.el)\n\n    this.contentEl = this.scroller.scrollEl // shortcut\n  }\n\n\n  unrenderSkeleton() {\n    this.scroller.destroy() // will remove the Grid too\n  }\n\n\n  updateSize(totalHeight, isAuto, isResize) {\n    super.updateSize(totalHeight, isAuto, isResize)\n\n    this.scroller.clear() // sets height to 'auto' and clears overflow\n\n    if (!isAuto) {\n      this.scroller.setHeight(this.computeScrollerHeight(totalHeight))\n    }\n  }\n\n\n  computeScrollerHeight(totalHeight) {\n    return totalHeight -\n      subtractInnerElHeight(this.el, this.scroller.el) // everything that's NOT the scroller\n  }\n\n\n  renderDates(dateProfile) {\n    let calendar = this.calendar\n    let dayStart = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.startMs, true)\n    let viewEnd = calendar.msToUtcMoment(dateProfile.renderUnzonedRange.endMs, true)\n    let dayDates = []\n    let dayRanges = []\n\n    while (dayStart < viewEnd) {\n\n      dayDates.push(dayStart.clone())\n\n      dayRanges.push(new UnzonedRange(\n        dayStart,\n        dayStart.clone().add(1, 'day')\n      ))\n\n      dayStart.add(1, 'day')\n    }\n\n    this.dayDates = dayDates\n    this.dayRanges = dayRanges\n\n    // all real rendering happens in EventRenderer\n  }\n\n\n  // slices by day\n  componentFootprintToSegs(footprint) {\n    let dayRanges = this.dayRanges\n    let dayIndex\n    let segRange\n    let seg\n    let segs = []\n\n    for (dayIndex = 0; dayIndex < dayRanges.length; dayIndex++) {\n      segRange = footprint.unzonedRange.intersect(dayRanges[dayIndex])\n\n      if (segRange) {\n        seg = {\n          startMs: segRange.startMs,\n          endMs: segRange.endMs,\n          isStart: segRange.isStart,\n          isEnd: segRange.isEnd,\n          dayIndex: dayIndex\n        }\n\n        segs.push(seg)\n\n        // detect when footprint won't go fully into the next day,\n        // and mutate the latest seg to the be the end.\n        if (\n          !seg.isEnd && !footprint.isAllDay &&\n          dayIndex + 1 < dayRanges.length &&\n          footprint.unzonedRange.endMs < dayRanges[dayIndex + 1].startMs + this.nextDayThreshold\n        ) {\n          seg.endMs = footprint.unzonedRange.endMs\n          seg.isEnd = true\n          break\n        }\n      }\n    }\n\n    return segs\n  }\n\n\n  renderEmptyMessage() {\n    this.contentEl.html(\n      '<div class=\"fc-list-empty-wrap2\">' + // TODO: try less wraps\n      '<div class=\"fc-list-empty-wrap1\">' +\n      '<div class=\"fc-list-empty\">' + '<div class=\"noEventImg\">  </div>' +\n        htmlEscape(this.opt('noEventsMessage')) +\n      '</div>' +\n      '</div>' +\n      '</div>'\n    )\n  }\n\n  // render the event segments in the view\n  renderSegList(allSegs) {\n \n    let segsByDay = this.groupSegsByDay(allSegs) // sparse array\n    let dayIndex\n    let daySegs\n    let i\n    let tableEl = $('<table class=\"fc-list-table ' + this.calendar.theme.getClass('tableList') + '\"><tbody/></table>')\n    let tbodyEl = tableEl.find('tbody')\n\n    for (dayIndex = 0; dayIndex < segsByDay.length; dayIndex++) {\n      daySegs = segsByDay[dayIndex]\n\n      if (daySegs) { // sparse array, so might be undefined\n\n        // append a day header\n        tbodyEl.append(this.dayHeaderHtml(this.dayDates[dayIndex]))\n\n        this.eventRenderer.sortEventSegs(daySegs)\n\n        for (i = 0; i < daySegs.length; i++) {\n          tbodyEl.append(daySegs[i].el) // append event row\n        }\n      }\n    }\n\n    this.contentEl.empty().append(tableEl)\n  }\n\n\n  // Returns a sparse array of arrays, segs grouped by their dayIndex\n  groupSegsByDay(segs) {\n    let segsByDay = [] // sparse array\n    let i\n    let seg\n\n    for (i = 0; i < segs.length; i++) {\n      seg = segs[i];\n      (segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n        .push(seg)\n    }\n\n    return segsByDay\n  }\n\n\n  // generates the HTML for the day headers that live amongst the event rows\n  dayHeaderHtml(dayDate) {\n    let mainFormat = this.opt('listDayFormat')\n    let altFormat = this.opt('listDayAltFormat')\n\n    return '<tr class=\"fc-list-heading\" data-date=\"' + dayDate.format('YYYY-MM-DD') + '\">' +\n      '<td class=\"' + (\n        this.calendar.theme.getClass('tableListHeading') ||\n        this.calendar.theme.getClass('widgetHeader')\n      ) + '\" colspan=\"3\">' +\n        (mainFormat ?\n          this.buildGotoAnchorHtml(\n            dayDate,\n            { 'class': 'fc-list-heading-main' },\n            htmlEscape(dayDate.format(mainFormat)) // inner HTML\n          ) :\n          '') +\n        (altFormat ?\n          this.buildGotoAnchorHtml(\n            dayDate,\n            { 'class': 'fc-list-heading-alt' },\n            htmlEscape(dayDate.format(altFormat)) // inner HTML\n          ) :\n          '') +\n      '</td>' +\n    '</tr>'\n  }\n\n}\n\nListView.prototype.eventRendererClass = ListEventRenderer\nListView.prototype.eventPointingClass = ListEventPointing\n\n\n\n// WEBPACK FOOTER //\n// ./src/list/ListView.ts","import * as $ from 'jquery'\r\nimport * as exportHooks from './exports'\r\nimport { warn } from './util'\r\nimport Calendar from './Calendar'\r\n\r\n// for intentional side-effects\r\nimport './moment-ext'\r\nimport './date-formatting'\r\nimport './models/event-source/config'\r\nimport './theme/config'\r\nimport './basic/config'\r\nimport './agenda/config'\r\nimport './list/config'\r\nimport './types/jquery-hooks'\r\n\r\n\r\n($ as any).fullCalendar = exportHooks\r\nexport = exportHooks\r\n\r\n\r\n$.fn.fullCalendar = function(options?): (JQuery | any) {\r\n  let args = Array.prototype.slice.call(arguments, 1) // for a possible method call\r\n  let res = this // what this function will return (this jQuery object by default)\r\n\r\n  this.each(function(i, _element) { // loop each DOM element involved\r\n    let element = $(_element)\r\n    let calendar = element.data('fullCalendar') // get the existing calendar object (if any)\r\n    let singleRes // the returned value of this single method call\r\n\r\n    // a method call\r\n    if (typeof options === 'string') {\r\n\r\n      if (options === 'getCalendar') {\r\n        if (!i) { // first element only\r\n          res = calendar\r\n        }\r\n      } else if (options === 'destroy') { // don't warn if no calendar object\r\n        if (calendar) {\r\n          calendar.destroy()\r\n          element.removeData('fullCalendar')\r\n        }\r\n      } else if (!calendar) {\r\n        warn('Attempting to call a FullCalendar method on an element with no calendar.')\r\n      } else if ($.isFunction(calendar[options])) {\r\n        singleRes = calendar[options].apply(calendar, args)\r\n\r\n        if (!i) {\r\n          res = singleRes // record the first method call result\r\n        }\r\n        if (options === 'destroy') { // for the destroy method, must remove Calendar object data\r\n          element.removeData('fullCalendar')\r\n        }\r\n      } else {\r\n        warn(\"'\" + options + \"' is an unknown FullCalendar method.\")\r\n      }\r\n    } else if (!calendar) { // don't initialize twice\r\n      calendar = new Calendar(element, options)\r\n      element.data('fullCalendar', calendar)\r\n      calendar.render()\r\n    }\r\n  })\r\n\r\n  return res\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import Model from '../common/Model'\r\n\r\nexport default class Component extends Model {\r\n\r\n  el: any\r\n\r\n\r\n  setElement(el) {\r\n    this.el = el\r\n    this.bindGlobalHandlers()\r\n    this.renderSkeleton()\r\n    this.set('isInDom', true)\r\n  }\r\n\r\n\r\n  removeElement() {\r\n    this.unset('isInDom')\r\n    this.unrenderSkeleton()\r\n    this.unbindGlobalHandlers()\r\n\r\n    this.el.remove()\r\n    // NOTE: don't null-out this.el in case the View was destroyed within an API callback.\r\n    // We don't null-out the View's other jQuery element references upon destroy,\r\n    //  so we shouldn't kill this.el either.\r\n  }\r\n\r\n\r\n  bindGlobalHandlers() {\r\n    // subclasses can override\r\n  }\r\n\r\n\r\n  unbindGlobalHandlers() {\r\n    // subclasses can override\r\n  }\r\n\r\n\r\n  /*\r\n  NOTE: Can't have a `render` method. Read the deprecation notice in View::executeDateRender\r\n  */\r\n\r\n\r\n  // Renders the basic structure of the view before any content is rendered\r\n  renderSkeleton() {\r\n    // subclasses should implement\r\n  }\r\n\r\n\r\n  // Unrenders the basic structure of the view\r\n  unrenderSkeleton() {\r\n    // subclasses should implement\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/Component.ts","\r\nexport default class Iterator {\r\n\r\n  items: any\r\n\r\n  constructor(items) {\r\n    this.items = items || []\r\n  }\r\n\r\n  /* Calls a method on every item passing the arguments through */\r\n  proxyCall(methodName, ...args) {\r\n    let results = []\r\n\r\n    this.items.forEach(function(item) {\r\n      results.push(item[methodName].apply(item, args))\r\n    })\r\n\r\n    return results\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Iterator.ts","import * as $ from 'jquery'\r\nimport { htmlEscape } from './util'\r\n\r\n\r\n/* Toolbar with buttons and title\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class Toolbar {\r\n\r\n  calendar: any\r\n  toolbarOptions: any\r\n  el: any = null // mirrors local `el`\r\n  viewsWithButtons: any = []\r\n\r\n\r\n  constructor(calendar, toolbarOptions) {\r\n    this.calendar = calendar\r\n    this.toolbarOptions = toolbarOptions\r\n  }\r\n\r\n\r\n  // method to update toolbar-specific options, not calendar-wide options\r\n  setToolbarOptions(newToolbarOptions) {\r\n    this.toolbarOptions = newToolbarOptions\r\n  }\r\n\r\n\r\n  // can be called repeatedly and will rerender\r\n  render() {\r\n    let sections = this.toolbarOptions.layout\r\n    let el = this.el\r\n    if (sections) {\r\n      if (!el) {\r\n        el = this.el = $(\"<div class='fc-toolbar \" + this.toolbarOptions.extraClasses + \"'/>\")\r\n      } else {\r\n        el.empty()\r\n      }\r\n      el.append(this.renderSection('left'))\r\n        .append(this.renderSection('right'))\r\n        .append(this.renderSection('center'))\r\n        .append('<div class=\"fc-clear\"/>')\r\n    } else {\r\n      this.removeElement()\r\n    }\r\n\r\n  }\r\n\r\n\r\n  removeElement() {\r\n    if (this.el) {\r\n      this.el.remove()\r\n      this.el = null\r\n    }\r\n  }\r\n\r\n\r\n  renderSection(position) {\r\n    let calendar = this.calendar\r\n    let theme = calendar.theme\r\n    let optionsManager = calendar.optionsManager\r\n    let viewSpecManager = calendar.viewSpecManager\r\n    let sectionEl = $('<div class=\"fc-' + position + '\"/>')\r\n    let buttonStr = this.toolbarOptions.layout[position]\r\n\r\n\r\n    let calendarCustomButtons = optionsManager.get('customButtons') || {}\r\n    let calendarButtonTextOverrides = optionsManager.overrides.buttonText || {}\r\n    let calendarButtonText = optionsManager.get('buttonText') || {}\r\n\r\n    if (buttonStr) {\r\n      $.each(buttonStr.split(' '), (i, buttonGroupStr) => {\r\n        let groupChildren = $()\r\n        let isOnlyButtons = true\r\n        let groupEl\r\n\r\n        $.each(buttonGroupStr.split(','), (j, buttonName) => {\r\n          let customButtonProps\r\n          let viewSpec\r\n          let buttonClick\r\n          let buttonIcon // only one of these will be set\r\n          let buttonText // \"\r\n          let buttonInnerHtml\r\n          let buttonClasses\r\n          let buttonEl\r\n          let buttonAriaAttr\r\n\r\n          if (buttonName === 'title') {\r\n            groupChildren = groupChildren.add($('<h2>&nbsp;</h2>')) // we always want it to take up height\r\n            isOnlyButtons = false\r\n          } else {\r\n\r\n            if ((customButtonProps = calendarCustomButtons[buttonName])) {\r\n              buttonClick = function (ev) {\r\n                if (customButtonProps.click) {\r\n                  customButtonProps.click.call(buttonEl[0], ev)\r\n                }\r\n              };\r\n              (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\r\n                (buttonIcon = theme.getIconClass(buttonName)) ||\r\n                (buttonText = customButtonProps.text)\r\n            } else if ((viewSpec = viewSpecManager.getViewSpec(buttonName))) {\r\n              this.viewsWithButtons.push(buttonName)\r\n              buttonClick = function () {\r\n                calendar.changeView(buttonName)\r\n              };\r\n              (buttonText = viewSpec.buttonTextOverride) ||\r\n                (buttonIcon = theme.getIconClass(buttonName)) ||\r\n                (buttonText = viewSpec.buttonTextDefault)\r\n            } else if (calendar[buttonName]) { // a calendar method\r\n              buttonClick = function () {\r\n                calendar[buttonName]()\r\n              };\r\n              (buttonText = calendarButtonTextOverrides[buttonName]) ||\r\n                (buttonIcon = theme.getIconClass(buttonName)) ||\r\n                (buttonText = calendarButtonText[buttonName])\r\n              //            ^ everything else is considered default\r\n            }\r\n\r\n            if (buttonClick) {\r\n\r\n              buttonClasses = [\r\n                'fc-' + buttonName + '-button',\r\n                theme.getClass('button'),\r\n                theme.getClass('stateDefault')\r\n              ]\r\n\r\n              if (buttonText) {\r\n                buttonInnerHtml = htmlEscape(buttonText)\r\n                buttonAriaAttr = ''\r\n              } else if (buttonIcon) {\r\n                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\"\r\n                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"'\r\n              }\r\n\r\n              buttonEl = $( // type=\"button\" so that it doesn't submit a form\r\n                '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\r\n                buttonAriaAttr +\r\n                '>' + buttonInnerHtml + '</button>'\r\n              )\r\n                .click(function (ev) {\r\n                  // don't process clicks for disabled buttons\r\n                  if (!buttonEl.hasClass(theme.getClass('stateDisabled'))) {\r\n\r\n                    buttonClick(ev)\r\n\r\n                    // after the click action, if the button becomes the \"active\" tab, or disabled,\r\n                    // it should never have a hover class, so remove it now.\r\n                    if (\r\n                      buttonEl.hasClass(theme.getClass('stateActive')) ||\r\n                      buttonEl.hasClass(theme.getClass('stateDisabled'))\r\n                    ) {\r\n                      buttonEl.removeClass(theme.getClass('stateHover'))\r\n                    }\r\n                  }\r\n                })\r\n                .mousedown(function () {\r\n                  // the *down* effect (mouse pressed in).\r\n                  // only on buttons that are not the \"active\" tab, or disabled\r\n                  buttonEl\r\n                    .not('.' + theme.getClass('stateActive'))\r\n                    .not('.' + theme.getClass('stateDisabled'))\r\n                    .addClass(theme.getClass('stateDown'))\r\n                })\r\n                .mouseup(function () {\r\n                  // undo the *down* effect\r\n                  buttonEl.removeClass(theme.getClass('stateDown'))\r\n                })\r\n                .hover(\r\n                  function () {\r\n                    // the *hover* effect.\r\n                    // only on buttons that are not the \"active\" tab, or disabled\r\n                    buttonEl\r\n                      .not('.' + theme.getClass('stateActive'))\r\n                      .not('.' + theme.getClass('stateDisabled'))\r\n                      .addClass(theme.getClass('stateHover'))\r\n                  },\r\n                  function () {\r\n                    // undo the *hover* effect\r\n                    buttonEl\r\n                      .removeClass(theme.getClass('stateHover'))\r\n                      .removeClass(theme.getClass('stateDown')) // if mouseleave happens before mouseup\r\n                  }\r\n                )\r\n\r\n              groupChildren = groupChildren.add(buttonEl)\r\n            }\r\n          }\r\n        })\r\n\r\n        if (isOnlyButtons) {\r\n          groupChildren\r\n            .first().addClass(theme.getClass('cornerLeft')).end()\r\n            .last().addClass(theme.getClass('cornerRight')).end()\r\n        }\r\n\r\n        if (groupChildren.length > 1) {\r\n          groupEl = $('<div/>')\r\n          if (isOnlyButtons) {\r\n            groupEl.addClass(theme.getClass('buttonGroup'))\r\n          }\r\n          groupEl.append(groupChildren)\r\n          sectionEl.append(groupEl)\r\n        } else {\r\n          sectionEl.append(groupChildren) // 1 or 0 children\r\n        }\r\n      })\r\n    }\r\n\r\n    return sectionEl\r\n  }\r\n\r\n\r\n  updateTitle(text) {\r\n    console.log(this.toolbarOptions)\r\n    console.log(this.calendar)\r\n    console.log(this.calendar.optionsManager.overrides.locale)\r\n    if (this.calendar.optionsManager.overrides.locale === 'th') {\r\n      let year = text.match(/\\d{4}/)\r\n      if (year) {\r\n        // tslint:disable-next-line:radix\r\n        let BEYear = parseInt(year[0]) + 543\r\n        text = text.replace(year[0], BEYear)\r\n\r\n      }\r\n    }\r\n    console.log(\"text\", text)\r\n    if (this.el) {\r\n      this.el.find('h2').text(text)\r\n    }\r\n  }\r\n\r\n\r\n  activateButton(buttonName) {\r\n    if (this.el) {\r\n      this.el.find('.fc-' + buttonName + '-button')\r\n        .addClass(this.calendar.theme.getClass('stateActive'))\r\n    }\r\n  }\r\n\r\n\r\n  deactivateButton(buttonName) {\r\n    if (this.el) {\r\n      this.el.find('.fc-' + buttonName + '-button')\r\n        .removeClass(this.calendar.theme.getClass('stateActive'))\r\n    }\r\n  }\r\n\r\n\r\n  disableButton(buttonName) {\r\n    if (this.el) {\r\n      this.el.find('.fc-' + buttonName + '-button')\r\n        .prop('disabled', true)\r\n        .addClass(this.calendar.theme.getClass('stateDisabled'))\r\n    }\r\n  }\r\n\r\n\r\n  enableButton(buttonName) {\r\n    if (this.el) {\r\n      this.el.find('.fc-' + buttonName + '-button')\r\n        .prop('disabled', false)\r\n        .removeClass(this.calendar.theme.getClass('stateDisabled'))\r\n    }\r\n  }\r\n\r\n\r\n  getViewsWithButtons() {\r\n    return this.viewsWithButtons\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Toolbar.ts","import * as $ from 'jquery'\r\nimport { firstDefined } from './util'\r\nimport { globalDefaults, rtlDefaults, mergeOptions } from './options'\r\nimport { localeOptionHash, populateInstanceComputableOptions } from './locale'\r\nimport Model from './common/Model'\r\n\r\n\r\nexport default class OptionsManager extends Model {\r\n\r\n  _calendar: any // avoid\r\n  dirDefaults: any // option defaults related to LTR or RTL\r\n  localeDefaults: any // option defaults related to current locale\r\n  overrides: any // option overrides given to the fullCalendar constructor\r\n  dynamicOverrides: any // options set with dynamic setter method. higher precedence than view overrides.\r\n\r\n\r\n  constructor(_calendar, overrides) {\r\n    super()\r\n    this._calendar = _calendar\r\n    this.overrides = $.extend({}, overrides) // make a copy\r\n    this.dynamicOverrides = {}\r\n    this.compute()\r\n  }\r\n\r\n\r\n  add(newOptionHash) {\r\n    let optionCnt = 0\r\n    let optionName\r\n\r\n    this.recordOverrides(newOptionHash) // will trigger this model's watchers\r\n\r\n    for (optionName in newOptionHash) {\r\n      optionCnt++\r\n    }\r\n\r\n    // special-case handling of single option change.\r\n    // if only one option change, `optionName` will be its name.\r\n    if (optionCnt === 1) {\r\n      if (optionName === 'height' || optionName === 'contentHeight' || optionName === 'aspectRatio') {\r\n        this._calendar.updateViewSize(true) // isResize=true\r\n        return\r\n      } else if (optionName === 'defaultDate') {\r\n        return // can't change date this way. use gotoDate instead\r\n      } else if (optionName === 'businessHours') {\r\n        return // this model already reacts to this\r\n      } else if (/^(event|select)(Overlap|Constraint|Allow)$/.test(optionName)) {\r\n        return // doesn't affect rendering. only interactions.\r\n      } else if (optionName === 'timezone') {\r\n        this._calendar.view.flash('initialEvents')\r\n        return\r\n      }\r\n    }\r\n\r\n    // catch-all. rerender the header and footer and rebuild/rerender the current view\r\n    this._calendar.renderHeader()\r\n    this._calendar.renderFooter()\r\n\r\n    // even non-current views will be affected by this option change. do before rerender\r\n    // TODO: detangle\r\n    this._calendar.viewsByType = {}\r\n\r\n    this._calendar.reinitView()\r\n  }\r\n\r\n\r\n  // Computes the flattened options hash for the calendar and assigns to `this.options`.\r\n  // Assumes this.overrides and this.dynamicOverrides have already been initialized.\r\n  compute() {\r\n    let locale\r\n    let localeDefaults\r\n    let isRTL\r\n    let dirDefaults\r\n    let rawOptions\r\n\r\n    locale = firstDefined( // explicit locale option given?\r\n      this.dynamicOverrides.locale,\r\n      this.overrides.locale\r\n    )\r\n    localeDefaults = localeOptionHash[locale]\r\n    if (!localeDefaults) { // explicit locale option not given or invalid?\r\n      locale = globalDefaults.locale\r\n      localeDefaults = localeOptionHash[locale] || {}\r\n    }\r\n\r\n    isRTL = firstDefined( // based on options computed so far, is direction RTL?\r\n      this.dynamicOverrides.isRTL,\r\n      this.overrides.isRTL,\r\n      localeDefaults.isRTL,\r\n      globalDefaults.isRTL\r\n    )\r\n    dirDefaults = isRTL ? rtlDefaults : {}\r\n\r\n    this.dirDefaults = dirDefaults\r\n    this.localeDefaults = localeDefaults\r\n\r\n    rawOptions = mergeOptions([ // merge defaults and overrides. lowest to highest precedence\r\n      globalDefaults, // global defaults\r\n      dirDefaults,\r\n      localeDefaults,\r\n      this.overrides,\r\n      this.dynamicOverrides\r\n    ])\r\n    populateInstanceComputableOptions(rawOptions) // fill in gaps with computed options\r\n\r\n    this.reset(rawOptions)\r\n  }\r\n\r\n\r\n  // stores the new options internally, but does not rerender anything.\r\n  recordOverrides(newOptionHash) {\r\n    let optionName\r\n\r\n    for (optionName in newOptionHash) {\r\n      this.dynamicOverrides[optionName] = newOptionHash[optionName]\r\n    }\r\n\r\n    this._calendar.viewSpecManager.clearCache() // the dynamic override invalidates the options in this cache, so just clear it\r\n    this.compute() // this.options needs to be recomputed after the dynamic override\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/OptionsManager.ts","import * as moment from 'moment'\r\nimport * as $ from 'jquery'\r\nimport { viewHash } from './ViewRegistry'\r\nimport { mergeProps, unitsDesc, computeDurationGreatestUnit } from './util'\r\nimport { mergeOptions, globalDefaults } from './options'\r\nimport { populateInstanceComputableOptions } from './locale'\r\n\r\n\r\nexport default class ViewSpecManager {\r\n\r\n  _calendar: any // avoid\r\n  optionsManager: any\r\n  viewSpecCache: any // cache of view definitions (initialized in Calendar.js)\r\n\r\n\r\n  constructor(optionsManager, _calendar) {\r\n    this.optionsManager = optionsManager\r\n    this._calendar = _calendar\r\n\r\n    this.clearCache()\r\n  }\r\n\r\n\r\n  clearCache() {\r\n    this.viewSpecCache = {}\r\n  }\r\n\r\n\r\n  // Gets information about how to create a view. Will use a cache.\r\n  getViewSpec(viewType) {\r\n    let cache = this.viewSpecCache\r\n\r\n    return cache[viewType] || (cache[viewType] = this.buildViewSpec(viewType))\r\n  }\r\n\r\n\r\n  // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\r\n  // Preference is given to views that have corresponding buttons.\r\n  getUnitViewSpec(unit) {\r\n    let viewTypes\r\n    let i\r\n    let spec\r\n\r\n    if ($.inArray(unit, unitsDesc) !== -1) {\r\n\r\n      // put views that have buttons first. there will be duplicates, but oh well\r\n      viewTypes = this._calendar.header.getViewsWithButtons() // TODO: include footer as well?\r\n      $.each(viewHash, function(viewType) { // all views\r\n        viewTypes.push(viewType)\r\n      })\r\n\r\n      for (i = 0; i < viewTypes.length; i++) {\r\n        spec = this.getViewSpec(viewTypes[i])\r\n        if (spec) {\r\n          if (spec.singleUnit === unit) {\r\n            return spec\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Builds an object with information on how to create a given view\r\n  buildViewSpec(requestedViewType) {\r\n    let viewOverrides = this.optionsManager.overrides.views || {}\r\n    let specChain = [] // for the view. lowest to highest priority\r\n    let defaultsChain = [] // for the view. lowest to highest priority\r\n    let overridesChain = [] // for the view. lowest to highest priority\r\n    let viewType = requestedViewType\r\n    let spec // for the view\r\n    let overrides // for the view\r\n    let durationInput\r\n    let duration\r\n    let unit\r\n\r\n    // iterate from the specific view definition to a more general one until we hit an actual View class\r\n    while (viewType) {\r\n      spec = viewHash[viewType]\r\n      overrides = viewOverrides[viewType]\r\n      viewType = null // clear. might repopulate for another iteration\r\n\r\n      if (typeof spec === 'function') { // TODO: deprecate\r\n        spec = { 'class': spec }\r\n      }\r\n\r\n      if (spec) {\r\n        specChain.unshift(spec)\r\n        defaultsChain.unshift(spec.defaults || {})\r\n        durationInput = durationInput || spec.duration\r\n        viewType = viewType || spec.type\r\n      }\r\n\r\n      if (overrides) {\r\n        overridesChain.unshift(overrides) // view-specific option hashes have options at zero-level\r\n        durationInput = durationInput || overrides.duration\r\n        viewType = viewType || overrides.type\r\n      }\r\n    }\r\n\r\n    spec = mergeProps(specChain)\r\n    spec.type = requestedViewType\r\n    if (!spec['class']) {\r\n      return false\r\n    }\r\n\r\n    // fall back to top-level `duration` option\r\n    durationInput = durationInput ||\r\n      this.optionsManager.dynamicOverrides.duration ||\r\n      this.optionsManager.overrides.duration\r\n\r\n    if (durationInput) {\r\n      duration = moment.duration(durationInput)\r\n\r\n      if (duration.valueOf()) { // valid?\r\n\r\n        unit = computeDurationGreatestUnit(duration, durationInput)\r\n\r\n        spec.duration = duration\r\n        spec.durationUnit = unit\r\n\r\n        // view is a single-unit duration, like \"week\" or \"day\"\r\n        // incorporate options for this. lowest priority\r\n        if (duration.as(unit) === 1) {\r\n          spec.singleUnit = unit\r\n          overridesChain.unshift(viewOverrides[unit] || {})\r\n        }\r\n      }\r\n    }\r\n\r\n    spec.defaults = mergeOptions(defaultsChain)\r\n    spec.overrides = mergeOptions(overridesChain)\r\n\r\n    this.buildViewSpecOptions(spec)\r\n    this.buildViewSpecButtonText(spec, requestedViewType)\r\n\r\n    return spec\r\n  }\r\n\r\n\r\n  // Builds and assigns a view spec's options object from its already-assigned defaults and overrides\r\n  buildViewSpecOptions(spec) {\r\n    let optionsManager = this.optionsManager\r\n\r\n    spec.options = mergeOptions([ // lowest to highest priority\r\n      globalDefaults,\r\n      spec.defaults, // view's defaults (from ViewSubclass.defaults)\r\n      optionsManager.dirDefaults,\r\n      optionsManager.localeDefaults, // locale and dir take precedence over view's defaults!\r\n      optionsManager.overrides, // calendar's overrides (options given to constructor)\r\n      spec.overrides, // view's overrides (view-specific options)\r\n      optionsManager.dynamicOverrides // dynamically set via setter. highest precedence\r\n    ])\r\n    populateInstanceComputableOptions(spec.options)\r\n  }\r\n\r\n\r\n  // Computes and assigns a view spec's buttonText-related options\r\n  buildViewSpecButtonText(spec, requestedViewType) {\r\n    let optionsManager = this.optionsManager\r\n\r\n    // given an options object with a possible `buttonText` hash, lookup the buttonText for the\r\n    // requested view, falling back to a generic unit entry like \"week\" or \"day\"\r\n    function queryButtonText(options) {\r\n      let buttonText = options.buttonText || {}\r\n      return buttonText[requestedViewType] ||\r\n        // view can decide to look up a certain key\r\n        (spec.buttonTextKey ? buttonText[spec.buttonTextKey] : null) ||\r\n        // a key like \"month\"\r\n        (spec.singleUnit ? buttonText[spec.singleUnit] : null)\r\n    }\r\n\r\n    // highest to lowest priority\r\n    spec.buttonTextOverride =\r\n      queryButtonText(optionsManager.dynamicOverrides) ||\r\n      queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\r\n      spec.overrides.buttonText // `buttonText` for view-specific options is a string\r\n\r\n    // highest to lowest priority. mirrors buildViewSpecOptions\r\n    spec.buttonTextDefault =\r\n      queryButtonText(optionsManager.localeDefaults) ||\r\n      queryButtonText(optionsManager.dirDefaults) ||\r\n      spec.defaults.buttonText || // a single string. from ViewSubclass.defaults\r\n      queryButtonText(globalDefaults) ||\r\n      (spec.duration ? this._calendar.humanizeDuration(spec.duration) : null) || // like \"3 days\"\r\n      requestedViewType // fall back to given view name\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ViewSpecManager.ts","import * as $ from 'jquery'\r\nimport { removeExact } from '../util'\r\nimport EventPeriod from './EventPeriod'\r\nimport ArrayEventSource from './event-source/ArrayEventSource'\r\nimport EventSource from './event-source/EventSource'\r\nimport EventSourceParser from './event-source/EventSourceParser'\r\nimport SingleEventDef from './event/SingleEventDef'\r\nimport EventInstanceGroup from './event/EventInstanceGroup'\r\nimport { default as EmitterMixin, EmitterInterface } from '../common/EmitterMixin'\r\nimport { default as ListenerMixin, ListenerInterface } from '../common/ListenerMixin'\r\n\r\n\r\nexport default class EventManager {\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  currentPeriod: any\r\n\r\n  calendar: any\r\n  stickySource: any\r\n  otherSources: any // does not include sticky source\r\n\r\n\r\n  constructor(calendar) {\r\n    this.calendar = calendar\r\n    this.stickySource = new ArrayEventSource(calendar)\r\n    this.otherSources = []\r\n  }\r\n\r\n\r\n  requestEvents(start, end, timezone, force) {\r\n    if (\r\n      force ||\r\n      !this.currentPeriod ||\r\n      !this.currentPeriod.isWithinRange(start, end) ||\r\n      timezone !== this.currentPeriod.timezone\r\n    ) {\r\n      this.setPeriod( // will change this.currentPeriod\r\n        new EventPeriod(start, end, timezone)\r\n      )\r\n    }\r\n\r\n    return this.currentPeriod.whenReleased()\r\n  }\r\n\r\n\r\n  // Source Adding/Removing\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  addSource(eventSource) {\r\n    this.otherSources.push(eventSource)\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.requestSource(eventSource) // might release\r\n    }\r\n  }\r\n\r\n\r\n  removeSource(doomedSource) {\r\n    removeExact(this.otherSources, doomedSource)\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.purgeSource(doomedSource) // might release\r\n    }\r\n  }\r\n\r\n\r\n  removeAllSources() {\r\n    this.otherSources = []\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.purgeAllSources() // might release\r\n    }\r\n  }\r\n\r\n\r\n  // Source Refetching\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  refetchSource(eventSource) {\r\n    let currentPeriod = this.currentPeriod\r\n\r\n    if (currentPeriod) {\r\n      currentPeriod.freeze()\r\n      currentPeriod.purgeSource(eventSource)\r\n      currentPeriod.requestSource(eventSource)\r\n      currentPeriod.thaw()\r\n    }\r\n  }\r\n\r\n\r\n  refetchAllSources() {\r\n    let currentPeriod = this.currentPeriod\r\n\r\n    if (currentPeriod) {\r\n      currentPeriod.freeze()\r\n      currentPeriod.purgeAllSources()\r\n      currentPeriod.requestSources(this.getSources())\r\n      currentPeriod.thaw()\r\n    }\r\n  }\r\n\r\n\r\n  // Source Querying\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  getSources() {\r\n    return [ this.stickySource ].concat(this.otherSources)\r\n  }\r\n\r\n\r\n  // like querySources, but accepts multple match criteria (like multiple IDs)\r\n  multiQuerySources(matchInputs) {\r\n\r\n    // coerce into an array\r\n    if (!matchInputs) {\r\n      matchInputs = []\r\n    } else if (!$.isArray(matchInputs)) {\r\n      matchInputs = [ matchInputs ]\r\n    }\r\n\r\n    let matchingSources = []\r\n    let i\r\n\r\n    // resolve raw inputs to real event source objects\r\n    for (i = 0; i < matchInputs.length; i++) {\r\n      matchingSources.push.apply( // append\r\n        matchingSources,\r\n        this.querySources(matchInputs[i])\r\n      )\r\n    }\r\n\r\n    return matchingSources\r\n  }\r\n\r\n\r\n  // matchInput can either by a real event source object, an ID, or the function/URL for the source.\r\n  // returns an array of matching source objects.\r\n  querySources(matchInput) {\r\n    let sources = this.otherSources\r\n    let i\r\n    let source\r\n\r\n    // given a proper event source object\r\n    for (i = 0; i < sources.length; i++) {\r\n      source = sources[i]\r\n\r\n      if (source === matchInput) {\r\n        return [ source ]\r\n      }\r\n    }\r\n\r\n    // an ID match\r\n    source = this.getSourceById(EventSource.normalizeId(matchInput))\r\n    if (source) {\r\n      return [ source ]\r\n    }\r\n\r\n    // parse as an event source\r\n    matchInput = EventSourceParser.parse(matchInput, this.calendar)\r\n    if (matchInput) {\r\n\r\n      return $.grep(sources, function(source) {\r\n        return isSourcesEquivalent(matchInput, source)\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  /*\r\n  ID assumed to already be normalized\r\n  */\r\n  getSourceById(id) {\r\n    return $.grep(this.otherSources, function(source: any) {\r\n      return source.id && source.id === id\r\n    })[0]\r\n  }\r\n\r\n\r\n  // Event-Period\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  setPeriod(eventPeriod) {\r\n    if (this.currentPeriod) {\r\n      this.unbindPeriod(this.currentPeriod)\r\n      this.currentPeriod = null\r\n    }\r\n\r\n    this.currentPeriod = eventPeriod\r\n    this.bindPeriod(eventPeriod)\r\n\r\n    eventPeriod.requestSources(this.getSources())\r\n  }\r\n\r\n\r\n  bindPeriod(eventPeriod) {\r\n    this.listenTo(eventPeriod, 'release', function(eventsPayload) {\r\n      this.trigger('release', eventsPayload)\r\n    })\r\n  }\r\n\r\n\r\n  unbindPeriod(eventPeriod) {\r\n    this.stopListeningTo(eventPeriod)\r\n  }\r\n\r\n\r\n  // Event Getting/Adding/Removing\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  getEventDefByUid(uid) {\r\n    if (this.currentPeriod) {\r\n      return this.currentPeriod.getEventDefByUid(uid)\r\n    }\r\n  }\r\n\r\n\r\n  addEventDef(eventDef, isSticky) {\r\n    if (isSticky) {\r\n      this.stickySource.addEventDef(eventDef)\r\n    }\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.addEventDef(eventDef) // might release\r\n    }\r\n  }\r\n\r\n\r\n  removeEventDefsById(eventId) {\r\n    this.getSources().forEach(function(eventSource) {\r\n      eventSource.removeEventDefsById(eventId)\r\n    })\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.removeEventDefsById(eventId) // might release\r\n    }\r\n  }\r\n\r\n\r\n  removeAllEventDefs() {\r\n    this.getSources().forEach(function(eventSource) {\r\n      eventSource.removeAllEventDefs()\r\n    })\r\n\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.removeAllEventDefs()\r\n    }\r\n  }\r\n\r\n\r\n  // Event Mutating\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  /*\r\n  Returns an undo function.\r\n  */\r\n  mutateEventsWithId(eventDefId, eventDefMutation) {\r\n    let currentPeriod = this.currentPeriod\r\n    let eventDefs\r\n    let undoFuncs = []\r\n\r\n    if (currentPeriod) {\r\n\r\n      currentPeriod.freeze()\r\n\r\n      eventDefs = currentPeriod.getEventDefsById(eventDefId)\r\n      eventDefs.forEach(function(eventDef) {\r\n        // add/remove esp because id might change\r\n        currentPeriod.removeEventDef(eventDef)\r\n        undoFuncs.push(eventDefMutation.mutateSingle(eventDef))\r\n        currentPeriod.addEventDef(eventDef)\r\n      })\r\n\r\n      currentPeriod.thaw()\r\n\r\n      return function() {\r\n        currentPeriod.freeze()\r\n\r\n        for (let i = 0; i < eventDefs.length; i++) {\r\n          currentPeriod.removeEventDef(eventDefs[i])\r\n          undoFuncs[i]()\r\n          currentPeriod.addEventDef(eventDefs[i])\r\n        }\r\n\r\n        currentPeriod.thaw()\r\n      }\r\n    }\r\n\r\n    return function() { /* nothing to undo */ }\r\n  }\r\n\r\n\r\n  /*\r\n  copies and then mutates\r\n  */\r\n  buildMutatedEventInstanceGroup(eventDefId, eventDefMutation) {\r\n    let eventDefs = this.getEventDefsById(eventDefId)\r\n    let i\r\n    let defCopy\r\n    let allInstances = []\r\n\r\n    for (i = 0; i < eventDefs.length; i++) {\r\n      defCopy = eventDefs[i].clone()\r\n\r\n      if (defCopy instanceof SingleEventDef) {\r\n        eventDefMutation.mutateSingle(defCopy)\r\n\r\n        allInstances.push.apply(allInstances, // append\r\n          defCopy.buildInstances()\r\n        )\r\n      }\r\n    }\r\n\r\n    return new EventInstanceGroup(allInstances)\r\n  }\r\n\r\n\r\n  // Freezing\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  freeze() {\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.freeze()\r\n    }\r\n  }\r\n\r\n\r\n  thaw() {\r\n    if (this.currentPeriod) {\r\n      this.currentPeriod.thaw()\r\n    }\r\n  }\r\n\r\n\r\n  // methods that simply forward to EventPeriod\r\n\r\n  getEventDefsById(eventDefId) {\r\n    return this.currentPeriod.getEventDefsById(eventDefId)\r\n  }\r\n\r\n  getEventInstances() {\r\n    return this.currentPeriod.getEventInstances()\r\n  }\r\n\r\n  getEventInstancesWithId(eventDefId) {\r\n    return this.currentPeriod.getEventInstancesWithId(eventDefId)\r\n  }\r\n\r\n  getEventInstancesWithoutId(eventDefId) {\r\n    return this.currentPeriod.getEventInstancesWithoutId(eventDefId)\r\n  }\r\n\r\n}\r\n\r\n\r\nEmitterMixin.mixInto(EventManager)\r\nListenerMixin.mixInto(EventManager)\r\n\r\n\r\nfunction isSourcesEquivalent(source0, source1) {\r\n  return source0.getPrimitive() === source1.getPrimitive()\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/EventManager.ts","import * as $ from 'jquery'\r\nimport * as moment from 'moment'\r\nimport { removeExact, removeMatching } from '../util'\r\nimport Promise from '../common/Promise'\r\nimport { default as EmitterMixin, EmitterInterface } from '../common/EmitterMixin'\r\nimport UnzonedRange from './UnzonedRange'\r\nimport EventInstanceGroup from './event/EventInstanceGroup'\r\n\r\n\r\nexport default class EventPeriod {\r\n\r\n  on: EmitterInterface['on']\r\n  one: EmitterInterface['one']\r\n  off: EmitterInterface['off']\r\n  trigger: EmitterInterface['trigger']\r\n  triggerWith: EmitterInterface['triggerWith']\r\n  hasHandlers: EmitterInterface['hasHandlers']\r\n\r\n  start: moment.Moment\r\n  end: moment.Moment\r\n  timezone: any\r\n\r\n  unzonedRange: UnzonedRange\r\n\r\n  requestsByUid: any\r\n  pendingCnt: number = 0\r\n\r\n  freezeDepth: number = 0\r\n  stuntedReleaseCnt: number = 0\r\n  releaseCnt: number = 0\r\n\r\n  eventDefsByUid: any\r\n  eventDefsById: any\r\n  eventInstanceGroupsById: any\r\n\r\n\r\n  constructor(start, end, timezone) {\r\n    this.start = start\r\n    this.end = end\r\n    this.timezone = timezone\r\n\r\n    this.unzonedRange = new UnzonedRange(\r\n      start.clone().stripZone(),\r\n      end.clone().stripZone()\r\n    )\r\n\r\n    this.requestsByUid = {}\r\n    this.eventDefsByUid = {}\r\n    this.eventDefsById = {}\r\n    this.eventInstanceGroupsById = {}\r\n  }\r\n\r\n\r\n  isWithinRange(start, end) {\r\n    // TODO: use a range util function?\r\n    return !start.isBefore(this.start) && !end.isAfter(this.end)\r\n  }\r\n\r\n\r\n  // Requesting and Purging\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  requestSources(sources) {\r\n    this.freeze()\r\n\r\n    for (let i = 0; i < sources.length; i++) {\r\n      this.requestSource(sources[i])\r\n    }\r\n\r\n    this.thaw()\r\n  }\r\n\r\n\r\n  requestSource(source) {\r\n    let request = { source: source, status: 'pending', eventDefs: null }\r\n\r\n    this.requestsByUid[source.uid] = request\r\n    this.pendingCnt += 1\r\n\r\n    source.fetch(this.start, this.end, this.timezone).then((eventDefs) => {\r\n      if (request.status !== 'cancelled') {\r\n        request.status = 'completed'\r\n        request.eventDefs = eventDefs\r\n\r\n        this.addEventDefs(eventDefs)\r\n        this.pendingCnt--\r\n        this.tryRelease()\r\n      }\r\n    }, () => { // failure\r\n      if (request.status !== 'cancelled') {\r\n        request.status = 'failed'\r\n\r\n        this.pendingCnt--\r\n        this.tryRelease()\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  purgeSource(source) {\r\n    let request = this.requestsByUid[source.uid]\r\n\r\n    if (request) {\r\n      delete this.requestsByUid[source.uid]\r\n\r\n      if (request.status === 'pending') {\r\n        request.status = 'cancelled'\r\n        this.pendingCnt--\r\n        this.tryRelease()\r\n      } else if (request.status === 'completed') {\r\n        request.eventDefs.forEach(this.removeEventDef.bind(this))\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  purgeAllSources() {\r\n    let requestsByUid = this.requestsByUid\r\n    let uid\r\n    let request\r\n    let completedCnt = 0\r\n\r\n    for (uid in requestsByUid) {\r\n      request = requestsByUid[uid]\r\n\r\n      if (request.status === 'pending') {\r\n        request.status = 'cancelled'\r\n      } else if (request.status === 'completed') {\r\n        completedCnt++\r\n      }\r\n    }\r\n\r\n    this.requestsByUid = {}\r\n    this.pendingCnt = 0\r\n\r\n    if (completedCnt) {\r\n      this.removeAllEventDefs() // might release\r\n    }\r\n  }\r\n\r\n\r\n  // Event Definitions\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  getEventDefByUid(eventDefUid) {\r\n    return this.eventDefsByUid[eventDefUid]\r\n  }\r\n\r\n\r\n  getEventDefsById(eventDefId) {\r\n    let a = this.eventDefsById[eventDefId]\r\n\r\n    if (a) {\r\n      return a.slice() // clone\r\n    }\r\n\r\n    return []\r\n  }\r\n\r\n\r\n  addEventDefs(eventDefs) {\r\n    for (let i = 0; i < eventDefs.length; i++) {\r\n      this.addEventDef(eventDefs[i])\r\n    }\r\n  }\r\n\r\n\r\n  addEventDef(eventDef) {\r\n    let eventDefsById = this.eventDefsById\r\n    let eventDefId = eventDef.id\r\n    let eventDefs = eventDefsById[eventDefId] || (eventDefsById[eventDefId] = [])\r\n    let eventInstances = eventDef.buildInstances(this.unzonedRange)\r\n    let i\r\n\r\n    eventDefs.push(eventDef)\r\n\r\n    this.eventDefsByUid[eventDef.uid] = eventDef\r\n\r\n    for (i = 0; i < eventInstances.length; i++) {\r\n      this.addEventInstance(eventInstances[i], eventDefId)\r\n    }\r\n  }\r\n\r\n\r\n  removeEventDefsById(eventDefId) {\r\n    this.getEventDefsById(eventDefId).forEach((eventDef) => {\r\n      this.removeEventDef(eventDef)\r\n    })\r\n  }\r\n\r\n\r\n  removeAllEventDefs() {\r\n    let isEmpty = $.isEmptyObject(this.eventDefsByUid)\r\n\r\n    this.eventDefsByUid = {}\r\n    this.eventDefsById = {}\r\n    this.eventInstanceGroupsById = {}\r\n\r\n    if (!isEmpty) {\r\n      this.tryRelease()\r\n    }\r\n  }\r\n\r\n\r\n  removeEventDef(eventDef) {\r\n    let eventDefsById = this.eventDefsById\r\n    let eventDefs = eventDefsById[eventDef.id]\r\n\r\n    delete this.eventDefsByUid[eventDef.uid]\r\n\r\n    if (eventDefs) {\r\n      removeExact(eventDefs, eventDef)\r\n\r\n      if (!eventDefs.length) {\r\n        delete eventDefsById[eventDef.id]\r\n      }\r\n\r\n      this.removeEventInstancesForDef(eventDef)\r\n    }\r\n  }\r\n\r\n\r\n  // Event Instances\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  getEventInstances() { // TODO: consider iterator\r\n    let eventInstanceGroupsById = this.eventInstanceGroupsById\r\n    let eventInstances = []\r\n    let id\r\n\r\n    for (id in eventInstanceGroupsById) {\r\n      eventInstances.push.apply(eventInstances, // append\r\n        eventInstanceGroupsById[id].eventInstances\r\n      )\r\n    }\r\n\r\n    return eventInstances\r\n  }\r\n\r\n\r\n  getEventInstancesWithId(eventDefId) {\r\n    let eventInstanceGroup = this.eventInstanceGroupsById[eventDefId]\r\n\r\n    if (eventInstanceGroup) {\r\n      return eventInstanceGroup.eventInstances.slice() // clone\r\n    }\r\n\r\n    return []\r\n  }\r\n\r\n\r\n  getEventInstancesWithoutId(eventDefId) { // TODO: consider iterator\r\n    let eventInstanceGroupsById = this.eventInstanceGroupsById\r\n    let matchingInstances = []\r\n    let id\r\n\r\n    for (id in eventInstanceGroupsById) {\r\n      if (id !== eventDefId) {\r\n        matchingInstances.push.apply(matchingInstances, // append\r\n          eventInstanceGroupsById[id].eventInstances\r\n        )\r\n      }\r\n    }\r\n\r\n    return matchingInstances\r\n  }\r\n\r\n\r\n  addEventInstance(eventInstance, eventDefId) {\r\n    let eventInstanceGroupsById = this.eventInstanceGroupsById\r\n    let eventInstanceGroup = eventInstanceGroupsById[eventDefId] ||\r\n      (eventInstanceGroupsById[eventDefId] = new EventInstanceGroup())\r\n\r\n    eventInstanceGroup.eventInstances.push(eventInstance)\r\n\r\n    this.tryRelease()\r\n  }\r\n\r\n\r\n  removeEventInstancesForDef(eventDef) {\r\n    let eventInstanceGroupsById = this.eventInstanceGroupsById\r\n    let eventInstanceGroup = eventInstanceGroupsById[eventDef.id]\r\n    let removeCnt\r\n\r\n    if (eventInstanceGroup) {\r\n      removeCnt = removeMatching(eventInstanceGroup.eventInstances, function(currentEventInstance) {\r\n        return currentEventInstance.def === eventDef\r\n      })\r\n\r\n      if (!eventInstanceGroup.eventInstances.length) {\r\n        delete eventInstanceGroupsById[eventDef.id]\r\n      }\r\n\r\n      if (removeCnt) {\r\n        this.tryRelease()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Releasing and Freezing\r\n  // -----------------------------------------------------------------------------------------------------------------\r\n\r\n\r\n  tryRelease() {\r\n    if (!this.pendingCnt) {\r\n      if (!this.freezeDepth) {\r\n        this.release()\r\n      } else {\r\n        this.stuntedReleaseCnt++\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  release() {\r\n    this.releaseCnt++\r\n    this.trigger('release', this.eventInstanceGroupsById)\r\n  }\r\n\r\n\r\n  whenReleased() {\r\n    if (this.releaseCnt) {\r\n      return Promise.resolve(this.eventInstanceGroupsById)\r\n    } else {\r\n      return Promise.construct((onResolve) => {\r\n        this.one('release', onResolve)\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  freeze() {\r\n    if (!(this.freezeDepth++)) {\r\n      this.stuntedReleaseCnt = 0\r\n    }\r\n  }\r\n\r\n\r\n  thaw() {\r\n    if (!(--this.freezeDepth) && this.stuntedReleaseCnt && !this.pendingCnt) {\r\n      this.release()\r\n    }\r\n  }\r\n\r\n}\r\n\r\nEmitterMixin.mixInto(EventPeriod)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/EventPeriod.ts","import * as $ from 'jquery'\r\nimport {\r\n  getEvY,\r\n  getEvX,\r\n  getEvIsTouch\r\n} from '../util'\r\nimport { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\n\r\n/* Creates a clone of an element and lets it track the mouse as it moves\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class MouseFollower {\r\n\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  options: any\r\n\r\n  sourceEl: any // the element that will be cloned and made to look like it is dragging\r\n  el: any // the clone of `sourceEl` that will track the mouse\r\n  parentEl: any // the element that `el` (the clone) will be attached to\r\n\r\n  // the initial position of el, relative to the offset parent. made to match the initial offset of sourceEl\r\n  top0: any\r\n  left0: any\r\n\r\n  // the absolute coordinates of the initiating touch/mouse action\r\n  y0: any\r\n  x0: any\r\n\r\n  // the number of pixels the mouse has moved from its initial position\r\n  topDelta: any\r\n  leftDelta: any\r\n\r\n  isFollowing: boolean = false\r\n  isHidden: boolean = false\r\n  isAnimating: boolean = false // doing the revert animation?\r\n\r\n\r\n  constructor(sourceEl, options) {\r\n    this.options = options = options || {}\r\n    this.sourceEl = sourceEl\r\n    this.parentEl = options.parentEl ? $(options.parentEl) : sourceEl.parent() // default to sourceEl's parent\r\n  }\r\n\r\n\r\n  // Causes the element to start following the mouse\r\n  start(ev) {\r\n    if (!this.isFollowing) {\r\n      this.isFollowing = true\r\n\r\n      this.y0 = getEvY(ev)\r\n      this.x0 = getEvX(ev)\r\n      this.topDelta = 0\r\n      this.leftDelta = 0\r\n\r\n      if (!this.isHidden) {\r\n        this.updatePosition()\r\n      }\r\n\r\n      if (getEvIsTouch(ev)) {\r\n        this.listenTo($(document), 'touchmove', this.handleMove)\r\n      } else {\r\n        this.listenTo($(document), 'mousemove', this.handleMove)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Causes the element to stop following the mouse. If shouldRevert is true, will animate back to original position.\r\n  // `callback` gets invoked when the animation is complete. If no animation, it is invoked immediately.\r\n  stop(shouldRevert, callback) {\r\n    let revertDuration = this.options.revertDuration\r\n\r\n    const complete = () => { // might be called by .animate(), which might change `this` context\r\n      this.isAnimating = false\r\n      this.removeElement()\r\n\r\n      this.top0 = this.left0 = null // reset state for future updatePosition calls\r\n\r\n      if (callback) {\r\n        callback()\r\n      }\r\n    }\r\n\r\n    if (this.isFollowing && !this.isAnimating) { // disallow more than one stop animation at a time\r\n      this.isFollowing = false\r\n\r\n      this.stopListeningTo($(document))\r\n\r\n      if (shouldRevert && revertDuration && !this.isHidden) { // do a revert animation?\r\n        this.isAnimating = true\r\n        this.el.animate({\r\n          top: this.top0,\r\n          left: this.left0\r\n        }, {\r\n          duration: revertDuration,\r\n          complete: complete\r\n        })\r\n      } else {\r\n        complete()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Gets the tracking element. Create it if necessary\r\n  getEl() {\r\n    let el = this.el\r\n\r\n    if (!el) {\r\n      el = this.el = this.sourceEl.clone()\r\n        .addClass(this.options.additionalClass || '')\r\n        .css({\r\n          position: 'absolute',\r\n          visibility: '', // in case original element was hidden (commonly through hideEvents())\r\n          display: this.isHidden ? 'none' : '', // for when initially hidden\r\n          margin: 0,\r\n          right: 'auto', // erase and set width instead\r\n          bottom: 'auto', // erase and set height instead\r\n          width: this.sourceEl.width(), // explicit height in case there was a 'right' value\r\n          height: this.sourceEl.height(), // explicit width in case there was a 'bottom' value\r\n          opacity: this.options.opacity || '',\r\n          zIndex: this.options.zIndex\r\n        })\r\n\r\n      // we don't want long taps or any mouse interaction causing selection/menus.\r\n      // would use preventSelection(), but that prevents selectstart, causing problems.\r\n      el.addClass('fc-unselectable')\r\n\r\n      el.appendTo(this.parentEl)\r\n    }\r\n\r\n    return el\r\n  }\r\n\r\n\r\n  // Removes the tracking element if it has already been created\r\n  removeElement() {\r\n    if (this.el) {\r\n      this.el.remove()\r\n      this.el = null\r\n    }\r\n  }\r\n\r\n\r\n  // Update the CSS position of the tracking element\r\n  updatePosition() {\r\n    let sourceOffset\r\n    let origin\r\n\r\n    this.getEl() // ensure this.el\r\n\r\n    // make sure origin info was computed\r\n    if (this.top0 == null) {\r\n      sourceOffset = this.sourceEl.offset()\r\n      origin = this.el.offsetParent().offset()\r\n      this.top0 = sourceOffset.top - origin.top\r\n      this.left0 = sourceOffset.left - origin.left\r\n    }\r\n\r\n    this.el.css({\r\n      top: this.top0 + this.topDelta,\r\n      left: this.left0 + this.leftDelta\r\n    })\r\n  }\r\n\r\n\r\n  // Gets called when the user moves the mouse\r\n  handleMove(ev) {\r\n    this.topDelta = getEvY(ev) - this.y0\r\n    this.leftDelta = getEvX(ev) - this.x0\r\n\r\n    if (!this.isHidden) {\r\n      this.updatePosition()\r\n    }\r\n  }\r\n\r\n\r\n  // Temporarily makes the tracking element invisible. Can be called before following starts\r\n  hide() {\r\n    if (!this.isHidden) {\r\n      this.isHidden = true\r\n      if (this.el) {\r\n        this.el.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Show the tracking element after it has been temporarily hidden\r\n  show() {\r\n    if (this.isHidden) {\r\n      this.isHidden = false\r\n      this.updatePosition()\r\n      this.getEl().show()\r\n    }\r\n  }\r\n\r\n}\r\n\r\nListenerMixin.mixInto(MouseFollower)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/MouseFollower.ts","import HitDragListener from '../../common/HitDragListener'\r\nimport Interaction from './Interaction'\r\n\r\n\r\nexport default class DateClicking extends Interaction {\r\n\r\n  dragListener: any\r\n\r\n\r\n  /*\r\n  component must implement:\r\n    - bindDateHandlerToEl\r\n    - getSafeHitFootprint\r\n    - getHitEl\r\n  */\r\n  constructor(component) {\r\n    super(component)\r\n    this.dragListener = this.buildDragListener()\r\n  }\r\n\r\n\r\n  end() {\r\n    this.dragListener.endInteraction()\r\n  }\r\n\r\n\r\n  bindToEl(el) {\r\n    let component = this.component\r\n    let dragListener = this.dragListener\r\n\r\n    component.bindDateHandlerToEl(el, 'mousedown', function(ev) {\r\n      if (!component.shouldIgnoreMouse()) {\r\n        dragListener.startInteraction(ev)\r\n      }\r\n    })\r\n\r\n    component.bindDateHandlerToEl(el, 'touchstart', function(ev) {\r\n      if (!component.shouldIgnoreTouch()) {\r\n        dragListener.startInteraction(ev)\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  // Creates a listener that tracks the user's drag across day elements, for day clicking.\r\n  buildDragListener() {\r\n    let component = this.component\r\n    let dayClickHit // null if invalid dayClick\r\n\r\n    let dragListener = new HitDragListener(component, {\r\n      scroll: this.opt('dragScroll'),\r\n      interactionStart: () => {\r\n        dayClickHit = dragListener.origHit\r\n      },\r\n      hitOver: (hit, isOrig, origHit) => {\r\n        // if user dragged to another cell at any point, it can no longer be a dayClick\r\n        if (!isOrig) {\r\n          dayClickHit = null\r\n        }\r\n      },\r\n      hitOut: () => { // called before mouse moves to a different hit OR moved out of all hits\r\n        dayClickHit = null\r\n      },\r\n      interactionEnd: (ev, isCancelled) => {\r\n        let componentFootprint\r\n\r\n        if (!isCancelled && dayClickHit) {\r\n          componentFootprint = component.getSafeHitFootprint(dayClickHit)\r\n\r\n          if (componentFootprint) {\r\n            this.view.triggerDayClick(componentFootprint, component.getHitEl(dayClickHit), ev)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // because dragListener won't be called with any time delay, \"dragging\" will begin immediately,\r\n    // which will kill any touchmoving/scrolling. Prevent this.\r\n    dragListener.shouldCancelTouchScroll = false\r\n\r\n    dragListener.scrollAlwaysKills = true\r\n\r\n    return dragListener\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/component/interactions/DateClicking.ts","import { htmlEscape, cssToStr, proxy } from '../util'\r\nimport EventRenderer from '../component/renderers/EventRenderer'\r\n\r\n/*\r\nOnly handles foreground segs.\r\nDoes not own rendering. Use for low-level util methods by TimeGrid.\r\n*/\r\nexport default class TimeGridEventRenderer extends EventRenderer {\r\n\r\n  timeGrid: any\r\n\r\n\r\n  constructor(timeGrid, fillRenderer) {\r\n    super(timeGrid, fillRenderer)\r\n    this.timeGrid = timeGrid\r\n  }\r\n\r\n\r\n  renderFgSegs(segs) {\r\n    this.renderFgSegsIntoContainers(segs, this.timeGrid.fgContainerEls)\r\n  }\r\n\r\n\r\n  // Given an array of foreground segments, render a DOM element for each, computes position,\r\n  // and attaches to the column inner-container elements.\r\n  renderFgSegsIntoContainers(segs, containerEls) {\r\n    let segsByCol\r\n    let col\r\n\r\n    segsByCol = this.timeGrid.groupSegsByCol(segs)\r\n\r\n    for (col = 0; col < this.timeGrid.colCnt; col++) {\r\n      this.updateFgSegCoords(segsByCol[col])\r\n    }\r\n\r\n    this.timeGrid.attachSegsByCol(segsByCol, containerEls)\r\n  }\r\n\r\n\r\n  unrenderFgSegs() {\r\n    if (this.fgSegs) { // hack\r\n      this.fgSegs.forEach(function(seg) {\r\n        seg.el.remove()\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // Computes a default event time formatting string if `timeFormat` is not explicitly defined\r\n  computeEventTimeFormat() {\r\n    return this.opt('noMeridiemTimeFormat') // like \"6:30\" (no AM/PM)\r\n  }\r\n\r\n\r\n  // Computes a default `displayEventEnd` value if one is not expliclty defined\r\n  computeDisplayEventEnd() {\r\n    return true\r\n  }\r\n\r\n\r\n  // Renders the HTML for a single event segment's default rendering\r\n  fgSegHtml(seg, disableResizing) {\r\n    let view = this.view\r\n    let calendar = view.calendar\r\n    let componentFootprint = seg.footprint.componentFootprint\r\n    let isAllDay = componentFootprint.isAllDay\r\n    let eventDef = seg.footprint.eventDef\r\n    let isDraggable = view.isEventDefDraggable(eventDef)\r\n    let isResizableFromStart = !disableResizing && seg.isStart && view.isEventDefResizableFromStart(eventDef)\r\n    let isResizableFromEnd = !disableResizing && seg.isEnd && view.isEventDefResizableFromEnd(eventDef)\r\n    let classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd)\r\n    let skinCss = cssToStr(this.getSkinCss(eventDef))\r\n    let timeText\r\n    let fullTimeText // more verbose time text. for the print stylesheet\r\n    let startTimeText // just the start time text\r\n\r\n    classes.unshift('fc-time-grid-event', 'fc-v-event')\r\n\r\n    // if the event appears to span more than one day...\r\n    if (view.isMultiDayRange(componentFootprint.unzonedRange)) {\r\n      // Don't display time text on segments that run entirely through a day.\r\n      // That would appear as midnight-midnight and would look dumb.\r\n      // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\r\n      if (seg.isStart || seg.isEnd) {\r\n        let zonedStart = calendar.msToMoment(seg.startMs)\r\n        let zonedEnd = calendar.msToMoment(seg.endMs)\r\n        timeText = this._getTimeText(zonedStart, zonedEnd, isAllDay)\r\n        fullTimeText = this._getTimeText(zonedStart, zonedEnd, isAllDay, 'LT')\r\n        startTimeText = this._getTimeText(zonedStart, zonedEnd, isAllDay, null, false) // displayEnd=false\r\n      }\r\n    } else {\r\n      // Display the normal time text for the *event's* times\r\n      timeText = this.getTimeText(seg.footprint)\r\n      fullTimeText = this.getTimeText(seg.footprint, 'LT')\r\n      startTimeText = this.getTimeText(seg.footprint, null, false) // displayEnd=false\r\n    }\r\n\r\n    return '<a class=\"' + classes.join(' ') + '\"' +\r\n      (eventDef.url ?\r\n        ' href=\"' + htmlEscape(eventDef.url) + '\"' :\r\n        ''\r\n        ) +\r\n      (skinCss ?\r\n        ' style=\"' + skinCss + '\"' :\r\n        ''\r\n        ) +\r\n      '>' +\r\n        '<div class=\"fc-content\">' +\r\n          (timeText ?\r\n            '<div class=\"fc-time\"' +\r\n            ' data-start=\"' + htmlEscape(startTimeText) + '\"' +\r\n            ' data-full=\"' + htmlEscape(fullTimeText) + '\"' +\r\n            '>' +\r\n              '<span>' + htmlEscape(timeText) + '</span>' +\r\n            '</div>' :\r\n            ''\r\n            ) +\r\n          (eventDef.title ?\r\n            '<div class=\"fc-title\">' +\r\n              htmlEscape(eventDef.title) +\r\n            '</div>' :\r\n            ''\r\n            ) +\r\n        '</div>' +\r\n        '<div class=\"fc-bg\"/>' +\r\n        /* TODO: write CSS for this\r\n        (isResizableFromStart ?\r\n          '<div class=\"fc-resizer fc-start-resizer\" />' :\r\n          ''\r\n          ) +\r\n        */\r\n        (isResizableFromEnd ?\r\n          '<div class=\"fc-resizer fc-end-resizer\" />' :\r\n          ''\r\n          ) +\r\n      '</a>'\r\n  }\r\n\r\n\r\n  // Given segments that are assumed to all live in the *same column*,\r\n  // compute their verical/horizontal coordinates and assign to their elements.\r\n  updateFgSegCoords(segs) {\r\n    this.timeGrid.computeSegVerticals(segs) // horizontals relies on this\r\n    this.computeFgSegHorizontals(segs) // compute horizontal coordinates, z-index's, and reorder the array\r\n    this.timeGrid.assignSegVerticals(segs)\r\n    this.assignFgSegHorizontals(segs)\r\n  }\r\n\r\n\r\n  // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\r\n  // NOTE: Also reorders the given array by date!\r\n  computeFgSegHorizontals(segs) {\r\n    let levels\r\n    let level0\r\n    let i\r\n\r\n    this.sortEventSegs(segs) // order by certain criteria\r\n    levels = buildSlotSegLevels(segs)\r\n    computeForwardSlotSegs(levels)\r\n\r\n    if ((level0 = levels[0])) {\r\n\r\n      for (i = 0; i < level0.length; i++) {\r\n        computeSlotSegPressures(level0[i])\r\n      }\r\n\r\n      for (i = 0; i < level0.length; i++) {\r\n        this.computeFgSegForwardBack(level0[i], 0, 0)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\r\n  // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\r\n  // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\r\n  //\r\n  // The segment might be part of a \"series\", which means consecutive segments with the same pressure\r\n  // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\r\n  // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\r\n  // coordinate of the first segment in the series.\r\n  computeFgSegForwardBack(seg, seriesBackwardPressure, seriesBackwardCoord) {\r\n    let forwardSegs = seg.forwardSegs\r\n    let i\r\n\r\n    if (seg.forwardCoord === undefined) { // not already computed\r\n\r\n      if (!forwardSegs.length) {\r\n\r\n        // if there are no forward segments, this segment should butt up against the edge\r\n        seg.forwardCoord = 1\r\n      } else {\r\n\r\n        // sort highest pressure first\r\n        this.sortForwardSegs(forwardSegs)\r\n\r\n        // this segment's forwardCoord will be calculated from the backwardCoord of the\r\n        // highest-pressure forward segment.\r\n        this.computeFgSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord)\r\n        seg.forwardCoord = forwardSegs[0].backwardCoord\r\n      }\r\n\r\n      // calculate the backwardCoord from the forwardCoord. consider the series\r\n      seg.backwardCoord = seg.forwardCoord -\r\n        (seg.forwardCoord - seriesBackwardCoord) / // available width for series\r\n        (seriesBackwardPressure + 1) // # of segments in the series\r\n\r\n      // use this segment's coordinates to computed the coordinates of the less-pressurized\r\n      // forward segments\r\n      for (i = 0; i < forwardSegs.length; i++) {\r\n        this.computeFgSegForwardBack(forwardSegs[i], 0, seg.forwardCoord)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  sortForwardSegs(forwardSegs) {\r\n    forwardSegs.sort(proxy(this, 'compareForwardSegs'))\r\n  }\r\n\r\n\r\n  // A cmp function for determining which forward segment to rely on more when computing coordinates.\r\n  compareForwardSegs(seg1, seg2) {\r\n    // put higher-pressure first\r\n    return seg2.forwardPressure - seg1.forwardPressure ||\r\n      // put segments that are closer to initial edge first (and favor ones with no coords yet)\r\n      (seg1.backwardCoord || 0) - (seg2.backwardCoord || 0) ||\r\n      // do normal sorting...\r\n      this.compareEventSegs(seg1, seg2)\r\n  }\r\n\r\n\r\n  // Given foreground event segments that have already had their position coordinates computed,\r\n  // assigns position-related CSS values to their elements.\r\n  assignFgSegHorizontals(segs) {\r\n    let i\r\n    let seg\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      seg.el.css(this.generateFgSegHorizontalCss(seg))\r\n\r\n      // if the height is short, add a className for alternate styling\r\n      if (seg.bottom - seg.top < 30) {\r\n        seg.el.addClass('fc-short')\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  // Generates an object with CSS properties/values that should be applied to an event segment element.\r\n  // Contains important positioning-related properties that should be applied to any event element, customized or not.\r\n  generateFgSegHorizontalCss(seg) {\r\n    let shouldOverlap = this.opt('slotEventOverlap')\r\n    let backwardCoord = seg.backwardCoord // the left side if LTR. the right side if RTL. floating-point\r\n    let forwardCoord = seg.forwardCoord // the right side if LTR. the left side if RTL. floating-point\r\n    let props = this.timeGrid.generateSegVerticalCss(seg) // get top/bottom first\r\n    let isRTL = this.timeGrid.isRTL\r\n    let left // amount of space from left edge, a fraction of the total width\r\n    let right // amount of space from right edge, a fraction of the total width\r\n\r\n    if (shouldOverlap) {\r\n      // double the width, but don't go beyond the maximum forward coordinate (1.0)\r\n      forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2)\r\n    }\r\n\r\n    if (isRTL) {\r\n      left = 1 - forwardCoord\r\n      right = backwardCoord\r\n    } else {\r\n      left = backwardCoord\r\n      right = 1 - forwardCoord\r\n    }\r\n\r\n    props.zIndex = seg.level + 1 // convert from 0-base to 1-based\r\n    props.left = left * 100 + '%'\r\n    props.right = right * 100 + '%'\r\n\r\n    if (shouldOverlap && seg.forwardPressure) {\r\n      // add padding to the edge so that forward stacked events don't cover the resizer's icon\r\n      props[isRTL ? 'marginLeft' : 'marginRight'] = 10 * 2 // 10 is a guesstimate of the icon's width\r\n    }\r\n\r\n    return props\r\n  }\r\n\r\n}\r\n\r\n\r\n// Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\r\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\r\nfunction buildSlotSegLevels(segs) {\r\n  let levels = []\r\n  let i\r\n  let seg\r\n  let j\r\n\r\n  for (i = 0; i < segs.length; i++) {\r\n    seg = segs[i]\r\n\r\n    // go through all the levels and stop on the first level where there are no collisions\r\n    for (j = 0; j < levels.length; j++) {\r\n      if (!computeSlotSegCollisions(seg, levels[j]).length) {\r\n        break\r\n      }\r\n    }\r\n\r\n    seg.level = j;\r\n\r\n    (levels[j] || (levels[j] = [])).push(seg)\r\n  }\r\n\r\n  return levels\r\n}\r\n\r\n\r\n// For every segment, figure out the other segments that are in subsequent\r\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\r\nfunction computeForwardSlotSegs(levels) {\r\n  let i\r\n  let level\r\n  let j\r\n  let seg\r\n  let k\r\n\r\n  for (i = 0; i < levels.length; i++) {\r\n    level = levels[i]\r\n\r\n    for (j = 0; j < level.length; j++) {\r\n      seg = level[j]\r\n\r\n      seg.forwardSegs = []\r\n      for (k = i + 1; k < levels.length; k++) {\r\n        computeSlotSegCollisions(seg, levels[k], seg.forwardSegs)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n\r\n// Figure out which path forward (via seg.forwardSegs) results in the longest path until\r\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\r\nfunction computeSlotSegPressures(seg) {\r\n  let forwardSegs = seg.forwardSegs\r\n  let forwardPressure = 0\r\n  let i\r\n  let forwardSeg\r\n\r\n  if (seg.forwardPressure === undefined) { // not already computed\r\n\r\n    for (i = 0; i < forwardSegs.length; i++) {\r\n      forwardSeg = forwardSegs[i]\r\n\r\n      // figure out the child's maximum forward path\r\n      computeSlotSegPressures(forwardSeg)\r\n\r\n      // either use the existing maximum, or use the child's forward pressure\r\n      // plus one (for the forwardSeg itself)\r\n      forwardPressure = Math.max(\r\n        forwardPressure,\r\n        1 + forwardSeg.forwardPressure\r\n      )\r\n    }\r\n\r\n    seg.forwardPressure = forwardPressure\r\n  }\r\n}\r\n\r\n\r\n// Find all the segments in `otherSegs` that vertically collide with `seg`.\r\n// Append into an optionally-supplied `results` array and return.\r\nfunction computeSlotSegCollisions(seg, otherSegs, results= []) {\r\n\r\n  for (let i = 0; i < otherSegs.length; i++) {\r\n    if (isSlotSegCollision(seg, otherSegs[i])) {\r\n      results.push(otherSegs[i])\r\n    }\r\n  }\r\n\r\n  return results\r\n}\r\n\r\n\r\n// Do these segments occupy the same vertical space?\r\nfunction isSlotSegCollision(seg1, seg2) {\r\n  return seg1.bottom > seg2.top && seg1.top < seg2.bottom\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/TimeGridEventRenderer.ts","import * as $ from 'jquery'\r\nimport HelperRenderer from '../component/renderers/HelperRenderer'\r\n\r\n\r\nexport default class TimeGridHelperRenderer extends HelperRenderer {\r\n\r\n  renderSegs(segs, sourceSeg) {\r\n    let helperNodes = []\r\n    let i\r\n    let seg\r\n    let sourceEl\r\n\r\n    // TODO: not good to call eventRenderer this way\r\n    this.eventRenderer.renderFgSegsIntoContainers(\r\n      segs,\r\n      this.component.helperContainerEls\r\n    )\r\n\r\n    // Try to make the segment that is in the same row as sourceSeg look the same\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n\r\n      if (sourceSeg && sourceSeg.col === seg.col) {\r\n        sourceEl = sourceSeg.el\r\n        seg.el.css({\r\n          left: sourceEl.css('left'),\r\n          right: sourceEl.css('right'),\r\n          'margin-left': sourceEl.css('margin-left'),\r\n          'margin-right': sourceEl.css('margin-right')\r\n        })\r\n      }\r\n\r\n      helperNodes.push(seg.el[0])\r\n    }\r\n\r\n    return $(helperNodes) // must return the elements rendered\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/TimeGridHelperRenderer.ts","import FillRenderer from '../component/renderers/FillRenderer'\r\n\r\n\r\nexport default class TimeGridFillRenderer extends FillRenderer {\r\n\r\n  attachSegEls(type, segs) {\r\n    let timeGrid = this.component\r\n    let containerEls\r\n\r\n    // TODO: more efficient lookup\r\n    if (type === 'bgEvent') {\r\n      containerEls = timeGrid.bgContainerEls\r\n    } else if (type === 'businessHours') {\r\n      containerEls = timeGrid.businessContainerEls\r\n    } else if (type === 'highlight') {\r\n      containerEls = timeGrid.highlightContainerEls\r\n    }\r\n\r\n    timeGrid.updateSegVerticals(segs)\r\n    timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls)\r\n\r\n    return segs.map(function(seg) {\r\n      return seg.el[0]\r\n    })\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/TimeGridFillRenderer.ts","\r\n/* A rectangular panel that is absolutely positioned over other content\r\n------------------------------------------------------------------------------------------------------------------------\r\nOptions:\r\n  - className (string)\r\n  - content (HTML string or jQuery element set)\r\n  - parentEl\r\n  - top\r\n  - left\r\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\r\n  - autoHide (boolean)\r\n  - show (callback)\r\n  - hide (callback)\r\n*/\r\n\r\nimport * as $ from 'jquery'\r\nimport { getScrollParent } from '../util'\r\nimport { default as ListenerMixin, ListenerInterface } from './ListenerMixin'\r\n\r\n\r\nexport default class Popover {\r\n\r\n  listenTo: ListenerInterface['listenTo']\r\n  stopListeningTo: ListenerInterface['stopListeningTo']\r\n\r\n  isHidden: boolean = true\r\n  options: any\r\n  el: any // the container element for the popover. generated by this object\r\n  margin: number = 10 // the space required between the popover and the edges of the scroll container\r\n\r\n\r\n  constructor(options) {\r\n    this.options = options || {}\r\n  }\r\n\r\n\r\n  // Shows the popover on the specified position. Renders it if not already\r\n  show() {\r\n    if (this.isHidden) {\r\n      if (!this.el) {\r\n        this.render()\r\n      }\r\n      this.el.show()\r\n      this.position()\r\n      this.isHidden = false\r\n      this.trigger('show')\r\n    }\r\n  }\r\n\r\n\r\n  // Hides the popover, through CSS, but does not remove it from the DOM\r\n  hide() {\r\n    if (!this.isHidden) {\r\n      this.el.hide()\r\n      this.isHidden = true\r\n      this.trigger('hide')\r\n    }\r\n  }\r\n\r\n\r\n  // Creates `this.el` and renders content inside of it\r\n  render() {\r\n    let options = this.options\r\n\r\n    this.el = $('<div class=\"fc-popover\"/>')\r\n      .addClass(options.className || '')\r\n      .css({\r\n        // position initially to the top left to avoid creating scrollbars\r\n        top: 0,\r\n        left: 0\r\n      })\r\n      .append(options.content)\r\n      .appendTo(options.parentEl)\r\n\r\n    // when a click happens on anything inside with a 'fc-close' className, hide the popover\r\n    this.el.on('click', '.fc-close', () => {\r\n      this.hide()\r\n    })\r\n\r\n    if (options.autoHide) {\r\n      this.listenTo($(document), 'mousedown', this.documentMousedown)\r\n    }\r\n  }\r\n\r\n\r\n  // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\r\n  documentMousedown(ev) {\r\n    // only hide the popover if the click happened outside the popover\r\n    if (this.el && !$(ev.target).closest(this.el).length) {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n\r\n  // Hides and unregisters any handlers\r\n  removeElement() {\r\n    this.hide()\r\n\r\n    if (this.el) {\r\n      this.el.remove()\r\n      this.el = null\r\n    }\r\n\r\n    this.stopListeningTo($(document), 'mousedown')\r\n  }\r\n\r\n\r\n  // Positions the popover optimally, using the top/left/right options\r\n  position() {\r\n    let options = this.options\r\n    let origin = this.el.offsetParent().offset()\r\n    let width = this.el.outerWidth()\r\n    let height = this.el.outerHeight()\r\n    let windowEl = $(window)\r\n    let viewportEl = getScrollParent(this.el)\r\n    let viewportTop\r\n    let viewportLeft\r\n    let viewportOffset\r\n    let top // the \"position\" (not \"offset\") values for the popover\r\n    let left //\r\n\r\n    // compute top and left\r\n    top = options.top || 0\r\n    if (options.left !== undefined) {\r\n      left = options.left\r\n    } else if (options.right !== undefined) {\r\n      left = options.right - width // derive the left value from the right value\r\n    } else {\r\n      left = 0\r\n    }\r\n\r\n    if (viewportEl.is(window) || viewportEl.is(document)) { // normalize getScrollParent's result\r\n      viewportEl = windowEl\r\n      viewportTop = 0 // the window is always at the top left\r\n      viewportLeft = 0 // (and .offset() won't work if called here)\r\n    } else {\r\n      viewportOffset = viewportEl.offset()\r\n      viewportTop = viewportOffset.top\r\n      viewportLeft = viewportOffset.left\r\n    }\r\n\r\n    // if the window is scrolled, it causes the visible area to be further down\r\n    viewportTop += windowEl.scrollTop()\r\n    viewportLeft += windowEl.scrollLeft()\r\n\r\n    // constrain to the view port. if constrained by two edges, give precedence to top/left\r\n    if (options.viewportConstrain !== false) {\r\n      top = Math.min(top, viewportTop + viewportEl.outerHeight() - height - this.margin)\r\n      top = Math.max(top, viewportTop + this.margin)\r\n      left = Math.min(left, viewportLeft + viewportEl.outerWidth() - width - this.margin)\r\n      left = Math.max(left, viewportLeft + this.margin)\r\n    }\r\n\r\n    this.el.css({\r\n      top: top - origin.top,\r\n      left: left - origin.left\r\n    })\r\n  }\r\n\r\n\r\n  // Triggers a callback. Calls a function in the option hash of the same name.\r\n  // Arguments beyond the first `name` are forwarded on.\r\n  // TODO: better code reuse for this. Repeat code\r\n  trigger(name) {\r\n    if (this.options[name]) {\r\n      this.options[name].apply(this, Array.prototype.slice.call(arguments, 1))\r\n    }\r\n  }\r\n\r\n}\r\n\r\nListenerMixin.mixInto(Popover)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Popover.ts","import * as $ from 'jquery'\r\nimport { htmlEscape, cssToStr } from '../util'\r\nimport EventRenderer from '../component/renderers/EventRenderer'\r\n\r\n\r\n/* Event-rendering methods for the DayGrid class\r\n----------------------------------------------------------------------------------------------------------------------*/\r\n\r\nexport default class DayGridEventRenderer extends EventRenderer {\r\n\r\n  dayGrid: any\r\n  rowStructs: any // an array of objects, each holding information about a row's foreground event-rendering\r\n\r\n\r\n  constructor(dayGrid, fillRenderer) {\r\n    super(dayGrid, fillRenderer)\r\n    this.dayGrid = dayGrid\r\n  }\r\n\r\n\r\n  renderBgRanges(eventRanges) {\r\n    // don't render timed background events\r\n    eventRanges = $.grep(eventRanges, function (eventRange: any) {\r\n      return eventRange.eventDef.isAllDay()\r\n    })\r\n\r\n    super.renderBgRanges(eventRanges)\r\n  }\r\n\r\n\r\n  // Renders the given foreground event segments onto the grid\r\n  renderFgSegs(segs) {\r\n    let rowStructs = this.rowStructs = this.renderSegRows(segs)\r\n\r\n    // append to each row's content skeleton\r\n    this.dayGrid.rowEls.each(function (i, rowNode) {\r\n      $(rowNode).find('.fc-content-skeleton > table').append(\r\n        rowStructs[i].tbodyEl\r\n      )\r\n    })\r\n  }\r\n\r\n\r\n  // Unrenders all currently rendered foreground event segments\r\n  unrenderFgSegs() {\r\n    let rowStructs = this.rowStructs || []\r\n    let rowStruct\r\n\r\n    while ((rowStruct = rowStructs.pop())) {\r\n      rowStruct.tbodyEl.remove()\r\n    }\r\n\r\n    this.rowStructs = null\r\n  }\r\n\r\n\r\n  // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\r\n  // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\r\n  // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\r\n  renderSegRows(segs) {\r\n    let rowStructs = []\r\n    let segRows\r\n    let row\r\n\r\n    segRows = this.groupSegRows(segs) // group into nested arrays\r\n\r\n\r\n    // iterate each row of segment groupings\r\n    for (row = 0; row < segRows.length; row++) {\r\n      rowStructs.push(\r\n        this.renderSegRow(row, segRows[row])\r\n      )\r\n    }\r\n\r\n    return rowStructs\r\n  }\r\n\r\n\r\n  // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\r\n  // the segments. Returns object with a bunch of internal data about how the render was calculated.\r\n  // NOTE: modifies rowSegs\r\n  renderSegRow(row, rowSegs) {\r\n    let colCnt = this.dayGrid.colCnt\r\n    let segLevels = this.buildSegLevels(rowSegs) // group into sub-arrays of levels\r\n    let levelCnt = Math.max(1, segLevels.length) // ensure at least one level\r\n    let tbody = $('<tbody/>')\r\n    let segMatrix = [] // lookup for which segments are rendered into which level+col cells\r\n    let cellMatrix = [] // lookup for all <td> elements of the level+col matrix\r\n    let loneCellMatrix = [] // lookup for <td> elements that only take up a single column\r\n    let i\r\n    let levelSegs\r\n    let col\r\n    let tr\r\n    let j\r\n    let seg\r\n    let td\r\n\r\n    // populates empty cells from the current column (`col`) to `endCol`\r\n    function emptyCellsUntil(endCol) {\r\n      while (col < endCol) {\r\n        // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\r\n        td = (loneCellMatrix[i - 1] || [])[col]\r\n        if (td) {\r\n          td.attr(\r\n            'rowspan',\r\n            parseInt(td.attr('rowspan') || 1, 10) + 1\r\n          )\r\n        } else {\r\n          td = $('<td/>')\r\n          tr.append(td)\r\n        }\r\n        cellMatrix[i][col] = td\r\n        loneCellMatrix[i][col] = td\r\n        col++\r\n      }\r\n    }\r\n\r\n    for (i = 0; i < levelCnt; i++) { // iterate through all levels\r\n      levelSegs = segLevels[i]\r\n      col = 0\r\n      tr = $('<tr/>')\r\n      segMatrix.push([])\r\n      cellMatrix.push([])\r\n      loneCellMatrix.push([])\r\n\r\n      // levelCnt might be 1 even though there are no actual levels. protect against this.\r\n      // this single empty row is useful for styling.\r\n\r\n      if (levelSegs) {\r\n        for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\r\n          seg = levelSegs[j]\r\n          emptyCellsUntil(seg.leftCol)\r\n          // create a container that occupies or more columns. append the event element.\r\n          td = $('<td class=\"fc-event-container\"/>').append(seg.el)\r\n          if (seg.leftCol !== seg.rightCol) {\r\n            td.attr('colspan', seg.rightCol - seg.leftCol + 1)\r\n          } else { // a single-column segment\r\n            // console.log('i-->',col)\r\n            // console.log('col-->',col)\r\n            loneCellMatrix[i][col] = td\r\n          }\r\n          while (col <= seg.rightCol) {\r\n            cellMatrix[i][col] = td\r\n            segMatrix[i][col] = seg\r\n            col++\r\n          }\r\n          tr.append(td)\r\n        }\r\n        // for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\r\n        //   seg = levelSegs[j]\r\n\r\n        //   emptyCellsUntil(seg.leftCol)\r\n\r\n\r\n        //   // create a container that occupies or more columns. append the event element.\r\n        //   td = $('<td class=\"fc-event-container\"/>').append(seg.el)\r\n        //   if (seg.leftCol !== seg.rightCol) {\r\n        //     td.attr('colspan', seg.rightCol - seg.leftCol + 1)\r\n        //   } else { // a single-column segment\r\n        //     // console.log('i-->',col)\r\n        //     // console.log('col-->',col)\r\n        //     loneCellMatrix[i][col] = td\r\n        //   }\r\n        //   while (col <= seg.rightCol) {\r\n        //     cellMatrix[i][col] = td\r\n        //     segMatrix[i][col] = seg\r\n        //     col++\r\n        //   }\r\n        //   console.log(td)\r\n        //   tr.append(td)\r\n        // }\r\n      }\r\n\r\n      emptyCellsUntil(colCnt) // finish off the row\r\n      this.dayGrid.bookendCells(tr)\r\n      tbody.append(tr)\r\n    }\r\n\r\n    return { // a \"rowStruct\"\r\n      row: row, // the row number\r\n      tbodyEl: tbody,\r\n      cellMatrix: cellMatrix,\r\n      segMatrix: segMatrix,\r\n      segLevels: segLevels,\r\n      segs: rowSegs\r\n    }\r\n  }\r\n\r\n\r\n  // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\r\n  // NOTE: modifies segs\r\n  buildSegLevels(segs) {\r\n    let levels = []\r\n    let i\r\n    let seg\r\n    let j\r\n\r\n    // Give preference to elements with certain criteria, so they have\r\n    // a chance to be closer to the top.\r\n    this.sortEventSegs(segs)\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n\r\n      // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\r\n      for (j = 0; j < levels.length; j++) {\r\n        if (!isDaySegCollision(seg, levels[j])) {\r\n          break\r\n        }\r\n      }\r\n      // `j` now holds the desired subrow index\r\n      seg.level = j;\r\n\r\n      // create new level array if needed and append segment\r\n      (levels[j] || (levels[j] = [])).push(seg)\r\n    }\r\n\r\n    // order segments left-to-right. very important if calendar is RTL\r\n    for (j = 0; j < levels.length; j++) {\r\n      levels[j].sort(compareDaySegCols)\r\n    }\r\n\r\n    return levels\r\n  }\r\n\r\n\r\n  // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\r\n  groupSegRows(segs) {\r\n    let segRows = []\r\n    let i\r\n\r\n    for (i = 0; i < this.dayGrid.rowCnt; i++) {\r\n      segRows.push([])\r\n    }\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n\r\n      segRows[segs[i].row].push(segs[i])\r\n    }\r\n\r\n    return segRows\r\n  }\r\n\r\n\r\n  // Computes a default event time formatting string if `timeFormat` is not explicitly defined\r\n  computeEventTimeFormat() {\r\n    return this.opt('extraSmallTimeFormat') // like \"6p\" or \"6:30p\"\r\n  }\r\n\r\n\r\n  // Computes a default `displayEventEnd` value if one is not expliclty defined\r\n  computeDisplayEventEnd() {\r\n    return this.dayGrid.colCnt === 1 // we'll likely have space if there's only one day\r\n  }\r\n\r\n\r\n  // Builds the HTML to be used for the default element for an individual segment\r\n  fgSegHtml(seg, disableResizing) {\r\n    let view = this.view\r\n    let eventDef = seg.footprint.eventDef\r\n    let isAllDay = seg.footprint.componentFootprint.isAllDay\r\n    let isDraggable = view.isEventDefDraggable(eventDef)\r\n    let isResizableFromStart = !disableResizing && isAllDay &&\r\n      seg.isStart && view.isEventDefResizableFromStart(eventDef)\r\n    let isResizableFromEnd = !disableResizing && isAllDay &&\r\n      seg.isEnd && view.isEventDefResizableFromEnd(eventDef)\r\n    let classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd)\r\n    let skinCss = cssToStr(this.getSkinCss(eventDef))\r\n    let timeHtml = ''\r\n    let timeText\r\n    let titleHtml\r\n    classes.unshift('fc-day-grid-event', 'fc-h-event')\r\n\r\n    // Only display a timed events time if it is the starting segment\r\n    if (seg.isStart) {\r\n      timeText = this.getTimeText(seg.footprint)\r\n      if (timeText) {\r\n        timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>'\r\n      }\r\n    }\r\n    titleHtml =\r\n      '<span class=\"fc-title\">' +\r\n      (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\r\n      '</span>'\r\n    let htmlReturn = ''\r\n    if (window['isMobile']) {\r\n      htmlReturn = '<div class=\"dot-event\"></div>'\r\n    } else {\r\n      htmlReturn = '<a class=\"' + classes.join(' ') + '\"' +\r\n        (eventDef.url ?\r\n          ' href=\"' + htmlEscape(eventDef.url) + '\"' :\r\n          ''\r\n        ) +\r\n        (skinCss ?\r\n          ' style=\"' + skinCss + '\"' :\r\n          ''\r\n        ) +\r\n        '>' +\r\n        '<div class=\"fc-content\">' +\r\n        (this.dayGrid.isRTL ?\r\n          titleHtml + ' ' + timeHtml : // put a natural space in between\r\n          timeHtml + ' ' + titleHtml   //\r\n        ) +\r\n        '</div>' +\r\n        (isResizableFromStart ?\r\n          '<div class=\"fc-resizer fc-start-resizer\" />' :\r\n          ''\r\n        ) +\r\n        (isResizableFromEnd ?\r\n          '<div class=\"fc-resizer fc-end-resizer\" />' :\r\n          ''\r\n        ) +\r\n        '</a>'\r\n    } {\r\n      return htmlReturn\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\r\nfunction isDaySegCollision(seg, otherSegs) {\r\n  let i\r\n  let otherSeg\r\n\r\n  for (i = 0; i < otherSegs.length; i++) {\r\n    otherSeg = otherSegs[i]\r\n\r\n    if (\r\n      otherSeg.leftCol <= seg.rightCol &&\r\n      otherSeg.rightCol >= seg.leftCol\r\n    ) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\n\r\n// A cmp function for determining the leftmost event\r\nfunction compareDaySegCols(a, b) {\r\n  return a.leftCol - b.leftCol\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/DayGridEventRenderer.ts","import * as $ from 'jquery'\r\nimport HelperRenderer from '../component/renderers/HelperRenderer'\r\n\r\n\r\nexport default class DayGridHelperRenderer extends HelperRenderer {\r\n\r\n  // Renders a mock \"helper\" event. `sourceSeg` is the associated internal segment object. It can be null.\r\n  renderSegs(segs, sourceSeg) {\r\n    let helperNodes = []\r\n    let rowStructs\r\n\r\n    // TODO: not good to call eventRenderer this way\r\n    rowStructs = this.eventRenderer.renderSegRows(segs)\r\n\r\n    // inject each new event skeleton into each associated row\r\n    this.component.rowEls.each(function(row, rowNode) {\r\n      let rowEl = $(rowNode) // the .fc-row\r\n      let skeletonEl = $('<div class=\"fc-helper-skeleton\"><table/></div>') // will be absolutely positioned\r\n      let skeletonTopEl\r\n      let skeletonTop\r\n\r\n      // If there is an original segment, match the top position. Otherwise, put it at the row's top level\r\n      if (sourceSeg && sourceSeg.row === row) {\r\n        skeletonTop = sourceSeg.el.position().top\r\n      } else {\r\n        skeletonTopEl = rowEl.find('.fc-content-skeleton tbody')\r\n        if (!skeletonTopEl.length) { // when no events\r\n          skeletonTopEl = rowEl.find('.fc-content-skeleton table')\r\n        }\r\n\r\n        skeletonTop = skeletonTopEl.position().top\r\n      }\r\n\r\n      skeletonEl.css('top', skeletonTop)\r\n        .find('table')\r\n          .append(rowStructs[row].tbodyEl)\r\n\r\n      rowEl.append(skeletonEl)\r\n      helperNodes.push(skeletonEl[0])\r\n    })\r\n\r\n    return $(helperNodes) // must return the elements rendered\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/DayGridHelperRenderer.ts","import * as $ from 'jquery'\r\nimport FillRenderer from '../component/renderers/FillRenderer'\r\n\r\n\r\nexport default class DayGridFillRenderer extends FillRenderer {\r\n\r\n  fillSegTag: string = 'td' // override the default tag name\r\n\r\n\r\n  attachSegEls(type, segs) {\r\n    let nodes = []\r\n    let i\r\n    let seg\r\n    let skeletonEl\r\n\r\n    for (i = 0; i < segs.length; i++) {\r\n      seg = segs[i]\r\n      skeletonEl = this.renderFillRow(type, seg)\r\n      this.component.rowEls.eq(seg.row).append(skeletonEl)\r\n      nodes.push(skeletonEl[0])\r\n    }\r\n\r\n    return nodes\r\n  }\r\n\r\n\r\n  // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\r\n  renderFillRow(type, seg) {\r\n    let colCnt = this.component.colCnt\r\n    let startCol = seg.leftCol\r\n    let endCol = seg.rightCol + 1\r\n    let className\r\n    let skeletonEl\r\n    let trEl\r\n\r\n    if (type === 'businessHours') {\r\n      className = 'bgevent'\r\n    } else {\r\n      className = type.toLowerCase()\r\n    }\r\n\r\n    skeletonEl = $(\r\n      '<div class=\"fc-' + className + '-skeleton\">' +\r\n        '<table><tr/></table>' +\r\n      '</div>'\r\n    )\r\n    trEl = skeletonEl.find('tr')\r\n\r\n    if (startCol > 0) {\r\n      trEl.append('<td colspan=\"' + startCol + '\"/>')\r\n    }\r\n\r\n    trEl.append(\r\n      seg.el.attr('colspan', endCol - startCol)\r\n    )\r\n\r\n    if (endCol < colCnt) {\r\n      trEl.append('<td colspan=\"' + (colCnt - endCol) + '\"/>')\r\n    }\r\n\r\n    this.component.bookendCells(trEl)\r\n\r\n    return skeletonEl\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/DayGridFillRenderer.ts","import BasicViewDateProfileGenerator from './BasicViewDateProfileGenerator'\r\nimport UnzonedRange from '../models/UnzonedRange'\r\n\r\n\r\nexport default class MonthViewDateProfileGenerator extends BasicViewDateProfileGenerator {\r\n\r\n  // Computes the date range that will be rendered.\r\n  buildRenderRange(currentUnzonedRange, currentRangeUnit, isRangeAllDay) {\r\n    let renderUnzonedRange = super.buildRenderRange(currentUnzonedRange, currentRangeUnit, isRangeAllDay)\r\n    let start = this.msToUtcMoment(renderUnzonedRange.startMs, isRangeAllDay)\r\n    let end = this.msToUtcMoment(renderUnzonedRange.endMs, isRangeAllDay)\r\n    let rowCnt\r\n\r\n    // ensure 6 weeks\r\n    if (this.opt('fixedWeekCount')) {\r\n      rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\r\n        end.diff(start, 'weeks', true) // dontRound=true\r\n      )\r\n      end.add(6 - rowCnt, 'weeks')\r\n    }\r\n\r\n    return new UnzonedRange(start, end)\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/MonthViewDateProfileGenerator.ts","import { htmlEscape } from '../util'\nimport EventRenderer from '../component/renderers/EventRenderer'\n\nexport default class ListEventRenderer extends EventRenderer {\n\n  renderFgSegs(segs) {\n    if (!segs.length) {\n      this.component.renderEmptyMessage()\n    } else {\n      this.component.renderSegList(segs)\n    }\n\n\n  }\n\n  // generates the HTML for a single event row\n  fgSegHtml(seg) {\n    let view = this.view\n    let calendar = view.calendar\n    let theme = calendar.theme\n    let eventFootprint = seg.footprint\n    let eventDef = eventFootprint.eventDef\n    let componentFootprint = eventFootprint.componentFootprint\n    let url = eventDef.url\n    let classes = ['fc-list-item'].concat(this.getClasses(eventDef))\n    let bgColor = this.getBgColor(eventDef)\n    let timeHtml\n\n    if (componentFootprint.isAllDay) {\n      timeHtml = view.getAllDayHtml()\n    } else if (view.isMultiDayRange(componentFootprint.unzonedRange)) {\n      if (seg.isStart || seg.isEnd) { // outer segment that probably lasts part of the day\n        timeHtml = htmlEscape(this._getTimeText(\n          calendar.msToMoment(seg.startMs),\n          calendar.msToMoment(seg.endMs),\n          componentFootprint.isAllDay\n        ))\n      } else { // inner segment that lasts the whole day\n        timeHtml = view.getAllDayHtml()\n      }\n    } else {\n      // Display the normal time text for the *event's* times\n      timeHtml = htmlEscape(this.getTimeText(eventFootprint))\n    }\n\n    if (url) {\n      classes.push('fc-has-url')\n    }\n    let htmlReturn = ''\n    // if (window['isMobile']) {\n    //   htmlReturn = '<tr class=\"' + classes.join(' ') + '\">' +\n    //     (this.displayEventTime ?\n    //       '<td class=\"fc-list-item-time ' + theme.getClass('widgetContent') + '\">' +\n    //       (timeHtml || '') +\n    //       '</td>' :\n    //       '') +\n    //     '<td class=\"fc-list-item-marker ' + theme.getClass('widgetContent') + '\">' +\n    //     '<span class=\"fc-event-dot\"' +\n    //     (bgColor ?\n    //       ' style=\"background-color:' + bgColor + '\"' :\n    //       '') +\n    //     '></span>' +\n    //     '</td>' +\n    //     '<td class=\"fc-list-item-title ' + theme.getClass('widgetContent') + '\">' +\n    //     '<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n    //     htmlEscape(eventDef.title || '') + htmlEscape(eventDef.description || '') +\n    //     '</a>' +\n    //     '</td>' +\n    //     '</tr>'\n    // } \n    if (window['isMobile']) {\n      htmlReturn = '<tr class=\"' + classes.join(' ') + '\">' +\n        (this.displayEventTime ?\n          '<td class=\"fc-list-item-marker va-middle ' + theme.getClass('widgetContent') + '\">' +\n          '<span class=\"fc-event-dot\"' +\n          (bgColor ?\n            ' style=\"background-color:' + bgColor + '\"' :\n            '') +\n          '></span>' +\n          '</td>' :\n          '') +\n        '<td class=\"fc-list-item-title ' + theme.getClass('widgetContent') + '\">' +\n        '<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n        '<span class=\"event-list-title\">' +htmlEscape(eventDef.title || '') + '</span>' + \n        '<span class=\"event-list-detail\">' + htmlEscape(eventDef.description || '') + '</span>' +\n        '</a>' +\n        '</td>' + '<td>' + (timeHtml || '') + '</td>'\n        '</tr>'\n    } else {\n      htmlReturn = '<tr class=\"' + classes.join(' ') + '\">' +\n        (this.displayEventTime ?\n          '<td class=\"fc-list-item-time ' + theme.getClass('widgetContent') + '\">' +\n          (timeHtml || '') +\n          '</td>' :\n          '') +\n        '<td class=\"fc-list-item-marker' + theme.getClass('widgetContent') + '\">' +\n        '<span class=\"fc-event-dot\"' +\n        (bgColor ?\n          ' style=\"background-color:' + bgColor + '\"' :\n          '') +\n        '></span>' +\n        '</td>' +\n        '<td class=\"fc-list-item-title ' + theme.getClass('widgetContent') + '\">' +\n        '<a' + (url ? ' href=\"' + htmlEscape(url) + '\"' : '') + '>' +\n        htmlEscape(eventDef.title || '') +\n        '</a>' +\n        '</td>' +\n        '</tr>'\n    }\n    return htmlReturn\n  }\n\n\n  // like \"4:00am\"\n  computeEventTimeFormat() {\n    return this.opt('mediumTimeFormat')\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/list/ListEventRenderer.ts","import * as $ from 'jquery'\r\nimport EventPointing from '../component/interactions/EventPointing'\r\n\r\n\r\nexport default class ListEventPointing extends EventPointing {\r\n\r\n  // for events with a url, the whole <tr> should be clickable,\r\n  // but it's impossible to wrap with an <a> tag. simulate this.\r\n  handleClick(seg, ev) {\r\n    let url\r\n\r\n    super.handleClick(seg, ev) // might prevent the default action\r\n\r\n    // not clicking on or within an <a> with an href\r\n    if (!$(ev.target).closest('a[href]').length) {\r\n      url = seg.footprint.eventDef.url\r\n\r\n      if (url && !ev.isDefaultPrevented()) { // jsEvent not cancelled in handler\r\n        window.location.href = url // simulate link click\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/list/ListEventPointing.ts","\r\nimport EventSourceParser from './EventSourceParser'\r\n\r\nimport ArrayEventSource from './ArrayEventSource'\r\nimport FuncEventSource from './FuncEventSource'\r\nimport JsonFeedEventSource from './JsonFeedEventSource'\r\n\r\nEventSourceParser.registerClass(ArrayEventSource)\r\nEventSourceParser.registerClass(FuncEventSource)\r\nEventSourceParser.registerClass(JsonFeedEventSource)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/event-source/config.ts","\r\nimport { defineThemeSystem } from './ThemeRegistry'\r\n\r\nimport StandardTheme from './StandardTheme'\r\nimport JqueryUiTheme from './JqueryUiTheme'\r\nimport Bootstrap3Theme from './Bootstrap3Theme'\r\nimport Bootstrap4Theme from './Bootstrap4Theme'\r\n\r\ndefineThemeSystem('standard', StandardTheme)\r\ndefineThemeSystem('jquery-ui', JqueryUiTheme)\r\ndefineThemeSystem('bootstrap3', Bootstrap3Theme)\r\ndefineThemeSystem('bootstrap4', Bootstrap4Theme)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/config.ts","import Theme from './Theme'\r\n\r\nexport default class Bootstrap3Theme extends Theme {\r\n}\r\n\r\nBootstrap3Theme.prototype.classes = {\r\n  widget: 'fc-bootstrap3',\r\n\r\n  tableGrid: 'table-bordered', // avoid `table` class b/c don't want margins. only border color\r\n  tableList: 'table', // `table` class creates bottom margin but who cares\r\n  tableListHeading: 'active',\r\n\r\n  buttonGroup: 'btn-group',\r\n  button: 'btn btn-default',\r\n  stateActive: 'active',\r\n  stateDisabled: 'disabled',\r\n\r\n  today: 'alert alert-info', // the plain `info` class requires `.table`, too much to ask\r\n\r\n  popover: 'panel panel-default',\r\n  popoverHeader: 'panel-heading',\r\n  popoverContent: 'panel-body',\r\n\r\n  // day grid\r\n  // for left/right border color when border is inset from edges (all-day in agenda view)\r\n  // avoid `panel` class b/c don't want margins/radius. only border color.\r\n  headerRow: 'panel-default',\r\n  dayRow: 'panel-default',\r\n\r\n  // list view\r\n  listView: 'panel panel-default'\r\n}\r\n\r\nBootstrap3Theme.prototype.baseIconClass = 'glyphicon'\r\nBootstrap3Theme.prototype.iconClasses = {\r\n  close: 'glyphicon-remove',\r\n  prev: 'glyphicon-chevron-left',\r\n  next: 'glyphicon-chevron-right',\r\n  prevYear: 'glyphicon-backward',\r\n  nextYear: 'glyphicon-forward'\r\n}\r\n\r\nBootstrap3Theme.prototype.iconOverrideOption = 'bootstrapGlyphicons'\r\nBootstrap3Theme.prototype.iconOverrideCustomButtonOption = 'bootstrapGlyphicon'\r\nBootstrap3Theme.prototype.iconOverridePrefix = 'glyphicon-'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/Bootstrap3Theme.ts","import Theme from './Theme'\r\n\r\nexport default class Bootstrap4Theme extends Theme {\r\n}\r\n\r\nBootstrap4Theme.prototype.classes = {\r\n  widget: 'fc-bootstrap4',\r\n\r\n  tableGrid: 'table-bordered', // avoid `table` class b/c don't want margins. only border color\r\n  tableList: 'table', // `table` class creates bottom margin but who cares\r\n  tableListHeading: 'table-active',\r\n\r\n  buttonGroup: 'btn-group',\r\n  button: 'btn btn-primary',\r\n  stateActive: 'active',\r\n  stateDisabled: 'disabled',\r\n\r\n  today: 'alert alert-info', // the plain `info` class requires `.table`, too much to ask\r\n\r\n  popover: 'card card-primary',\r\n  popoverHeader: 'card-header',\r\n  popoverContent: 'card-body',\r\n\r\n  // day grid\r\n  // for left/right border color when border is inset from edges (all-day in agenda view)\r\n  // avoid `table` class b/c don't want margins/padding/structure. only border color.\r\n  headerRow: 'table-bordered',\r\n  dayRow: 'table-bordered',\r\n\r\n  // list view\r\n  listView: 'card card-primary'\r\n}\r\n\r\nBootstrap4Theme.prototype.baseIconClass = 'fa'\r\nBootstrap4Theme.prototype.iconClasses = {\r\n  close: 'fa-times',\r\n  prev: 'fa-chevron-left',\r\n  next: 'fa-chevron-right',\r\n  prevYear: 'fa-angle-double-left',\r\n  nextYear: 'fa-angle-double-right'\r\n}\r\n\r\nBootstrap4Theme.prototype.iconOverrideOption = 'bootstrapFontAwesome'\r\nBootstrap4Theme.prototype.iconOverrideCustomButtonOption = 'bootstrapFontAwesome'\r\nBootstrap4Theme.prototype.iconOverridePrefix = 'fa-'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/theme/Bootstrap4Theme.ts","import { defineView } from '../ViewRegistry'\r\nimport BasicView from './BasicView'\r\nimport MonthView from './MonthView'\r\n\r\ndefineView('basic', {\r\n  'class': BasicView\r\n})\r\n\r\ndefineView('basicDay', {\r\n  type: 'basic',\r\n  duration: { days: 1 }\r\n})\r\n\r\ndefineView('basicWeek', {\r\n  type: 'basic',\r\n  duration: { weeks: 1 }\r\n})\r\n\r\ndefineView('month', {\r\n  'class': MonthView,\r\n  duration: { months: 1 }, // important for prev/next\r\n  defaults: {\r\n    fixedWeekCount: true\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/config.ts","import { defineView } from '../ViewRegistry'\r\nimport AgendaView from './AgendaView'\r\n\r\ndefineView('agenda', {\r\n  'class': AgendaView,\r\n  defaults: {\r\n    allDaySlot: true,\r\n    slotDuration: '00:30:00',\r\n    slotEventOverlap: true // a bad name. confused with overlap/constraint system\r\n  }\r\n})\r\n\r\ndefineView('agendaDay', {\r\n  type: 'agenda',\r\n  duration: { days: 1 }\r\n})\r\n\r\ndefineView('agendaWeek', {\r\n  type: 'agenda',\r\n  duration: { weeks: 1 }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/agenda/config.ts","import { defineView } from '../ViewRegistry'\r\nimport ListView from './ListView'\r\n\r\ndefineView('list', {\r\n  'class': ListView,\r\n  buttonTextKey: 'list', // what to lookup in locale files\r\n  defaults: {\r\n    buttonText: 'list', // text to display for English\r\n    listDayFormat: 'LL', // like \"January 1, 2016\"\r\n    noEventsMessage: 'No events to display'\r\n  }\r\n})\r\n\r\ndefineView('listDay', {\r\n  type: 'list',\r\n  duration: { days: 1 },\r\n  defaults: {\r\n    listDayFormat: 'dddd' // day-of-week is all we need. full date is probably in header\r\n  }\r\n})\r\n\r\ndefineView('listWeek', {\r\n  type: 'list',\r\n  duration: { weeks: 1 },\r\n  defaults: {\r\n    listDayFormat: 'dddd', // day-of-week is more important\r\n    listDayAltFormat: 'LL'\r\n  }\r\n})\r\n\r\ndefineView('listMonth', {\r\n  type: 'list',\r\n  duration: { month: 1 },\r\n  defaults: {\r\n    listDayAltFormat: 'dddd' // day-of-week is nice-to-have\r\n  }\r\n})\r\n\r\ndefineView('listYear', {\r\n  type: 'list',\r\n  duration: { year: 1 },\r\n  defaults: {\r\n    listDayAltFormat: 'dddd' // day-of-week is nice-to-have\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/list/config.ts"],"sourceRoot":""}